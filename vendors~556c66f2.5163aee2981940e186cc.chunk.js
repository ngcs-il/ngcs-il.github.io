(window["webpackJsonp"] = window["webpackJsonp"] || []).push([["vendors~556c66f2"],{

/***/ "3U8n":
/*!*******************************************************************************************************!*\
  !*** ./node_modules/aurelia-dependency-injection/dist/native-modules/aurelia-dependency-injection.js ***!
  \*******************************************************************************************************/
/*! exports provided: _emptyParameters, InvocationHandler, Container, autoinject, inject, invoker, invokeAsFactory, FactoryInvoker, registration, transient, singleton, TransientRegistration, SingletonRegistration, resolver, Strategy, StrategyResolver, Lazy, All, Optional, Parent, Factory, NewInstance, getDecoratorDependencies, lazy, all, optional, parent, factory, newInstance */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"_emptyParameters\", function() { return _emptyParameters; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"InvocationHandler\", function() { return InvocationHandler; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"Container\", function() { return Container; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"autoinject\", function() { return autoinject; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"inject\", function() { return inject; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"invoker\", function() { return invoker; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"invokeAsFactory\", function() { return invokeAsFactory; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"FactoryInvoker\", function() { return FactoryInvoker; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"registration\", function() { return registration; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"transient\", function() { return transient; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"singleton\", function() { return singleton; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"TransientRegistration\", function() { return TransientRegistration; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"SingletonRegistration\", function() { return SingletonRegistration; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"resolver\", function() { return resolver; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"Strategy\", function() { return Strategy; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"StrategyResolver\", function() { return StrategyResolver; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"Lazy\", function() { return Lazy; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"All\", function() { return All; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"Optional\", function() { return Optional; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"Parent\", function() { return Parent; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"Factory\", function() { return Factory; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"NewInstance\", function() { return NewInstance; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"getDecoratorDependencies\", function() { return getDecoratorDependencies; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"lazy\", function() { return lazy; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"all\", function() { return all; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"optional\", function() { return optional; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"parent\", function() { return parent; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"factory\", function() { return factory; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"newInstance\", function() { return newInstance; });\n/* harmony import */ var aurelia_metadata__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! aurelia-metadata */ \"qrcG\");\n/* harmony import */ var aurelia_pal__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! aurelia-pal */ \"70NS\");\n\n\n\n/*! *****************************************************************************\r\nCopyright (c) Microsoft Corporation. All rights reserved.\r\nLicensed under the Apache License, Version 2.0 (the \"License\"); you may not use\r\nthis file except in compliance with the License. You may obtain a copy of the\r\nLicense at http://www.apache.org/licenses/LICENSE-2.0\r\n\r\nTHIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\nKIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED\r\nWARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,\r\nMERCHANTABLITY OR NON-INFRINGEMENT.\r\n\r\nSee the Apache Version 2.0 License for specific language governing permissions\r\nand limitations under the License.\r\n***************************************************************************** */\r\n\r\nfunction __decorate(decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n}\r\n\r\nfunction __metadata(metadataKey, metadataValue) {\r\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(metadataKey, metadataValue);\r\n}\n\nfunction isInjectable(potentialTarget) {\r\n    return !!potentialTarget;\r\n}\r\nfunction autoinject(potentialTarget) {\r\n    var deco = function (target) {\r\n        if (!target.hasOwnProperty('inject')) {\r\n            target.inject = (aurelia_metadata__WEBPACK_IMPORTED_MODULE_0__[\"metadata\"].getOwn(aurelia_metadata__WEBPACK_IMPORTED_MODULE_0__[\"metadata\"].paramTypes, target) ||\r\n                _emptyParameters).slice();\r\n            if (target.inject && target.inject.length > 0) {\r\n                if (target.inject[target.inject.length - 1] === Object) {\r\n                    target.inject.splice(-1, 1);\r\n                }\r\n            }\r\n        }\r\n    };\r\n    if (isInjectable(potentialTarget)) {\r\n        return deco(potentialTarget);\r\n    }\r\n    return deco;\r\n}\r\nfunction inject() {\r\n    var rest = [];\r\n    for (var _i = 0; _i < arguments.length; _i++) {\r\n        rest[_i] = arguments[_i];\r\n    }\r\n    return function (target, _key, descriptor) {\r\n        if (typeof descriptor === 'number') {\r\n            autoinject(target);\r\n            if (rest.length === 1) {\r\n                target.inject[descriptor] = rest[0];\r\n            }\r\n            return;\r\n        }\r\n        if (descriptor) {\r\n            var fn = descriptor.value;\r\n            fn.inject = rest;\r\n        }\r\n        else {\r\n            target.inject = rest;\r\n        }\r\n    };\r\n}\n\nvar resolver = aurelia_metadata__WEBPACK_IMPORTED_MODULE_0__[\"protocol\"].create('aurelia:resolver', function (target) {\r\n    if (!(typeof target.get === 'function')) {\r\n        return 'Resolvers must implement: get(container: Container, key: any): any';\r\n    }\r\n    return true;\r\n});\r\nvar Strategy;\r\n(function (Strategy) {\r\n    Strategy[Strategy[\"instance\"] = 0] = \"instance\";\r\n    Strategy[Strategy[\"singleton\"] = 1] = \"singleton\";\r\n    Strategy[Strategy[\"transient\"] = 2] = \"transient\";\r\n    Strategy[Strategy[\"function\"] = 3] = \"function\";\r\n    Strategy[Strategy[\"array\"] = 4] = \"array\";\r\n    Strategy[Strategy[\"alias\"] = 5] = \"alias\";\r\n})(Strategy || (Strategy = {}));\r\nfunction isStrategy(actual, expected, state) {\r\n    return actual === expected;\r\n}\r\nvar StrategyResolver = (function () {\r\n    function StrategyResolver(strategy, state) {\r\n        this.strategy = strategy;\r\n        this.state = state;\r\n    }\r\n    StrategyResolver.prototype.get = function (container, key) {\r\n        if (isStrategy(this.strategy, Strategy.instance, this.state)) {\r\n            return this.state;\r\n        }\r\n        if (isStrategy(this.strategy, Strategy.singleton, this.state)) {\r\n            var singleton = container.invoke(this.state);\r\n            this.state = singleton;\r\n            this.strategy = 0;\r\n            return singleton;\r\n        }\r\n        if (isStrategy(this.strategy, Strategy.transient, this.state)) {\r\n            return container.invoke(this.state);\r\n        }\r\n        if (isStrategy(this.strategy, Strategy.function, this.state)) {\r\n            return this.state(container, key, this);\r\n        }\r\n        if (isStrategy(this.strategy, Strategy.array, this.state)) {\r\n            return this.state[0].get(container, key);\r\n        }\r\n        if (isStrategy(this.strategy, Strategy.alias, this.state)) {\r\n            return container.get(this.state);\r\n        }\r\n        throw new Error('Invalid strategy: ' + this.strategy);\r\n    };\r\n    StrategyResolver = __decorate([\r\n        resolver(),\r\n        __metadata(\"design:paramtypes\", [Number, Object])\r\n    ], StrategyResolver);\r\n    return StrategyResolver;\r\n}());\r\nvar Lazy = (function () {\r\n    function Lazy(key) {\r\n        this._key = key;\r\n    }\r\n    Lazy_1 = Lazy;\r\n    Lazy.prototype.get = function (container) {\r\n        var _this = this;\r\n        return function () { return container.get(_this._key); };\r\n    };\r\n    Lazy.of = function (key) {\r\n        return new Lazy_1(key);\r\n    };\r\n    var Lazy_1;\r\n    Lazy = Lazy_1 = __decorate([\r\n        resolver(),\r\n        __metadata(\"design:paramtypes\", [Object])\r\n    ], Lazy);\r\n    return Lazy;\r\n}());\r\nvar All = (function () {\r\n    function All(key) {\r\n        this._key = key;\r\n    }\r\n    All_1 = All;\r\n    All.prototype.get = function (container) {\r\n        return container.getAll(this._key);\r\n    };\r\n    All.of = function (key) {\r\n        return new All_1(key);\r\n    };\r\n    var All_1;\r\n    All = All_1 = __decorate([\r\n        resolver(),\r\n        __metadata(\"design:paramtypes\", [Object])\r\n    ], All);\r\n    return All;\r\n}());\r\nvar Optional = (function () {\r\n    function Optional(key, checkParent) {\r\n        if (checkParent === void 0) { checkParent = true; }\r\n        this._key = key;\r\n        this._checkParent = checkParent;\r\n    }\r\n    Optional_1 = Optional;\r\n    Optional.prototype.get = function (container) {\r\n        if (container.hasResolver(this._key, this._checkParent)) {\r\n            return container.get(this._key);\r\n        }\r\n        return null;\r\n    };\r\n    Optional.of = function (key, checkParent) {\r\n        if (checkParent === void 0) { checkParent = true; }\r\n        return new Optional_1(key, checkParent);\r\n    };\r\n    var Optional_1;\r\n    Optional = Optional_1 = __decorate([\r\n        resolver(),\r\n        __metadata(\"design:paramtypes\", [Object, Boolean])\r\n    ], Optional);\r\n    return Optional;\r\n}());\r\nvar Parent = (function () {\r\n    function Parent(key) {\r\n        this._key = key;\r\n    }\r\n    Parent_1 = Parent;\r\n    Parent.prototype.get = function (container) {\r\n        return container.parent ? container.parent.get(this._key) : null;\r\n    };\r\n    Parent.of = function (key) {\r\n        return new Parent_1(key);\r\n    };\r\n    var Parent_1;\r\n    Parent = Parent_1 = __decorate([\r\n        resolver(),\r\n        __metadata(\"design:paramtypes\", [Object])\r\n    ], Parent);\r\n    return Parent;\r\n}());\r\nvar Factory = (function () {\r\n    function Factory(key) {\r\n        this._key = key;\r\n    }\r\n    Factory_1 = Factory;\r\n    Factory.prototype.get = function (container) {\r\n        var fn = this._key;\r\n        var resolver = container.getResolver(fn);\r\n        if (resolver && resolver.strategy === Strategy.function) {\r\n            fn = resolver.state;\r\n        }\r\n        return function () {\r\n            var rest = [];\r\n            for (var _i = 0; _i < arguments.length; _i++) {\r\n                rest[_i] = arguments[_i];\r\n            }\r\n            return container.invoke(fn, rest);\r\n        };\r\n    };\r\n    Factory.of = function (key) {\r\n        return new Factory_1(key);\r\n    };\r\n    var Factory_1;\r\n    Factory = Factory_1 = __decorate([\r\n        resolver(),\r\n        __metadata(\"design:paramtypes\", [Object])\r\n    ], Factory);\r\n    return Factory;\r\n}());\r\nvar NewInstance = (function () {\r\n    function NewInstance(key) {\r\n        var dynamicDependencies = [];\r\n        for (var _i = 1; _i < arguments.length; _i++) {\r\n            dynamicDependencies[_i - 1] = arguments[_i];\r\n        }\r\n        this.key = key;\r\n        this.asKey = key;\r\n        this.dynamicDependencies = dynamicDependencies;\r\n    }\r\n    NewInstance_1 = NewInstance;\r\n    NewInstance.prototype.get = function (container) {\r\n        var dynamicDependencies = this.dynamicDependencies.length > 0\r\n            ? this.dynamicDependencies.map(function (dependency) {\r\n                return dependency['protocol:aurelia:resolver']\r\n                    ? dependency.get(container)\r\n                    : container.get(dependency);\r\n            })\r\n            : undefined;\r\n        var fn = this.key;\r\n        var resolver = container.getResolver(fn);\r\n        if (resolver && resolver.strategy === 3) {\r\n            fn = resolver.state;\r\n        }\r\n        var instance = container.invoke(fn, dynamicDependencies);\r\n        container.registerInstance(this.asKey, instance);\r\n        return instance;\r\n    };\r\n    NewInstance.prototype.as = function (key) {\r\n        this.asKey = key;\r\n        return this;\r\n    };\r\n    NewInstance.of = function (key) {\r\n        var dynamicDependencies = [];\r\n        for (var _i = 1; _i < arguments.length; _i++) {\r\n            dynamicDependencies[_i - 1] = arguments[_i];\r\n        }\r\n        return new (NewInstance_1.bind.apply(NewInstance_1, [void 0, key].concat(dynamicDependencies)))();\r\n    };\r\n    var NewInstance_1;\r\n    NewInstance = NewInstance_1 = __decorate([\r\n        resolver(),\r\n        __metadata(\"design:paramtypes\", [Object, Object])\r\n    ], NewInstance);\r\n    return NewInstance;\r\n}());\r\nfunction getDecoratorDependencies(target) {\r\n    autoinject(target);\r\n    return target.inject;\r\n}\r\nfunction lazy(keyValue) {\r\n    return function (target, _key, index) {\r\n        var inject$$1 = getDecoratorDependencies(target);\r\n        inject$$1[index] = Lazy.of(keyValue);\r\n    };\r\n}\r\nfunction all(keyValue) {\r\n    return function (target, _key, index) {\r\n        var inject$$1 = getDecoratorDependencies(target);\r\n        inject$$1[index] = All.of(keyValue);\r\n    };\r\n}\r\nfunction optional(checkParentOrTarget) {\r\n    if (checkParentOrTarget === void 0) { checkParentOrTarget = true; }\r\n    var deco = function (checkParent) {\r\n        return function (target, _key, index) {\r\n            var inject$$1 = getDecoratorDependencies(target);\r\n            inject$$1[index] = Optional.of(inject$$1[index], checkParent);\r\n        };\r\n    };\r\n    if (typeof checkParentOrTarget === 'boolean') {\r\n        return deco(checkParentOrTarget);\r\n    }\r\n    return deco(true);\r\n}\r\nfunction parent(target, _key, index) {\r\n    var inject$$1 = getDecoratorDependencies(target);\r\n    inject$$1[index] = Parent.of(inject$$1[index]);\r\n}\r\nfunction factory(keyValue) {\r\n    return function (target, _key, index) {\r\n        var inject$$1 = getDecoratorDependencies(target);\r\n        inject$$1[index] = Factory.of(keyValue);\r\n    };\r\n}\r\nfunction newInstance(asKeyOrTarget) {\r\n    var dynamicDependencies = [];\r\n    for (var _i = 1; _i < arguments.length; _i++) {\r\n        dynamicDependencies[_i - 1] = arguments[_i];\r\n    }\r\n    var deco = function (asKey) {\r\n        return function (target, _key, index) {\r\n            var inject$$1 = getDecoratorDependencies(target);\r\n            inject$$1[index] = NewInstance.of.apply(NewInstance, [inject$$1[index]].concat(dynamicDependencies));\r\n            if (!!asKey) {\r\n                inject$$1[index].as(asKey);\r\n            }\r\n        };\r\n    };\r\n    if (arguments.length >= 1) {\r\n        return deco(asKeyOrTarget);\r\n    }\r\n    return deco();\r\n}\n\nfunction validateKey(key) {\r\n    if (key === null || key === undefined) {\r\n        throw new Error('key/value cannot be null or undefined. Are you trying to inject/register something that doesn\\'t exist with DI?');\r\n    }\r\n}\r\nvar _emptyParameters = Object.freeze([]);\r\naurelia_metadata__WEBPACK_IMPORTED_MODULE_0__[\"metadata\"].registration = 'aurelia:registration';\r\naurelia_metadata__WEBPACK_IMPORTED_MODULE_0__[\"metadata\"].invoker = 'aurelia:invoker';\r\nvar resolverDecorates = resolver.decorates;\r\nvar InvocationHandler = (function () {\r\n    function InvocationHandler(fn, invoker, dependencies) {\r\n        this.fn = fn;\r\n        this.invoker = invoker;\r\n        this.dependencies = dependencies;\r\n    }\r\n    InvocationHandler.prototype.invoke = function (container, dynamicDependencies) {\r\n        return dynamicDependencies !== undefined\r\n            ? this.invoker.invokeWithDynamicDependencies(container, this.fn, this.dependencies, dynamicDependencies)\r\n            : this.invoker.invoke(container, this.fn, this.dependencies);\r\n    };\r\n    return InvocationHandler;\r\n}());\r\nfunction invokeWithDynamicDependencies(container, fn, staticDependencies, dynamicDependencies) {\r\n    var i = staticDependencies.length;\r\n    var args = new Array(i);\r\n    var lookup;\r\n    while (i--) {\r\n        lookup = staticDependencies[i];\r\n        if (lookup === null || lookup === undefined) {\r\n            throw new Error('Constructor Parameter with index ' +\r\n                i +\r\n                ' cannot be null or undefined. Are you trying to inject/register something that doesn\\'t exist with DI?');\r\n        }\r\n        else {\r\n            args[i] = container.get(lookup);\r\n        }\r\n    }\r\n    if (dynamicDependencies !== undefined) {\r\n        args = args.concat(dynamicDependencies);\r\n    }\r\n    return Reflect.construct(fn, args);\r\n}\r\nvar classInvoker = {\r\n    invoke: function (container, Type, deps) {\r\n        var instances = deps.map(function (dep) { return container.get(dep); });\r\n        return Reflect.construct(Type, instances);\r\n    },\r\n    invokeWithDynamicDependencies: invokeWithDynamicDependencies\r\n};\r\nfunction getDependencies(f) {\r\n    if (!f.hasOwnProperty('inject')) {\r\n        return [];\r\n    }\r\n    if (typeof f.inject === 'function') {\r\n        return f.inject();\r\n    }\r\n    return f.inject;\r\n}\r\nvar Container = (function () {\r\n    function Container(configuration) {\r\n        if (configuration === undefined) {\r\n            configuration = {};\r\n        }\r\n        this._configuration = configuration;\r\n        this._onHandlerCreated = configuration.onHandlerCreated;\r\n        this._handlers =\r\n            configuration.handlers || (configuration.handlers = new Map());\r\n        this._resolvers = new Map();\r\n        this.root = this;\r\n        this.parent = null;\r\n    }\r\n    Container.prototype.makeGlobal = function () {\r\n        Container.instance = this;\r\n        return this;\r\n    };\r\n    Container.prototype.setHandlerCreatedCallback = function (onHandlerCreated) {\r\n        this._onHandlerCreated = onHandlerCreated;\r\n        this._configuration.onHandlerCreated = onHandlerCreated;\r\n    };\r\n    Container.prototype.registerInstance = function (key, instance) {\r\n        return this.registerResolver(key, new StrategyResolver(0, instance === undefined ? key : instance));\r\n    };\r\n    Container.prototype.registerSingleton = function (key, fn) {\r\n        return this.registerResolver(key, new StrategyResolver(1, fn === undefined ? key : fn));\r\n    };\r\n    Container.prototype.registerTransient = function (key, fn) {\r\n        return this.registerResolver(key, new StrategyResolver(2, fn === undefined ? key : fn));\r\n    };\r\n    Container.prototype.registerHandler = function (key, handler) {\r\n        return this.registerResolver(key, new StrategyResolver(3, handler));\r\n    };\r\n    Container.prototype.registerAlias = function (originalKey, aliasKey) {\r\n        return this.registerResolver(aliasKey, new StrategyResolver(5, originalKey));\r\n    };\r\n    Container.prototype.registerResolver = function (key, resolver$$1) {\r\n        validateKey(key);\r\n        var allResolvers = this._resolvers;\r\n        var result = allResolvers.get(key);\r\n        if (result === undefined) {\r\n            allResolvers.set(key, resolver$$1);\r\n        }\r\n        else if (result.strategy === 4) {\r\n            result.state.push(resolver$$1);\r\n        }\r\n        else {\r\n            allResolvers.set(key, new StrategyResolver(4, [result, resolver$$1]));\r\n        }\r\n        return resolver$$1;\r\n    };\r\n    Container.prototype.autoRegister = function (key, fn) {\r\n        fn = fn === undefined ? key : fn;\r\n        if (typeof fn === 'function') {\r\n            var registration = aurelia_metadata__WEBPACK_IMPORTED_MODULE_0__[\"metadata\"].get(aurelia_metadata__WEBPACK_IMPORTED_MODULE_0__[\"metadata\"].registration, fn);\r\n            if (registration === undefined) {\r\n                return this.registerResolver(key, new StrategyResolver(1, fn));\r\n            }\r\n            return registration.registerResolver(this, key, fn);\r\n        }\r\n        return this.registerResolver(key, new StrategyResolver(0, fn));\r\n    };\r\n    Container.prototype.autoRegisterAll = function (fns) {\r\n        var i = fns.length;\r\n        while (i--) {\r\n            this.autoRegister(fns[i]);\r\n        }\r\n    };\r\n    Container.prototype.unregister = function (key) {\r\n        this._resolvers.delete(key);\r\n    };\r\n    Container.prototype.hasResolver = function (key, checkParent) {\r\n        if (checkParent === void 0) { checkParent = false; }\r\n        validateKey(key);\r\n        return (this._resolvers.has(key) ||\r\n            (checkParent &&\r\n                this.parent !== null &&\r\n                this.parent.hasResolver(key, checkParent)));\r\n    };\r\n    Container.prototype.getResolver = function (key) {\r\n        return this._resolvers.get(key);\r\n    };\r\n    Container.prototype.get = function (key) {\r\n        validateKey(key);\r\n        if (key === Container) {\r\n            return this;\r\n        }\r\n        if (resolverDecorates(key)) {\r\n            return key.get(this, key);\r\n        }\r\n        var resolver$$1 = this._resolvers.get(key);\r\n        if (resolver$$1 === undefined) {\r\n            if (this.parent === null) {\r\n                return this.autoRegister(key).get(this, key);\r\n            }\r\n            var registration = aurelia_metadata__WEBPACK_IMPORTED_MODULE_0__[\"metadata\"].get(aurelia_metadata__WEBPACK_IMPORTED_MODULE_0__[\"metadata\"].registration, key);\r\n            if (registration === undefined) {\r\n                return this.parent._get(key);\r\n            }\r\n            return registration.registerResolver(this, key, key).get(this, key);\r\n        }\r\n        return resolver$$1.get(this, key);\r\n    };\r\n    Container.prototype._get = function (key) {\r\n        var resolver$$1 = this._resolvers.get(key);\r\n        if (resolver$$1 === undefined) {\r\n            if (this.parent === null) {\r\n                return this.autoRegister(key).get(this, key);\r\n            }\r\n            return this.parent._get(key);\r\n        }\r\n        return resolver$$1.get(this, key);\r\n    };\r\n    Container.prototype.getAll = function (key) {\r\n        validateKey(key);\r\n        var resolver$$1 = this._resolvers.get(key);\r\n        if (resolver$$1 === undefined) {\r\n            if (this.parent === null) {\r\n                return _emptyParameters;\r\n            }\r\n            return this.parent.getAll(key);\r\n        }\r\n        if (resolver$$1.strategy === 4) {\r\n            var state = resolver$$1.state;\r\n            var i = state.length;\r\n            var results = new Array(i);\r\n            while (i--) {\r\n                results[i] = state[i].get(this, key);\r\n            }\r\n            return results;\r\n        }\r\n        return [resolver$$1.get(this, key)];\r\n    };\r\n    Container.prototype.createChild = function () {\r\n        var child = new Container(this._configuration);\r\n        child.root = this.root;\r\n        child.parent = this;\r\n        return child;\r\n    };\r\n    Container.prototype.invoke = function (fn, dynamicDependencies) {\r\n        try {\r\n            var handler = this._handlers.get(fn);\r\n            if (handler === undefined) {\r\n                handler = this._createInvocationHandler(fn);\r\n                this._handlers.set(fn, handler);\r\n            }\r\n            return handler.invoke(this, dynamicDependencies);\r\n        }\r\n        catch (e) {\r\n            throw new aurelia_pal__WEBPACK_IMPORTED_MODULE_1__[\"AggregateError\"](\"Error invoking \" + fn.name + \". Check the inner error for details.\", e, true);\r\n        }\r\n    };\r\n    Container.prototype._createInvocationHandler = function (fn) {\r\n        var dependencies;\r\n        if (fn.inject === undefined) {\r\n            dependencies =\r\n                aurelia_metadata__WEBPACK_IMPORTED_MODULE_0__[\"metadata\"].getOwn(aurelia_metadata__WEBPACK_IMPORTED_MODULE_0__[\"metadata\"].paramTypes, fn) || _emptyParameters;\r\n        }\r\n        else {\r\n            dependencies = [];\r\n            var ctor = fn;\r\n            while (typeof ctor === 'function') {\r\n                dependencies.push.apply(dependencies, getDependencies(ctor));\r\n                ctor = Object.getPrototypeOf(ctor);\r\n            }\r\n        }\r\n        var invoker = aurelia_metadata__WEBPACK_IMPORTED_MODULE_0__[\"metadata\"].getOwn(aurelia_metadata__WEBPACK_IMPORTED_MODULE_0__[\"metadata\"].invoker, fn) || classInvoker;\r\n        var handler = new InvocationHandler(fn, invoker, dependencies);\r\n        return this._onHandlerCreated !== undefined\r\n            ? this._onHandlerCreated(handler)\r\n            : handler;\r\n    };\r\n    return Container;\r\n}());\n\nfunction invoker(value) {\r\n    return function (target) {\r\n        aurelia_metadata__WEBPACK_IMPORTED_MODULE_0__[\"metadata\"].define(aurelia_metadata__WEBPACK_IMPORTED_MODULE_0__[\"metadata\"].invoker, value, target);\r\n    };\r\n}\r\nfunction invokeAsFactory(potentialTarget) {\r\n    var deco = function (target) {\r\n        aurelia_metadata__WEBPACK_IMPORTED_MODULE_0__[\"metadata\"].define(aurelia_metadata__WEBPACK_IMPORTED_MODULE_0__[\"metadata\"].invoker, FactoryInvoker.instance, target);\r\n    };\r\n    return potentialTarget ? deco(potentialTarget) : deco;\r\n}\r\nvar FactoryInvoker = (function () {\r\n    function FactoryInvoker() {\r\n    }\r\n    FactoryInvoker.prototype.invoke = function (container, fn, dependencies) {\r\n        var i = dependencies.length;\r\n        var args = new Array(i);\r\n        while (i--) {\r\n            args[i] = container.get(dependencies[i]);\r\n        }\r\n        return fn.apply(undefined, args);\r\n    };\r\n    FactoryInvoker.prototype.invokeWithDynamicDependencies = function (container, fn, staticDependencies, dynamicDependencies) {\r\n        var i = staticDependencies.length;\r\n        var args = new Array(i);\r\n        while (i--) {\r\n            args[i] = container.get(staticDependencies[i]);\r\n        }\r\n        if (dynamicDependencies !== undefined) {\r\n            args = args.concat(dynamicDependencies);\r\n        }\r\n        return fn.apply(undefined, args);\r\n    };\r\n    return FactoryInvoker;\r\n}());\r\nFactoryInvoker.instance = new FactoryInvoker();\n\nfunction registration(value) {\r\n    return function (target) {\r\n        aurelia_metadata__WEBPACK_IMPORTED_MODULE_0__[\"metadata\"].define(aurelia_metadata__WEBPACK_IMPORTED_MODULE_0__[\"metadata\"].registration, value, target);\r\n    };\r\n}\r\nfunction transient(key) {\r\n    return registration(new TransientRegistration(key));\r\n}\r\nfunction singleton(keyOrRegisterInChild, registerInChild) {\r\n    if (registerInChild === void 0) { registerInChild = false; }\r\n    return registration(new SingletonRegistration(keyOrRegisterInChild, registerInChild));\r\n}\r\nvar TransientRegistration = (function () {\r\n    function TransientRegistration(key) {\r\n        this._key = key;\r\n    }\r\n    TransientRegistration.prototype.registerResolver = function (container, key, fn) {\r\n        var existingResolver = container.getResolver(this._key || key);\r\n        return existingResolver === undefined\r\n            ? container.registerTransient((this._key || key), fn)\r\n            : existingResolver;\r\n    };\r\n    return TransientRegistration;\r\n}());\r\nvar SingletonRegistration = (function () {\r\n    function SingletonRegistration(keyOrRegisterInChild, registerInChild) {\r\n        if (registerInChild === void 0) { registerInChild = false; }\r\n        if (typeof keyOrRegisterInChild === 'boolean') {\r\n            this._registerInChild = keyOrRegisterInChild;\r\n        }\r\n        else {\r\n            this._key = keyOrRegisterInChild;\r\n            this._registerInChild = registerInChild;\r\n        }\r\n    }\r\n    SingletonRegistration.prototype.registerResolver = function (container, key, fn) {\r\n        var targetContainer = this._registerInChild ? container : container.root;\r\n        var existingResolver = targetContainer.getResolver(this._key || key);\r\n        return existingResolver === undefined\r\n            ? targetContainer.registerSingleton(this._key || key, fn)\r\n            : existingResolver;\r\n    };\r\n    return SingletonRegistration;\r\n}());\n\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiM1U4bi5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9hdXJlbGlhLWRlcGVuZGVuY3ktaW5qZWN0aW9uL2Rpc3QvbmF0aXZlLW1vZHVsZXMvYXVyZWxpYS1kZXBlbmRlbmN5LWluamVjdGlvbi5qcz9kZDRmIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IG1ldGFkYXRhLCBwcm90b2NvbCB9IGZyb20gJ2F1cmVsaWEtbWV0YWRhdGEnO1xuaW1wb3J0IHsgQWdncmVnYXRlRXJyb3IgfSBmcm9tICdhdXJlbGlhLXBhbCc7XG5cbi8qISAqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKlxyXG5Db3B5cmlnaHQgKGMpIE1pY3Jvc29mdCBDb3Jwb3JhdGlvbi4gQWxsIHJpZ2h0cyByZXNlcnZlZC5cclxuTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTsgeW91IG1heSBub3QgdXNlXHJcbnRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlXHJcbkxpY2Vuc2UgYXQgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcblxyXG5USElTIENPREUgSVMgUFJPVklERUQgT04gQU4gKkFTIElTKiBCQVNJUywgV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZXHJcbktJTkQsIEVJVEhFUiBFWFBSRVNTIE9SIElNUExJRUQsIElOQ0xVRElORyBXSVRIT1VUIExJTUlUQVRJT04gQU5ZIElNUExJRURcclxuV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIFRJVExFLCBGSVRORVNTIEZPUiBBIFBBUlRJQ1VMQVIgUFVSUE9TRSxcclxuTUVSQ0hBTlRBQkxJVFkgT1IgTk9OLUlORlJJTkdFTUVOVC5cclxuXHJcblNlZSB0aGUgQXBhY2hlIFZlcnNpb24gMi4wIExpY2Vuc2UgZm9yIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9uc1xyXG5hbmQgbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqICovXHJcblxyXG5mdW5jdGlvbiBfX2RlY29yYXRlKGRlY29yYXRvcnMsIHRhcmdldCwga2V5LCBkZXNjKSB7XHJcbiAgICB2YXIgYyA9IGFyZ3VtZW50cy5sZW5ndGgsIHIgPSBjIDwgMyA/IHRhcmdldCA6IGRlc2MgPT09IG51bGwgPyBkZXNjID0gT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcih0YXJnZXQsIGtleSkgOiBkZXNjLCBkO1xyXG4gICAgaWYgKHR5cGVvZiBSZWZsZWN0ID09PSBcIm9iamVjdFwiICYmIHR5cGVvZiBSZWZsZWN0LmRlY29yYXRlID09PSBcImZ1bmN0aW9uXCIpIHIgPSBSZWZsZWN0LmRlY29yYXRlKGRlY29yYXRvcnMsIHRhcmdldCwga2V5LCBkZXNjKTtcclxuICAgIGVsc2UgZm9yICh2YXIgaSA9IGRlY29yYXRvcnMubGVuZ3RoIC0gMTsgaSA+PSAwOyBpLS0pIGlmIChkID0gZGVjb3JhdG9yc1tpXSkgciA9IChjIDwgMyA/IGQocikgOiBjID4gMyA/IGQodGFyZ2V0LCBrZXksIHIpIDogZCh0YXJnZXQsIGtleSkpIHx8IHI7XHJcbiAgICByZXR1cm4gYyA+IDMgJiYgciAmJiBPYmplY3QuZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBrZXksIHIpLCByO1xyXG59XHJcblxyXG5mdW5jdGlvbiBfX21ldGFkYXRhKG1ldGFkYXRhS2V5LCBtZXRhZGF0YVZhbHVlKSB7XHJcbiAgICBpZiAodHlwZW9mIFJlZmxlY3QgPT09IFwib2JqZWN0XCIgJiYgdHlwZW9mIFJlZmxlY3QubWV0YWRhdGEgPT09IFwiZnVuY3Rpb25cIikgcmV0dXJuIFJlZmxlY3QubWV0YWRhdGEobWV0YWRhdGFLZXksIG1ldGFkYXRhVmFsdWUpO1xyXG59XG5cbmZ1bmN0aW9uIGlzSW5qZWN0YWJsZShwb3RlbnRpYWxUYXJnZXQpIHtcclxuICAgIHJldHVybiAhIXBvdGVudGlhbFRhcmdldDtcclxufVxyXG5mdW5jdGlvbiBhdXRvaW5qZWN0KHBvdGVudGlhbFRhcmdldCkge1xyXG4gICAgdmFyIGRlY28gPSBmdW5jdGlvbiAodGFyZ2V0KSB7XHJcbiAgICAgICAgaWYgKCF0YXJnZXQuaGFzT3duUHJvcGVydHkoJ2luamVjdCcpKSB7XHJcbiAgICAgICAgICAgIHRhcmdldC5pbmplY3QgPSAobWV0YWRhdGEuZ2V0T3duKG1ldGFkYXRhLnBhcmFtVHlwZXMsIHRhcmdldCkgfHxcclxuICAgICAgICAgICAgICAgIF9lbXB0eVBhcmFtZXRlcnMpLnNsaWNlKCk7XHJcbiAgICAgICAgICAgIGlmICh0YXJnZXQuaW5qZWN0ICYmIHRhcmdldC5pbmplY3QubGVuZ3RoID4gMCkge1xyXG4gICAgICAgICAgICAgICAgaWYgKHRhcmdldC5pbmplY3RbdGFyZ2V0LmluamVjdC5sZW5ndGggLSAxXSA9PT0gT2JqZWN0KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGFyZ2V0LmluamVjdC5zcGxpY2UoLTEsIDEpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuICAgIGlmIChpc0luamVjdGFibGUocG90ZW50aWFsVGFyZ2V0KSkge1xyXG4gICAgICAgIHJldHVybiBkZWNvKHBvdGVudGlhbFRhcmdldCk7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gZGVjbztcclxufVxyXG5mdW5jdGlvbiBpbmplY3QoKSB7XHJcbiAgICB2YXIgcmVzdCA9IFtdO1xyXG4gICAgZm9yICh2YXIgX2kgPSAwOyBfaSA8IGFyZ3VtZW50cy5sZW5ndGg7IF9pKyspIHtcclxuICAgICAgICByZXN0W19pXSA9IGFyZ3VtZW50c1tfaV07XHJcbiAgICB9XHJcbiAgICByZXR1cm4gZnVuY3Rpb24gKHRhcmdldCwgX2tleSwgZGVzY3JpcHRvcikge1xyXG4gICAgICAgIGlmICh0eXBlb2YgZGVzY3JpcHRvciA9PT0gJ251bWJlcicpIHtcclxuICAgICAgICAgICAgYXV0b2luamVjdCh0YXJnZXQpO1xyXG4gICAgICAgICAgICBpZiAocmVzdC5sZW5ndGggPT09IDEpIHtcclxuICAgICAgICAgICAgICAgIHRhcmdldC5pbmplY3RbZGVzY3JpcHRvcl0gPSByZXN0WzBdO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKGRlc2NyaXB0b3IpIHtcclxuICAgICAgICAgICAgdmFyIGZuID0gZGVzY3JpcHRvci52YWx1ZTtcclxuICAgICAgICAgICAgZm4uaW5qZWN0ID0gcmVzdDtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIHRhcmdldC5pbmplY3QgPSByZXN0O1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcbn1cblxudmFyIHJlc29sdmVyID0gcHJvdG9jb2wuY3JlYXRlKCdhdXJlbGlhOnJlc29sdmVyJywgZnVuY3Rpb24gKHRhcmdldCkge1xyXG4gICAgaWYgKCEodHlwZW9mIHRhcmdldC5nZXQgPT09ICdmdW5jdGlvbicpKSB7XHJcbiAgICAgICAgcmV0dXJuICdSZXNvbHZlcnMgbXVzdCBpbXBsZW1lbnQ6IGdldChjb250YWluZXI6IENvbnRhaW5lciwga2V5OiBhbnkpOiBhbnknO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIHRydWU7XHJcbn0pO1xyXG52YXIgU3RyYXRlZ3k7XHJcbihmdW5jdGlvbiAoU3RyYXRlZ3kpIHtcclxuICAgIFN0cmF0ZWd5W1N0cmF0ZWd5W1wiaW5zdGFuY2VcIl0gPSAwXSA9IFwiaW5zdGFuY2VcIjtcclxuICAgIFN0cmF0ZWd5W1N0cmF0ZWd5W1wic2luZ2xldG9uXCJdID0gMV0gPSBcInNpbmdsZXRvblwiO1xyXG4gICAgU3RyYXRlZ3lbU3RyYXRlZ3lbXCJ0cmFuc2llbnRcIl0gPSAyXSA9IFwidHJhbnNpZW50XCI7XHJcbiAgICBTdHJhdGVneVtTdHJhdGVneVtcImZ1bmN0aW9uXCJdID0gM10gPSBcImZ1bmN0aW9uXCI7XHJcbiAgICBTdHJhdGVneVtTdHJhdGVneVtcImFycmF5XCJdID0gNF0gPSBcImFycmF5XCI7XHJcbiAgICBTdHJhdGVneVtTdHJhdGVneVtcImFsaWFzXCJdID0gNV0gPSBcImFsaWFzXCI7XHJcbn0pKFN0cmF0ZWd5IHx8IChTdHJhdGVneSA9IHt9KSk7XHJcbmZ1bmN0aW9uIGlzU3RyYXRlZ3koYWN0dWFsLCBleHBlY3RlZCwgc3RhdGUpIHtcclxuICAgIHJldHVybiBhY3R1YWwgPT09IGV4cGVjdGVkO1xyXG59XHJcbnZhciBTdHJhdGVneVJlc29sdmVyID0gKGZ1bmN0aW9uICgpIHtcclxuICAgIGZ1bmN0aW9uIFN0cmF0ZWd5UmVzb2x2ZXIoc3RyYXRlZ3ksIHN0YXRlKSB7XHJcbiAgICAgICAgdGhpcy5zdHJhdGVneSA9IHN0cmF0ZWd5O1xyXG4gICAgICAgIHRoaXMuc3RhdGUgPSBzdGF0ZTtcclxuICAgIH1cclxuICAgIFN0cmF0ZWd5UmVzb2x2ZXIucHJvdG90eXBlLmdldCA9IGZ1bmN0aW9uIChjb250YWluZXIsIGtleSkge1xyXG4gICAgICAgIGlmIChpc1N0cmF0ZWd5KHRoaXMuc3RyYXRlZ3ksIFN0cmF0ZWd5Lmluc3RhbmNlLCB0aGlzLnN0YXRlKSkge1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5zdGF0ZTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKGlzU3RyYXRlZ3kodGhpcy5zdHJhdGVneSwgU3RyYXRlZ3kuc2luZ2xldG9uLCB0aGlzLnN0YXRlKSkge1xyXG4gICAgICAgICAgICB2YXIgc2luZ2xldG9uID0gY29udGFpbmVyLmludm9rZSh0aGlzLnN0YXRlKTtcclxuICAgICAgICAgICAgdGhpcy5zdGF0ZSA9IHNpbmdsZXRvbjtcclxuICAgICAgICAgICAgdGhpcy5zdHJhdGVneSA9IDA7XHJcbiAgICAgICAgICAgIHJldHVybiBzaW5nbGV0b247XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmIChpc1N0cmF0ZWd5KHRoaXMuc3RyYXRlZ3ksIFN0cmF0ZWd5LnRyYW5zaWVudCwgdGhpcy5zdGF0ZSkpIHtcclxuICAgICAgICAgICAgcmV0dXJuIGNvbnRhaW5lci5pbnZva2UodGhpcy5zdGF0ZSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmIChpc1N0cmF0ZWd5KHRoaXMuc3RyYXRlZ3ksIFN0cmF0ZWd5LmZ1bmN0aW9uLCB0aGlzLnN0YXRlKSkge1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5zdGF0ZShjb250YWluZXIsIGtleSwgdGhpcyk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmIChpc1N0cmF0ZWd5KHRoaXMuc3RyYXRlZ3ksIFN0cmF0ZWd5LmFycmF5LCB0aGlzLnN0YXRlKSkge1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5zdGF0ZVswXS5nZXQoY29udGFpbmVyLCBrZXkpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAoaXNTdHJhdGVneSh0aGlzLnN0cmF0ZWd5LCBTdHJhdGVneS5hbGlhcywgdGhpcy5zdGF0ZSkpIHtcclxuICAgICAgICAgICAgcmV0dXJuIGNvbnRhaW5lci5nZXQodGhpcy5zdGF0ZSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRocm93IG5ldyBFcnJvcignSW52YWxpZCBzdHJhdGVneTogJyArIHRoaXMuc3RyYXRlZ3kpO1xyXG4gICAgfTtcclxuICAgIFN0cmF0ZWd5UmVzb2x2ZXIgPSBfX2RlY29yYXRlKFtcclxuICAgICAgICByZXNvbHZlcigpLFxyXG4gICAgICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246cGFyYW10eXBlc1wiLCBbTnVtYmVyLCBPYmplY3RdKVxyXG4gICAgXSwgU3RyYXRlZ3lSZXNvbHZlcik7XHJcbiAgICByZXR1cm4gU3RyYXRlZ3lSZXNvbHZlcjtcclxufSgpKTtcclxudmFyIExhenkgPSAoZnVuY3Rpb24gKCkge1xyXG4gICAgZnVuY3Rpb24gTGF6eShrZXkpIHtcclxuICAgICAgICB0aGlzLl9rZXkgPSBrZXk7XHJcbiAgICB9XHJcbiAgICBMYXp5XzEgPSBMYXp5O1xyXG4gICAgTGF6eS5wcm90b3R5cGUuZ2V0ID0gZnVuY3Rpb24gKGNvbnRhaW5lcikge1xyXG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XHJcbiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uICgpIHsgcmV0dXJuIGNvbnRhaW5lci5nZXQoX3RoaXMuX2tleSk7IH07XHJcbiAgICB9O1xyXG4gICAgTGF6eS5vZiA9IGZ1bmN0aW9uIChrZXkpIHtcclxuICAgICAgICByZXR1cm4gbmV3IExhenlfMShrZXkpO1xyXG4gICAgfTtcclxuICAgIHZhciBMYXp5XzE7XHJcbiAgICBMYXp5ID0gTGF6eV8xID0gX19kZWNvcmF0ZShbXHJcbiAgICAgICAgcmVzb2x2ZXIoKSxcclxuICAgICAgICBfX21ldGFkYXRhKFwiZGVzaWduOnBhcmFtdHlwZXNcIiwgW09iamVjdF0pXHJcbiAgICBdLCBMYXp5KTtcclxuICAgIHJldHVybiBMYXp5O1xyXG59KCkpO1xyXG52YXIgQWxsID0gKGZ1bmN0aW9uICgpIHtcclxuICAgIGZ1bmN0aW9uIEFsbChrZXkpIHtcclxuICAgICAgICB0aGlzLl9rZXkgPSBrZXk7XHJcbiAgICB9XHJcbiAgICBBbGxfMSA9IEFsbDtcclxuICAgIEFsbC5wcm90b3R5cGUuZ2V0ID0gZnVuY3Rpb24gKGNvbnRhaW5lcikge1xyXG4gICAgICAgIHJldHVybiBjb250YWluZXIuZ2V0QWxsKHRoaXMuX2tleSk7XHJcbiAgICB9O1xyXG4gICAgQWxsLm9mID0gZnVuY3Rpb24gKGtleSkge1xyXG4gICAgICAgIHJldHVybiBuZXcgQWxsXzEoa2V5KTtcclxuICAgIH07XHJcbiAgICB2YXIgQWxsXzE7XHJcbiAgICBBbGwgPSBBbGxfMSA9IF9fZGVjb3JhdGUoW1xyXG4gICAgICAgIHJlc29sdmVyKCksXHJcbiAgICAgICAgX19tZXRhZGF0YShcImRlc2lnbjpwYXJhbXR5cGVzXCIsIFtPYmplY3RdKVxyXG4gICAgXSwgQWxsKTtcclxuICAgIHJldHVybiBBbGw7XHJcbn0oKSk7XHJcbnZhciBPcHRpb25hbCA9IChmdW5jdGlvbiAoKSB7XHJcbiAgICBmdW5jdGlvbiBPcHRpb25hbChrZXksIGNoZWNrUGFyZW50KSB7XHJcbiAgICAgICAgaWYgKGNoZWNrUGFyZW50ID09PSB2b2lkIDApIHsgY2hlY2tQYXJlbnQgPSB0cnVlOyB9XHJcbiAgICAgICAgdGhpcy5fa2V5ID0ga2V5O1xyXG4gICAgICAgIHRoaXMuX2NoZWNrUGFyZW50ID0gY2hlY2tQYXJlbnQ7XHJcbiAgICB9XHJcbiAgICBPcHRpb25hbF8xID0gT3B0aW9uYWw7XHJcbiAgICBPcHRpb25hbC5wcm90b3R5cGUuZ2V0ID0gZnVuY3Rpb24gKGNvbnRhaW5lcikge1xyXG4gICAgICAgIGlmIChjb250YWluZXIuaGFzUmVzb2x2ZXIodGhpcy5fa2V5LCB0aGlzLl9jaGVja1BhcmVudCkpIHtcclxuICAgICAgICAgICAgcmV0dXJuIGNvbnRhaW5lci5nZXQodGhpcy5fa2V5KTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICB9O1xyXG4gICAgT3B0aW9uYWwub2YgPSBmdW5jdGlvbiAoa2V5LCBjaGVja1BhcmVudCkge1xyXG4gICAgICAgIGlmIChjaGVja1BhcmVudCA9PT0gdm9pZCAwKSB7IGNoZWNrUGFyZW50ID0gdHJ1ZTsgfVxyXG4gICAgICAgIHJldHVybiBuZXcgT3B0aW9uYWxfMShrZXksIGNoZWNrUGFyZW50KTtcclxuICAgIH07XHJcbiAgICB2YXIgT3B0aW9uYWxfMTtcclxuICAgIE9wdGlvbmFsID0gT3B0aW9uYWxfMSA9IF9fZGVjb3JhdGUoW1xyXG4gICAgICAgIHJlc29sdmVyKCksXHJcbiAgICAgICAgX19tZXRhZGF0YShcImRlc2lnbjpwYXJhbXR5cGVzXCIsIFtPYmplY3QsIEJvb2xlYW5dKVxyXG4gICAgXSwgT3B0aW9uYWwpO1xyXG4gICAgcmV0dXJuIE9wdGlvbmFsO1xyXG59KCkpO1xyXG52YXIgUGFyZW50ID0gKGZ1bmN0aW9uICgpIHtcclxuICAgIGZ1bmN0aW9uIFBhcmVudChrZXkpIHtcclxuICAgICAgICB0aGlzLl9rZXkgPSBrZXk7XHJcbiAgICB9XHJcbiAgICBQYXJlbnRfMSA9IFBhcmVudDtcclxuICAgIFBhcmVudC5wcm90b3R5cGUuZ2V0ID0gZnVuY3Rpb24gKGNvbnRhaW5lcikge1xyXG4gICAgICAgIHJldHVybiBjb250YWluZXIucGFyZW50ID8gY29udGFpbmVyLnBhcmVudC5nZXQodGhpcy5fa2V5KSA6IG51bGw7XHJcbiAgICB9O1xyXG4gICAgUGFyZW50Lm9mID0gZnVuY3Rpb24gKGtleSkge1xyXG4gICAgICAgIHJldHVybiBuZXcgUGFyZW50XzEoa2V5KTtcclxuICAgIH07XHJcbiAgICB2YXIgUGFyZW50XzE7XHJcbiAgICBQYXJlbnQgPSBQYXJlbnRfMSA9IF9fZGVjb3JhdGUoW1xyXG4gICAgICAgIHJlc29sdmVyKCksXHJcbiAgICAgICAgX19tZXRhZGF0YShcImRlc2lnbjpwYXJhbXR5cGVzXCIsIFtPYmplY3RdKVxyXG4gICAgXSwgUGFyZW50KTtcclxuICAgIHJldHVybiBQYXJlbnQ7XHJcbn0oKSk7XHJcbnZhciBGYWN0b3J5ID0gKGZ1bmN0aW9uICgpIHtcclxuICAgIGZ1bmN0aW9uIEZhY3Rvcnkoa2V5KSB7XHJcbiAgICAgICAgdGhpcy5fa2V5ID0ga2V5O1xyXG4gICAgfVxyXG4gICAgRmFjdG9yeV8xID0gRmFjdG9yeTtcclxuICAgIEZhY3RvcnkucHJvdG90eXBlLmdldCA9IGZ1bmN0aW9uIChjb250YWluZXIpIHtcclxuICAgICAgICB2YXIgZm4gPSB0aGlzLl9rZXk7XHJcbiAgICAgICAgdmFyIHJlc29sdmVyID0gY29udGFpbmVyLmdldFJlc29sdmVyKGZuKTtcclxuICAgICAgICBpZiAocmVzb2x2ZXIgJiYgcmVzb2x2ZXIuc3RyYXRlZ3kgPT09IFN0cmF0ZWd5LmZ1bmN0aW9uKSB7XHJcbiAgICAgICAgICAgIGZuID0gcmVzb2x2ZXIuc3RhdGU7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHZhciByZXN0ID0gW107XHJcbiAgICAgICAgICAgIGZvciAodmFyIF9pID0gMDsgX2kgPCBhcmd1bWVudHMubGVuZ3RoOyBfaSsrKSB7XHJcbiAgICAgICAgICAgICAgICByZXN0W19pXSA9IGFyZ3VtZW50c1tfaV07XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgcmV0dXJuIGNvbnRhaW5lci5pbnZva2UoZm4sIHJlc3QpO1xyXG4gICAgICAgIH07XHJcbiAgICB9O1xyXG4gICAgRmFjdG9yeS5vZiA9IGZ1bmN0aW9uIChrZXkpIHtcclxuICAgICAgICByZXR1cm4gbmV3IEZhY3RvcnlfMShrZXkpO1xyXG4gICAgfTtcclxuICAgIHZhciBGYWN0b3J5XzE7XHJcbiAgICBGYWN0b3J5ID0gRmFjdG9yeV8xID0gX19kZWNvcmF0ZShbXHJcbiAgICAgICAgcmVzb2x2ZXIoKSxcclxuICAgICAgICBfX21ldGFkYXRhKFwiZGVzaWduOnBhcmFtdHlwZXNcIiwgW09iamVjdF0pXHJcbiAgICBdLCBGYWN0b3J5KTtcclxuICAgIHJldHVybiBGYWN0b3J5O1xyXG59KCkpO1xyXG52YXIgTmV3SW5zdGFuY2UgPSAoZnVuY3Rpb24gKCkge1xyXG4gICAgZnVuY3Rpb24gTmV3SW5zdGFuY2Uoa2V5KSB7XHJcbiAgICAgICAgdmFyIGR5bmFtaWNEZXBlbmRlbmNpZXMgPSBbXTtcclxuICAgICAgICBmb3IgKHZhciBfaSA9IDE7IF9pIDwgYXJndW1lbnRzLmxlbmd0aDsgX2krKykge1xyXG4gICAgICAgICAgICBkeW5hbWljRGVwZW5kZW5jaWVzW19pIC0gMV0gPSBhcmd1bWVudHNbX2ldO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLmtleSA9IGtleTtcclxuICAgICAgICB0aGlzLmFzS2V5ID0ga2V5O1xyXG4gICAgICAgIHRoaXMuZHluYW1pY0RlcGVuZGVuY2llcyA9IGR5bmFtaWNEZXBlbmRlbmNpZXM7XHJcbiAgICB9XHJcbiAgICBOZXdJbnN0YW5jZV8xID0gTmV3SW5zdGFuY2U7XHJcbiAgICBOZXdJbnN0YW5jZS5wcm90b3R5cGUuZ2V0ID0gZnVuY3Rpb24gKGNvbnRhaW5lcikge1xyXG4gICAgICAgIHZhciBkeW5hbWljRGVwZW5kZW5jaWVzID0gdGhpcy5keW5hbWljRGVwZW5kZW5jaWVzLmxlbmd0aCA+IDBcclxuICAgICAgICAgICAgPyB0aGlzLmR5bmFtaWNEZXBlbmRlbmNpZXMubWFwKGZ1bmN0aW9uIChkZXBlbmRlbmN5KSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gZGVwZW5kZW5jeVsncHJvdG9jb2w6YXVyZWxpYTpyZXNvbHZlciddXHJcbiAgICAgICAgICAgICAgICAgICAgPyBkZXBlbmRlbmN5LmdldChjb250YWluZXIpXHJcbiAgICAgICAgICAgICAgICAgICAgOiBjb250YWluZXIuZ2V0KGRlcGVuZGVuY3kpO1xyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICA6IHVuZGVmaW5lZDtcclxuICAgICAgICB2YXIgZm4gPSB0aGlzLmtleTtcclxuICAgICAgICB2YXIgcmVzb2x2ZXIgPSBjb250YWluZXIuZ2V0UmVzb2x2ZXIoZm4pO1xyXG4gICAgICAgIGlmIChyZXNvbHZlciAmJiByZXNvbHZlci5zdHJhdGVneSA9PT0gMykge1xyXG4gICAgICAgICAgICBmbiA9IHJlc29sdmVyLnN0YXRlO1xyXG4gICAgICAgIH1cclxuICAgICAgICB2YXIgaW5zdGFuY2UgPSBjb250YWluZXIuaW52b2tlKGZuLCBkeW5hbWljRGVwZW5kZW5jaWVzKTtcclxuICAgICAgICBjb250YWluZXIucmVnaXN0ZXJJbnN0YW5jZSh0aGlzLmFzS2V5LCBpbnN0YW5jZSk7XHJcbiAgICAgICAgcmV0dXJuIGluc3RhbmNlO1xyXG4gICAgfTtcclxuICAgIE5ld0luc3RhbmNlLnByb3RvdHlwZS5hcyA9IGZ1bmN0aW9uIChrZXkpIHtcclxuICAgICAgICB0aGlzLmFzS2V5ID0ga2V5O1xyXG4gICAgICAgIHJldHVybiB0aGlzO1xyXG4gICAgfTtcclxuICAgIE5ld0luc3RhbmNlLm9mID0gZnVuY3Rpb24gKGtleSkge1xyXG4gICAgICAgIHZhciBkeW5hbWljRGVwZW5kZW5jaWVzID0gW107XHJcbiAgICAgICAgZm9yICh2YXIgX2kgPSAxOyBfaSA8IGFyZ3VtZW50cy5sZW5ndGg7IF9pKyspIHtcclxuICAgICAgICAgICAgZHluYW1pY0RlcGVuZGVuY2llc1tfaSAtIDFdID0gYXJndW1lbnRzW19pXTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIG5ldyAoTmV3SW5zdGFuY2VfMS5iaW5kLmFwcGx5KE5ld0luc3RhbmNlXzEsIFt2b2lkIDAsIGtleV0uY29uY2F0KGR5bmFtaWNEZXBlbmRlbmNpZXMpKSkoKTtcclxuICAgIH07XHJcbiAgICB2YXIgTmV3SW5zdGFuY2VfMTtcclxuICAgIE5ld0luc3RhbmNlID0gTmV3SW5zdGFuY2VfMSA9IF9fZGVjb3JhdGUoW1xyXG4gICAgICAgIHJlc29sdmVyKCksXHJcbiAgICAgICAgX19tZXRhZGF0YShcImRlc2lnbjpwYXJhbXR5cGVzXCIsIFtPYmplY3QsIE9iamVjdF0pXHJcbiAgICBdLCBOZXdJbnN0YW5jZSk7XHJcbiAgICByZXR1cm4gTmV3SW5zdGFuY2U7XHJcbn0oKSk7XHJcbmZ1bmN0aW9uIGdldERlY29yYXRvckRlcGVuZGVuY2llcyh0YXJnZXQpIHtcclxuICAgIGF1dG9pbmplY3QodGFyZ2V0KTtcclxuICAgIHJldHVybiB0YXJnZXQuaW5qZWN0O1xyXG59XHJcbmZ1bmN0aW9uIGxhenkoa2V5VmFsdWUpIHtcclxuICAgIHJldHVybiBmdW5jdGlvbiAodGFyZ2V0LCBfa2V5LCBpbmRleCkge1xyXG4gICAgICAgIHZhciBpbmplY3QkJDEgPSBnZXREZWNvcmF0b3JEZXBlbmRlbmNpZXModGFyZ2V0KTtcclxuICAgICAgICBpbmplY3QkJDFbaW5kZXhdID0gTGF6eS5vZihrZXlWYWx1ZSk7XHJcbiAgICB9O1xyXG59XHJcbmZ1bmN0aW9uIGFsbChrZXlWYWx1ZSkge1xyXG4gICAgcmV0dXJuIGZ1bmN0aW9uICh0YXJnZXQsIF9rZXksIGluZGV4KSB7XHJcbiAgICAgICAgdmFyIGluamVjdCQkMSA9IGdldERlY29yYXRvckRlcGVuZGVuY2llcyh0YXJnZXQpO1xyXG4gICAgICAgIGluamVjdCQkMVtpbmRleF0gPSBBbGwub2Yoa2V5VmFsdWUpO1xyXG4gICAgfTtcclxufVxyXG5mdW5jdGlvbiBvcHRpb25hbChjaGVja1BhcmVudE9yVGFyZ2V0KSB7XHJcbiAgICBpZiAoY2hlY2tQYXJlbnRPclRhcmdldCA9PT0gdm9pZCAwKSB7IGNoZWNrUGFyZW50T3JUYXJnZXQgPSB0cnVlOyB9XHJcbiAgICB2YXIgZGVjbyA9IGZ1bmN0aW9uIChjaGVja1BhcmVudCkge1xyXG4gICAgICAgIHJldHVybiBmdW5jdGlvbiAodGFyZ2V0LCBfa2V5LCBpbmRleCkge1xyXG4gICAgICAgICAgICB2YXIgaW5qZWN0JCQxID0gZ2V0RGVjb3JhdG9yRGVwZW5kZW5jaWVzKHRhcmdldCk7XHJcbiAgICAgICAgICAgIGluamVjdCQkMVtpbmRleF0gPSBPcHRpb25hbC5vZihpbmplY3QkJDFbaW5kZXhdLCBjaGVja1BhcmVudCk7XHJcbiAgICAgICAgfTtcclxuICAgIH07XHJcbiAgICBpZiAodHlwZW9mIGNoZWNrUGFyZW50T3JUYXJnZXQgPT09ICdib29sZWFuJykge1xyXG4gICAgICAgIHJldHVybiBkZWNvKGNoZWNrUGFyZW50T3JUYXJnZXQpO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIGRlY28odHJ1ZSk7XHJcbn1cclxuZnVuY3Rpb24gcGFyZW50KHRhcmdldCwgX2tleSwgaW5kZXgpIHtcclxuICAgIHZhciBpbmplY3QkJDEgPSBnZXREZWNvcmF0b3JEZXBlbmRlbmNpZXModGFyZ2V0KTtcclxuICAgIGluamVjdCQkMVtpbmRleF0gPSBQYXJlbnQub2YoaW5qZWN0JCQxW2luZGV4XSk7XHJcbn1cclxuZnVuY3Rpb24gZmFjdG9yeShrZXlWYWx1ZSkge1xyXG4gICAgcmV0dXJuIGZ1bmN0aW9uICh0YXJnZXQsIF9rZXksIGluZGV4KSB7XHJcbiAgICAgICAgdmFyIGluamVjdCQkMSA9IGdldERlY29yYXRvckRlcGVuZGVuY2llcyh0YXJnZXQpO1xyXG4gICAgICAgIGluamVjdCQkMVtpbmRleF0gPSBGYWN0b3J5Lm9mKGtleVZhbHVlKTtcclxuICAgIH07XHJcbn1cclxuZnVuY3Rpb24gbmV3SW5zdGFuY2UoYXNLZXlPclRhcmdldCkge1xyXG4gICAgdmFyIGR5bmFtaWNEZXBlbmRlbmNpZXMgPSBbXTtcclxuICAgIGZvciAodmFyIF9pID0gMTsgX2kgPCBhcmd1bWVudHMubGVuZ3RoOyBfaSsrKSB7XHJcbiAgICAgICAgZHluYW1pY0RlcGVuZGVuY2llc1tfaSAtIDFdID0gYXJndW1lbnRzW19pXTtcclxuICAgIH1cclxuICAgIHZhciBkZWNvID0gZnVuY3Rpb24gKGFzS2V5KSB7XHJcbiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uICh0YXJnZXQsIF9rZXksIGluZGV4KSB7XHJcbiAgICAgICAgICAgIHZhciBpbmplY3QkJDEgPSBnZXREZWNvcmF0b3JEZXBlbmRlbmNpZXModGFyZ2V0KTtcclxuICAgICAgICAgICAgaW5qZWN0JCQxW2luZGV4XSA9IE5ld0luc3RhbmNlLm9mLmFwcGx5KE5ld0luc3RhbmNlLCBbaW5qZWN0JCQxW2luZGV4XV0uY29uY2F0KGR5bmFtaWNEZXBlbmRlbmNpZXMpKTtcclxuICAgICAgICAgICAgaWYgKCEhYXNLZXkpIHtcclxuICAgICAgICAgICAgICAgIGluamVjdCQkMVtpbmRleF0uYXMoYXNLZXkpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfTtcclxuICAgIH07XHJcbiAgICBpZiAoYXJndW1lbnRzLmxlbmd0aCA+PSAxKSB7XHJcbiAgICAgICAgcmV0dXJuIGRlY28oYXNLZXlPclRhcmdldCk7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gZGVjbygpO1xyXG59XG5cbmZ1bmN0aW9uIHZhbGlkYXRlS2V5KGtleSkge1xyXG4gICAgaWYgKGtleSA9PT0gbnVsbCB8fCBrZXkgPT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgIHRocm93IG5ldyBFcnJvcigna2V5L3ZhbHVlIGNhbm5vdCBiZSBudWxsIG9yIHVuZGVmaW5lZC4gQXJlIHlvdSB0cnlpbmcgdG8gaW5qZWN0L3JlZ2lzdGVyIHNvbWV0aGluZyB0aGF0IGRvZXNuXFwndCBleGlzdCB3aXRoIERJPycpO1xyXG4gICAgfVxyXG59XHJcbnZhciBfZW1wdHlQYXJhbWV0ZXJzID0gT2JqZWN0LmZyZWV6ZShbXSk7XHJcbm1ldGFkYXRhLnJlZ2lzdHJhdGlvbiA9ICdhdXJlbGlhOnJlZ2lzdHJhdGlvbic7XHJcbm1ldGFkYXRhLmludm9rZXIgPSAnYXVyZWxpYTppbnZva2VyJztcclxudmFyIHJlc29sdmVyRGVjb3JhdGVzID0gcmVzb2x2ZXIuZGVjb3JhdGVzO1xyXG52YXIgSW52b2NhdGlvbkhhbmRsZXIgPSAoZnVuY3Rpb24gKCkge1xyXG4gICAgZnVuY3Rpb24gSW52b2NhdGlvbkhhbmRsZXIoZm4sIGludm9rZXIsIGRlcGVuZGVuY2llcykge1xyXG4gICAgICAgIHRoaXMuZm4gPSBmbjtcclxuICAgICAgICB0aGlzLmludm9rZXIgPSBpbnZva2VyO1xyXG4gICAgICAgIHRoaXMuZGVwZW5kZW5jaWVzID0gZGVwZW5kZW5jaWVzO1xyXG4gICAgfVxyXG4gICAgSW52b2NhdGlvbkhhbmRsZXIucHJvdG90eXBlLmludm9rZSA9IGZ1bmN0aW9uIChjb250YWluZXIsIGR5bmFtaWNEZXBlbmRlbmNpZXMpIHtcclxuICAgICAgICByZXR1cm4gZHluYW1pY0RlcGVuZGVuY2llcyAhPT0gdW5kZWZpbmVkXHJcbiAgICAgICAgICAgID8gdGhpcy5pbnZva2VyLmludm9rZVdpdGhEeW5hbWljRGVwZW5kZW5jaWVzKGNvbnRhaW5lciwgdGhpcy5mbiwgdGhpcy5kZXBlbmRlbmNpZXMsIGR5bmFtaWNEZXBlbmRlbmNpZXMpXHJcbiAgICAgICAgICAgIDogdGhpcy5pbnZva2VyLmludm9rZShjb250YWluZXIsIHRoaXMuZm4sIHRoaXMuZGVwZW5kZW5jaWVzKTtcclxuICAgIH07XHJcbiAgICByZXR1cm4gSW52b2NhdGlvbkhhbmRsZXI7XHJcbn0oKSk7XHJcbmZ1bmN0aW9uIGludm9rZVdpdGhEeW5hbWljRGVwZW5kZW5jaWVzKGNvbnRhaW5lciwgZm4sIHN0YXRpY0RlcGVuZGVuY2llcywgZHluYW1pY0RlcGVuZGVuY2llcykge1xyXG4gICAgdmFyIGkgPSBzdGF0aWNEZXBlbmRlbmNpZXMubGVuZ3RoO1xyXG4gICAgdmFyIGFyZ3MgPSBuZXcgQXJyYXkoaSk7XHJcbiAgICB2YXIgbG9va3VwO1xyXG4gICAgd2hpbGUgKGktLSkge1xyXG4gICAgICAgIGxvb2t1cCA9IHN0YXRpY0RlcGVuZGVuY2llc1tpXTtcclxuICAgICAgICBpZiAobG9va3VwID09PSBudWxsIHx8IGxvb2t1cCA9PT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignQ29uc3RydWN0b3IgUGFyYW1ldGVyIHdpdGggaW5kZXggJyArXHJcbiAgICAgICAgICAgICAgICBpICtcclxuICAgICAgICAgICAgICAgICcgY2Fubm90IGJlIG51bGwgb3IgdW5kZWZpbmVkLiBBcmUgeW91IHRyeWluZyB0byBpbmplY3QvcmVnaXN0ZXIgc29tZXRoaW5nIHRoYXQgZG9lc25cXCd0IGV4aXN0IHdpdGggREk/Jyk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICBhcmdzW2ldID0gY29udGFpbmVyLmdldChsb29rdXApO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIGlmIChkeW5hbWljRGVwZW5kZW5jaWVzICE9PSB1bmRlZmluZWQpIHtcclxuICAgICAgICBhcmdzID0gYXJncy5jb25jYXQoZHluYW1pY0RlcGVuZGVuY2llcyk7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gUmVmbGVjdC5jb25zdHJ1Y3QoZm4sIGFyZ3MpO1xyXG59XHJcbnZhciBjbGFzc0ludm9rZXIgPSB7XHJcbiAgICBpbnZva2U6IGZ1bmN0aW9uIChjb250YWluZXIsIFR5cGUsIGRlcHMpIHtcclxuICAgICAgICB2YXIgaW5zdGFuY2VzID0gZGVwcy5tYXAoZnVuY3Rpb24gKGRlcCkgeyByZXR1cm4gY29udGFpbmVyLmdldChkZXApOyB9KTtcclxuICAgICAgICByZXR1cm4gUmVmbGVjdC5jb25zdHJ1Y3QoVHlwZSwgaW5zdGFuY2VzKTtcclxuICAgIH0sXHJcbiAgICBpbnZva2VXaXRoRHluYW1pY0RlcGVuZGVuY2llczogaW52b2tlV2l0aER5bmFtaWNEZXBlbmRlbmNpZXNcclxufTtcclxuZnVuY3Rpb24gZ2V0RGVwZW5kZW5jaWVzKGYpIHtcclxuICAgIGlmICghZi5oYXNPd25Qcm9wZXJ0eSgnaW5qZWN0JykpIHtcclxuICAgICAgICByZXR1cm4gW107XHJcbiAgICB9XHJcbiAgICBpZiAodHlwZW9mIGYuaW5qZWN0ID09PSAnZnVuY3Rpb24nKSB7XHJcbiAgICAgICAgcmV0dXJuIGYuaW5qZWN0KCk7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gZi5pbmplY3Q7XHJcbn1cclxudmFyIENvbnRhaW5lciA9IChmdW5jdGlvbiAoKSB7XHJcbiAgICBmdW5jdGlvbiBDb250YWluZXIoY29uZmlndXJhdGlvbikge1xyXG4gICAgICAgIGlmIChjb25maWd1cmF0aW9uID09PSB1bmRlZmluZWQpIHtcclxuICAgICAgICAgICAgY29uZmlndXJhdGlvbiA9IHt9O1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLl9jb25maWd1cmF0aW9uID0gY29uZmlndXJhdGlvbjtcclxuICAgICAgICB0aGlzLl9vbkhhbmRsZXJDcmVhdGVkID0gY29uZmlndXJhdGlvbi5vbkhhbmRsZXJDcmVhdGVkO1xyXG4gICAgICAgIHRoaXMuX2hhbmRsZXJzID1cclxuICAgICAgICAgICAgY29uZmlndXJhdGlvbi5oYW5kbGVycyB8fCAoY29uZmlndXJhdGlvbi5oYW5kbGVycyA9IG5ldyBNYXAoKSk7XHJcbiAgICAgICAgdGhpcy5fcmVzb2x2ZXJzID0gbmV3IE1hcCgpO1xyXG4gICAgICAgIHRoaXMucm9vdCA9IHRoaXM7XHJcbiAgICAgICAgdGhpcy5wYXJlbnQgPSBudWxsO1xyXG4gICAgfVxyXG4gICAgQ29udGFpbmVyLnByb3RvdHlwZS5tYWtlR2xvYmFsID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIENvbnRhaW5lci5pbnN0YW5jZSA9IHRoaXM7XHJcbiAgICAgICAgcmV0dXJuIHRoaXM7XHJcbiAgICB9O1xyXG4gICAgQ29udGFpbmVyLnByb3RvdHlwZS5zZXRIYW5kbGVyQ3JlYXRlZENhbGxiYWNrID0gZnVuY3Rpb24gKG9uSGFuZGxlckNyZWF0ZWQpIHtcclxuICAgICAgICB0aGlzLl9vbkhhbmRsZXJDcmVhdGVkID0gb25IYW5kbGVyQ3JlYXRlZDtcclxuICAgICAgICB0aGlzLl9jb25maWd1cmF0aW9uLm9uSGFuZGxlckNyZWF0ZWQgPSBvbkhhbmRsZXJDcmVhdGVkO1xyXG4gICAgfTtcclxuICAgIENvbnRhaW5lci5wcm90b3R5cGUucmVnaXN0ZXJJbnN0YW5jZSA9IGZ1bmN0aW9uIChrZXksIGluc3RhbmNlKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMucmVnaXN0ZXJSZXNvbHZlcihrZXksIG5ldyBTdHJhdGVneVJlc29sdmVyKDAsIGluc3RhbmNlID09PSB1bmRlZmluZWQgPyBrZXkgOiBpbnN0YW5jZSkpO1xyXG4gICAgfTtcclxuICAgIENvbnRhaW5lci5wcm90b3R5cGUucmVnaXN0ZXJTaW5nbGV0b24gPSBmdW5jdGlvbiAoa2V5LCBmbikge1xyXG4gICAgICAgIHJldHVybiB0aGlzLnJlZ2lzdGVyUmVzb2x2ZXIoa2V5LCBuZXcgU3RyYXRlZ3lSZXNvbHZlcigxLCBmbiA9PT0gdW5kZWZpbmVkID8ga2V5IDogZm4pKTtcclxuICAgIH07XHJcbiAgICBDb250YWluZXIucHJvdG90eXBlLnJlZ2lzdGVyVHJhbnNpZW50ID0gZnVuY3Rpb24gKGtleSwgZm4pIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5yZWdpc3RlclJlc29sdmVyKGtleSwgbmV3IFN0cmF0ZWd5UmVzb2x2ZXIoMiwgZm4gPT09IHVuZGVmaW5lZCA/IGtleSA6IGZuKSk7XHJcbiAgICB9O1xyXG4gICAgQ29udGFpbmVyLnByb3RvdHlwZS5yZWdpc3RlckhhbmRsZXIgPSBmdW5jdGlvbiAoa2V5LCBoYW5kbGVyKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMucmVnaXN0ZXJSZXNvbHZlcihrZXksIG5ldyBTdHJhdGVneVJlc29sdmVyKDMsIGhhbmRsZXIpKTtcclxuICAgIH07XHJcbiAgICBDb250YWluZXIucHJvdG90eXBlLnJlZ2lzdGVyQWxpYXMgPSBmdW5jdGlvbiAob3JpZ2luYWxLZXksIGFsaWFzS2V5KSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMucmVnaXN0ZXJSZXNvbHZlcihhbGlhc0tleSwgbmV3IFN0cmF0ZWd5UmVzb2x2ZXIoNSwgb3JpZ2luYWxLZXkpKTtcclxuICAgIH07XHJcbiAgICBDb250YWluZXIucHJvdG90eXBlLnJlZ2lzdGVyUmVzb2x2ZXIgPSBmdW5jdGlvbiAoa2V5LCByZXNvbHZlciQkMSkge1xyXG4gICAgICAgIHZhbGlkYXRlS2V5KGtleSk7XHJcbiAgICAgICAgdmFyIGFsbFJlc29sdmVycyA9IHRoaXMuX3Jlc29sdmVycztcclxuICAgICAgICB2YXIgcmVzdWx0ID0gYWxsUmVzb2x2ZXJzLmdldChrZXkpO1xyXG4gICAgICAgIGlmIChyZXN1bHQgPT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgICAgICBhbGxSZXNvbHZlcnMuc2V0KGtleSwgcmVzb2x2ZXIkJDEpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIGlmIChyZXN1bHQuc3RyYXRlZ3kgPT09IDQpIHtcclxuICAgICAgICAgICAgcmVzdWx0LnN0YXRlLnB1c2gocmVzb2x2ZXIkJDEpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgYWxsUmVzb2x2ZXJzLnNldChrZXksIG5ldyBTdHJhdGVneVJlc29sdmVyKDQsIFtyZXN1bHQsIHJlc29sdmVyJCQxXSkpO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gcmVzb2x2ZXIkJDE7XHJcbiAgICB9O1xyXG4gICAgQ29udGFpbmVyLnByb3RvdHlwZS5hdXRvUmVnaXN0ZXIgPSBmdW5jdGlvbiAoa2V5LCBmbikge1xyXG4gICAgICAgIGZuID0gZm4gPT09IHVuZGVmaW5lZCA/IGtleSA6IGZuO1xyXG4gICAgICAgIGlmICh0eXBlb2YgZm4gPT09ICdmdW5jdGlvbicpIHtcclxuICAgICAgICAgICAgdmFyIHJlZ2lzdHJhdGlvbiA9IG1ldGFkYXRhLmdldChtZXRhZGF0YS5yZWdpc3RyYXRpb24sIGZuKTtcclxuICAgICAgICAgICAgaWYgKHJlZ2lzdHJhdGlvbiA9PT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5yZWdpc3RlclJlc29sdmVyKGtleSwgbmV3IFN0cmF0ZWd5UmVzb2x2ZXIoMSwgZm4pKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICByZXR1cm4gcmVnaXN0cmF0aW9uLnJlZ2lzdGVyUmVzb2x2ZXIodGhpcywga2V5LCBmbik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiB0aGlzLnJlZ2lzdGVyUmVzb2x2ZXIoa2V5LCBuZXcgU3RyYXRlZ3lSZXNvbHZlcigwLCBmbikpO1xyXG4gICAgfTtcclxuICAgIENvbnRhaW5lci5wcm90b3R5cGUuYXV0b1JlZ2lzdGVyQWxsID0gZnVuY3Rpb24gKGZucykge1xyXG4gICAgICAgIHZhciBpID0gZm5zLmxlbmd0aDtcclxuICAgICAgICB3aGlsZSAoaS0tKSB7XHJcbiAgICAgICAgICAgIHRoaXMuYXV0b1JlZ2lzdGVyKGZuc1tpXSk7XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuICAgIENvbnRhaW5lci5wcm90b3R5cGUudW5yZWdpc3RlciA9IGZ1bmN0aW9uIChrZXkpIHtcclxuICAgICAgICB0aGlzLl9yZXNvbHZlcnMuZGVsZXRlKGtleSk7XHJcbiAgICB9O1xyXG4gICAgQ29udGFpbmVyLnByb3RvdHlwZS5oYXNSZXNvbHZlciA9IGZ1bmN0aW9uIChrZXksIGNoZWNrUGFyZW50KSB7XHJcbiAgICAgICAgaWYgKGNoZWNrUGFyZW50ID09PSB2b2lkIDApIHsgY2hlY2tQYXJlbnQgPSBmYWxzZTsgfVxyXG4gICAgICAgIHZhbGlkYXRlS2V5KGtleSk7XHJcbiAgICAgICAgcmV0dXJuICh0aGlzLl9yZXNvbHZlcnMuaGFzKGtleSkgfHxcclxuICAgICAgICAgICAgKGNoZWNrUGFyZW50ICYmXHJcbiAgICAgICAgICAgICAgICB0aGlzLnBhcmVudCAhPT0gbnVsbCAmJlxyXG4gICAgICAgICAgICAgICAgdGhpcy5wYXJlbnQuaGFzUmVzb2x2ZXIoa2V5LCBjaGVja1BhcmVudCkpKTtcclxuICAgIH07XHJcbiAgICBDb250YWluZXIucHJvdG90eXBlLmdldFJlc29sdmVyID0gZnVuY3Rpb24gKGtleSkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLl9yZXNvbHZlcnMuZ2V0KGtleSk7XHJcbiAgICB9O1xyXG4gICAgQ29udGFpbmVyLnByb3RvdHlwZS5nZXQgPSBmdW5jdGlvbiAoa2V5KSB7XHJcbiAgICAgICAgdmFsaWRhdGVLZXkoa2V5KTtcclxuICAgICAgICBpZiAoa2V5ID09PSBDb250YWluZXIpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXM7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmIChyZXNvbHZlckRlY29yYXRlcyhrZXkpKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBrZXkuZ2V0KHRoaXMsIGtleSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHZhciByZXNvbHZlciQkMSA9IHRoaXMuX3Jlc29sdmVycy5nZXQoa2V5KTtcclxuICAgICAgICBpZiAocmVzb2x2ZXIkJDEgPT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgICAgICBpZiAodGhpcy5wYXJlbnQgPT09IG51bGwpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLmF1dG9SZWdpc3RlcihrZXkpLmdldCh0aGlzLCBrZXkpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHZhciByZWdpc3RyYXRpb24gPSBtZXRhZGF0YS5nZXQobWV0YWRhdGEucmVnaXN0cmF0aW9uLCBrZXkpO1xyXG4gICAgICAgICAgICBpZiAocmVnaXN0cmF0aW9uID09PSB1bmRlZmluZWQpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLnBhcmVudC5fZ2V0KGtleSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgcmV0dXJuIHJlZ2lzdHJhdGlvbi5yZWdpc3RlclJlc29sdmVyKHRoaXMsIGtleSwga2V5KS5nZXQodGhpcywga2V5KTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHJlc29sdmVyJCQxLmdldCh0aGlzLCBrZXkpO1xyXG4gICAgfTtcclxuICAgIENvbnRhaW5lci5wcm90b3R5cGUuX2dldCA9IGZ1bmN0aW9uIChrZXkpIHtcclxuICAgICAgICB2YXIgcmVzb2x2ZXIkJDEgPSB0aGlzLl9yZXNvbHZlcnMuZ2V0KGtleSk7XHJcbiAgICAgICAgaWYgKHJlc29sdmVyJCQxID09PSB1bmRlZmluZWQpIHtcclxuICAgICAgICAgICAgaWYgKHRoaXMucGFyZW50ID09PSBudWxsKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5hdXRvUmVnaXN0ZXIoa2V5KS5nZXQodGhpcywga2V5KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5wYXJlbnQuX2dldChrZXkpO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gcmVzb2x2ZXIkJDEuZ2V0KHRoaXMsIGtleSk7XHJcbiAgICB9O1xyXG4gICAgQ29udGFpbmVyLnByb3RvdHlwZS5nZXRBbGwgPSBmdW5jdGlvbiAoa2V5KSB7XHJcbiAgICAgICAgdmFsaWRhdGVLZXkoa2V5KTtcclxuICAgICAgICB2YXIgcmVzb2x2ZXIkJDEgPSB0aGlzLl9yZXNvbHZlcnMuZ2V0KGtleSk7XHJcbiAgICAgICAgaWYgKHJlc29sdmVyJCQxID09PSB1bmRlZmluZWQpIHtcclxuICAgICAgICAgICAgaWYgKHRoaXMucGFyZW50ID09PSBudWxsKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gX2VtcHR5UGFyYW1ldGVycztcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5wYXJlbnQuZ2V0QWxsKGtleSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmIChyZXNvbHZlciQkMS5zdHJhdGVneSA9PT0gNCkge1xyXG4gICAgICAgICAgICB2YXIgc3RhdGUgPSByZXNvbHZlciQkMS5zdGF0ZTtcclxuICAgICAgICAgICAgdmFyIGkgPSBzdGF0ZS5sZW5ndGg7XHJcbiAgICAgICAgICAgIHZhciByZXN1bHRzID0gbmV3IEFycmF5KGkpO1xyXG4gICAgICAgICAgICB3aGlsZSAoaS0tKSB7XHJcbiAgICAgICAgICAgICAgICByZXN1bHRzW2ldID0gc3RhdGVbaV0uZ2V0KHRoaXMsIGtleSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgcmV0dXJuIHJlc3VsdHM7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBbcmVzb2x2ZXIkJDEuZ2V0KHRoaXMsIGtleSldO1xyXG4gICAgfTtcclxuICAgIENvbnRhaW5lci5wcm90b3R5cGUuY3JlYXRlQ2hpbGQgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdmFyIGNoaWxkID0gbmV3IENvbnRhaW5lcih0aGlzLl9jb25maWd1cmF0aW9uKTtcclxuICAgICAgICBjaGlsZC5yb290ID0gdGhpcy5yb290O1xyXG4gICAgICAgIGNoaWxkLnBhcmVudCA9IHRoaXM7XHJcbiAgICAgICAgcmV0dXJuIGNoaWxkO1xyXG4gICAgfTtcclxuICAgIENvbnRhaW5lci5wcm90b3R5cGUuaW52b2tlID0gZnVuY3Rpb24gKGZuLCBkeW5hbWljRGVwZW5kZW5jaWVzKSB7XHJcbiAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgdmFyIGhhbmRsZXIgPSB0aGlzLl9oYW5kbGVycy5nZXQoZm4pO1xyXG4gICAgICAgICAgICBpZiAoaGFuZGxlciA9PT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgICAgICAgICBoYW5kbGVyID0gdGhpcy5fY3JlYXRlSW52b2NhdGlvbkhhbmRsZXIoZm4pO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5faGFuZGxlcnMuc2V0KGZuLCBoYW5kbGVyKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICByZXR1cm4gaGFuZGxlci5pbnZva2UodGhpcywgZHluYW1pY0RlcGVuZGVuY2llcyk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGNhdGNoIChlKSB7XHJcbiAgICAgICAgICAgIHRocm93IG5ldyBBZ2dyZWdhdGVFcnJvcihcIkVycm9yIGludm9raW5nIFwiICsgZm4ubmFtZSArIFwiLiBDaGVjayB0aGUgaW5uZXIgZXJyb3IgZm9yIGRldGFpbHMuXCIsIGUsIHRydWUpO1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcbiAgICBDb250YWluZXIucHJvdG90eXBlLl9jcmVhdGVJbnZvY2F0aW9uSGFuZGxlciA9IGZ1bmN0aW9uIChmbikge1xyXG4gICAgICAgIHZhciBkZXBlbmRlbmNpZXM7XHJcbiAgICAgICAgaWYgKGZuLmluamVjdCA9PT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgICAgIGRlcGVuZGVuY2llcyA9XHJcbiAgICAgICAgICAgICAgICBtZXRhZGF0YS5nZXRPd24obWV0YWRhdGEucGFyYW1UeXBlcywgZm4pIHx8IF9lbXB0eVBhcmFtZXRlcnM7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICBkZXBlbmRlbmNpZXMgPSBbXTtcclxuICAgICAgICAgICAgdmFyIGN0b3IgPSBmbjtcclxuICAgICAgICAgICAgd2hpbGUgKHR5cGVvZiBjdG9yID09PSAnZnVuY3Rpb24nKSB7XHJcbiAgICAgICAgICAgICAgICBkZXBlbmRlbmNpZXMucHVzaC5hcHBseShkZXBlbmRlbmNpZXMsIGdldERlcGVuZGVuY2llcyhjdG9yKSk7XHJcbiAgICAgICAgICAgICAgICBjdG9yID0gT2JqZWN0LmdldFByb3RvdHlwZU9mKGN0b3IpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHZhciBpbnZva2VyID0gbWV0YWRhdGEuZ2V0T3duKG1ldGFkYXRhLmludm9rZXIsIGZuKSB8fCBjbGFzc0ludm9rZXI7XHJcbiAgICAgICAgdmFyIGhhbmRsZXIgPSBuZXcgSW52b2NhdGlvbkhhbmRsZXIoZm4sIGludm9rZXIsIGRlcGVuZGVuY2llcyk7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX29uSGFuZGxlckNyZWF0ZWQgIT09IHVuZGVmaW5lZFxyXG4gICAgICAgICAgICA/IHRoaXMuX29uSGFuZGxlckNyZWF0ZWQoaGFuZGxlcilcclxuICAgICAgICAgICAgOiBoYW5kbGVyO1xyXG4gICAgfTtcclxuICAgIHJldHVybiBDb250YWluZXI7XHJcbn0oKSk7XG5cbmZ1bmN0aW9uIGludm9rZXIodmFsdWUpIHtcclxuICAgIHJldHVybiBmdW5jdGlvbiAodGFyZ2V0KSB7XHJcbiAgICAgICAgbWV0YWRhdGEuZGVmaW5lKG1ldGFkYXRhLmludm9rZXIsIHZhbHVlLCB0YXJnZXQpO1xyXG4gICAgfTtcclxufVxyXG5mdW5jdGlvbiBpbnZva2VBc0ZhY3RvcnkocG90ZW50aWFsVGFyZ2V0KSB7XHJcbiAgICB2YXIgZGVjbyA9IGZ1bmN0aW9uICh0YXJnZXQpIHtcclxuICAgICAgICBtZXRhZGF0YS5kZWZpbmUobWV0YWRhdGEuaW52b2tlciwgRmFjdG9yeUludm9rZXIuaW5zdGFuY2UsIHRhcmdldCk7XHJcbiAgICB9O1xyXG4gICAgcmV0dXJuIHBvdGVudGlhbFRhcmdldCA/IGRlY28ocG90ZW50aWFsVGFyZ2V0KSA6IGRlY287XHJcbn1cclxudmFyIEZhY3RvcnlJbnZva2VyID0gKGZ1bmN0aW9uICgpIHtcclxuICAgIGZ1bmN0aW9uIEZhY3RvcnlJbnZva2VyKCkge1xyXG4gICAgfVxyXG4gICAgRmFjdG9yeUludm9rZXIucHJvdG90eXBlLmludm9rZSA9IGZ1bmN0aW9uIChjb250YWluZXIsIGZuLCBkZXBlbmRlbmNpZXMpIHtcclxuICAgICAgICB2YXIgaSA9IGRlcGVuZGVuY2llcy5sZW5ndGg7XHJcbiAgICAgICAgdmFyIGFyZ3MgPSBuZXcgQXJyYXkoaSk7XHJcbiAgICAgICAgd2hpbGUgKGktLSkge1xyXG4gICAgICAgICAgICBhcmdzW2ldID0gY29udGFpbmVyLmdldChkZXBlbmRlbmNpZXNbaV0pO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gZm4uYXBwbHkodW5kZWZpbmVkLCBhcmdzKTtcclxuICAgIH07XHJcbiAgICBGYWN0b3J5SW52b2tlci5wcm90b3R5cGUuaW52b2tlV2l0aER5bmFtaWNEZXBlbmRlbmNpZXMgPSBmdW5jdGlvbiAoY29udGFpbmVyLCBmbiwgc3RhdGljRGVwZW5kZW5jaWVzLCBkeW5hbWljRGVwZW5kZW5jaWVzKSB7XHJcbiAgICAgICAgdmFyIGkgPSBzdGF0aWNEZXBlbmRlbmNpZXMubGVuZ3RoO1xyXG4gICAgICAgIHZhciBhcmdzID0gbmV3IEFycmF5KGkpO1xyXG4gICAgICAgIHdoaWxlIChpLS0pIHtcclxuICAgICAgICAgICAgYXJnc1tpXSA9IGNvbnRhaW5lci5nZXQoc3RhdGljRGVwZW5kZW5jaWVzW2ldKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKGR5bmFtaWNEZXBlbmRlbmNpZXMgIT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgICAgICBhcmdzID0gYXJncy5jb25jYXQoZHluYW1pY0RlcGVuZGVuY2llcyk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBmbi5hcHBseSh1bmRlZmluZWQsIGFyZ3MpO1xyXG4gICAgfTtcclxuICAgIHJldHVybiBGYWN0b3J5SW52b2tlcjtcclxufSgpKTtcclxuRmFjdG9yeUludm9rZXIuaW5zdGFuY2UgPSBuZXcgRmFjdG9yeUludm9rZXIoKTtcblxuZnVuY3Rpb24gcmVnaXN0cmF0aW9uKHZhbHVlKSB7XHJcbiAgICByZXR1cm4gZnVuY3Rpb24gKHRhcmdldCkge1xyXG4gICAgICAgIG1ldGFkYXRhLmRlZmluZShtZXRhZGF0YS5yZWdpc3RyYXRpb24sIHZhbHVlLCB0YXJnZXQpO1xyXG4gICAgfTtcclxufVxyXG5mdW5jdGlvbiB0cmFuc2llbnQoa2V5KSB7XHJcbiAgICByZXR1cm4gcmVnaXN0cmF0aW9uKG5ldyBUcmFuc2llbnRSZWdpc3RyYXRpb24oa2V5KSk7XHJcbn1cclxuZnVuY3Rpb24gc2luZ2xldG9uKGtleU9yUmVnaXN0ZXJJbkNoaWxkLCByZWdpc3RlckluQ2hpbGQpIHtcclxuICAgIGlmIChyZWdpc3RlckluQ2hpbGQgPT09IHZvaWQgMCkgeyByZWdpc3RlckluQ2hpbGQgPSBmYWxzZTsgfVxyXG4gICAgcmV0dXJuIHJlZ2lzdHJhdGlvbihuZXcgU2luZ2xldG9uUmVnaXN0cmF0aW9uKGtleU9yUmVnaXN0ZXJJbkNoaWxkLCByZWdpc3RlckluQ2hpbGQpKTtcclxufVxyXG52YXIgVHJhbnNpZW50UmVnaXN0cmF0aW9uID0gKGZ1bmN0aW9uICgpIHtcclxuICAgIGZ1bmN0aW9uIFRyYW5zaWVudFJlZ2lzdHJhdGlvbihrZXkpIHtcclxuICAgICAgICB0aGlzLl9rZXkgPSBrZXk7XHJcbiAgICB9XHJcbiAgICBUcmFuc2llbnRSZWdpc3RyYXRpb24ucHJvdG90eXBlLnJlZ2lzdGVyUmVzb2x2ZXIgPSBmdW5jdGlvbiAoY29udGFpbmVyLCBrZXksIGZuKSB7XHJcbiAgICAgICAgdmFyIGV4aXN0aW5nUmVzb2x2ZXIgPSBjb250YWluZXIuZ2V0UmVzb2x2ZXIodGhpcy5fa2V5IHx8IGtleSk7XHJcbiAgICAgICAgcmV0dXJuIGV4aXN0aW5nUmVzb2x2ZXIgPT09IHVuZGVmaW5lZFxyXG4gICAgICAgICAgICA/IGNvbnRhaW5lci5yZWdpc3RlclRyYW5zaWVudCgodGhpcy5fa2V5IHx8IGtleSksIGZuKVxyXG4gICAgICAgICAgICA6IGV4aXN0aW5nUmVzb2x2ZXI7XHJcbiAgICB9O1xyXG4gICAgcmV0dXJuIFRyYW5zaWVudFJlZ2lzdHJhdGlvbjtcclxufSgpKTtcclxudmFyIFNpbmdsZXRvblJlZ2lzdHJhdGlvbiA9IChmdW5jdGlvbiAoKSB7XHJcbiAgICBmdW5jdGlvbiBTaW5nbGV0b25SZWdpc3RyYXRpb24oa2V5T3JSZWdpc3RlckluQ2hpbGQsIHJlZ2lzdGVySW5DaGlsZCkge1xyXG4gICAgICAgIGlmIChyZWdpc3RlckluQ2hpbGQgPT09IHZvaWQgMCkgeyByZWdpc3RlckluQ2hpbGQgPSBmYWxzZTsgfVxyXG4gICAgICAgIGlmICh0eXBlb2Yga2V5T3JSZWdpc3RlckluQ2hpbGQgPT09ICdib29sZWFuJykge1xyXG4gICAgICAgICAgICB0aGlzLl9yZWdpc3RlckluQ2hpbGQgPSBrZXlPclJlZ2lzdGVySW5DaGlsZDtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIHRoaXMuX2tleSA9IGtleU9yUmVnaXN0ZXJJbkNoaWxkO1xyXG4gICAgICAgICAgICB0aGlzLl9yZWdpc3RlckluQ2hpbGQgPSByZWdpc3RlckluQ2hpbGQ7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgU2luZ2xldG9uUmVnaXN0cmF0aW9uLnByb3RvdHlwZS5yZWdpc3RlclJlc29sdmVyID0gZnVuY3Rpb24gKGNvbnRhaW5lciwga2V5LCBmbikge1xyXG4gICAgICAgIHZhciB0YXJnZXRDb250YWluZXIgPSB0aGlzLl9yZWdpc3RlckluQ2hpbGQgPyBjb250YWluZXIgOiBjb250YWluZXIucm9vdDtcclxuICAgICAgICB2YXIgZXhpc3RpbmdSZXNvbHZlciA9IHRhcmdldENvbnRhaW5lci5nZXRSZXNvbHZlcih0aGlzLl9rZXkgfHwga2V5KTtcclxuICAgICAgICByZXR1cm4gZXhpc3RpbmdSZXNvbHZlciA9PT0gdW5kZWZpbmVkXHJcbiAgICAgICAgICAgID8gdGFyZ2V0Q29udGFpbmVyLnJlZ2lzdGVyU2luZ2xldG9uKHRoaXMuX2tleSB8fCBrZXksIGZuKVxyXG4gICAgICAgICAgICA6IGV4aXN0aW5nUmVzb2x2ZXI7XHJcbiAgICB9O1xyXG4gICAgcmV0dXJuIFNpbmdsZXRvblJlZ2lzdHJhdGlvbjtcclxufSgpKTtcblxuZXhwb3J0IHsgX2VtcHR5UGFyYW1ldGVycywgSW52b2NhdGlvbkhhbmRsZXIsIENvbnRhaW5lciwgYXV0b2luamVjdCwgaW5qZWN0LCBpbnZva2VyLCBpbnZva2VBc0ZhY3RvcnksIEZhY3RvcnlJbnZva2VyLCByZWdpc3RyYXRpb24sIHRyYW5zaWVudCwgc2luZ2xldG9uLCBUcmFuc2llbnRSZWdpc3RyYXRpb24sIFNpbmdsZXRvblJlZ2lzdHJhdGlvbiwgcmVzb2x2ZXIsIFN0cmF0ZWd5LCBTdHJhdGVneVJlc29sdmVyLCBMYXp5LCBBbGwsIE9wdGlvbmFsLCBQYXJlbnQsIEZhY3RvcnksIE5ld0luc3RhbmNlLCBnZXREZWNvcmF0b3JEZXBlbmRlbmNpZXMsIGxhenksIGFsbCwgb3B0aW9uYWwsIHBhcmVudCwgZmFjdG9yeSwgbmV3SW5zdGFuY2UgfTtcbiJdLCJtYXBwaW5ncyI6IkFBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTsiLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///3U8n\n");

/***/ }),

/***/ "P/zd":
/*!******************************************************************!*\
  !*** ./node_modules/aurelia-dialog/dist/native-modules/chunk.js ***!
  \******************************************************************/
/*! exports provided: a, b, c, d, e */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"a\", function() { return Renderer; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"b\", function() { return createDialogCancelError; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"c\", function() { return invokeLifecycle; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"d\", function() { return DialogController; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"e\", function() { return createDialogCloseError; });\nvar Renderer = (function () {\r\n    function Renderer() {\r\n    }\r\n    Renderer.prototype.getDialogContainer = function () {\r\n        throw new Error('DialogRenderer must implement getDialogContainer().');\r\n    };\r\n    Renderer.prototype.showDialog = function (dialogController) {\r\n        throw new Error('DialogRenderer must implement showDialog().');\r\n    };\r\n    Renderer.prototype.hideDialog = function (dialogController) {\r\n        throw new Error('DialogRenderer must implement hideDialog().');\r\n    };\r\n    return Renderer;\r\n}());\n\nfunction createDialogCancelError(output) {\r\n    var error = new Error('Operation cancelled.');\r\n    error.wasCancelled = true;\r\n    error.output = output;\r\n    return error;\r\n}\n\nfunction createDialogCloseError(output) {\r\n    var error = new Error();\r\n    error.wasCancelled = false;\r\n    error.output = output;\r\n    return error;\r\n}\n\nfunction invokeLifecycle(instance, name, model) {\r\n    if (typeof instance[name] === 'function') {\r\n        return new Promise(function (resolve) {\r\n            resolve(instance[name](model));\r\n        }).then(function (result) {\r\n            if (result !== null && result !== undefined) {\r\n                return result;\r\n            }\r\n            return true;\r\n        });\r\n    }\r\n    return Promise.resolve(true);\r\n}\n\nvar DialogController = (function () {\r\n    function DialogController(renderer, settings, resolve, reject) {\r\n        this.resolve = resolve;\r\n        this.reject = reject;\r\n        this.settings = settings;\r\n        this.renderer = renderer;\r\n    }\r\n    DialogController.prototype.releaseResources = function (result) {\r\n        var _this = this;\r\n        return invokeLifecycle(this.controller.viewModel || {}, 'deactivate', result)\r\n            .then(function () { return _this.renderer.hideDialog(_this); })\r\n            .then(function () {\r\n            _this.controller.unbind();\r\n        });\r\n    };\r\n    DialogController.prototype.cancelOperation = function () {\r\n        if (!this.settings.rejectOnCancel) {\r\n            return { wasCancelled: true };\r\n        }\r\n        throw createDialogCancelError();\r\n    };\r\n    DialogController.prototype.ok = function (output) {\r\n        return this.close(true, output);\r\n    };\r\n    DialogController.prototype.cancel = function (output) {\r\n        return this.close(false, output);\r\n    };\r\n    DialogController.prototype.error = function (output) {\r\n        var _this = this;\r\n        var closeError = createDialogCloseError(output);\r\n        return this.releaseResources(closeError).then(function () { _this.reject(closeError); });\r\n    };\r\n    DialogController.prototype.close = function (ok, output) {\r\n        var _this = this;\r\n        if (this.closePromise) {\r\n            return this.closePromise;\r\n        }\r\n        var dialogResult = { wasCancelled: !ok, output: output };\r\n        return this.closePromise = invokeLifecycle(this.controller.viewModel || {}, 'canDeactivate', dialogResult)\r\n            .catch(function (reason) {\r\n            _this.closePromise = undefined;\r\n            return Promise.reject(reason);\r\n        }).then(function (canDeactivate) {\r\n            if (!canDeactivate) {\r\n                _this.closePromise = undefined;\r\n                return _this.cancelOperation();\r\n            }\r\n            return _this.releaseResources(dialogResult).then(function () {\r\n                if (!_this.settings.rejectOnCancel || ok) {\r\n                    _this.resolve(dialogResult);\r\n                }\r\n                else {\r\n                    _this.reject(createDialogCancelError(output));\r\n                }\r\n                return { wasCancelled: false };\r\n            }).catch(function (reason) {\r\n                _this.closePromise = undefined;\r\n                return Promise.reject(reason);\r\n            });\r\n        });\r\n    };\r\n    DialogController.inject = [Renderer];\r\n    return DialogController;\r\n}());\n\n\n//# sourceMappingURL=chunk.js.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiUC96ZC5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9hdXJlbGlhLWRpYWxvZy9kaXN0L25hdGl2ZS1tb2R1bGVzL2NodW5rLmpzPzNmZmMiXSwic291cmNlc0NvbnRlbnQiOlsidmFyIFJlbmRlcmVyID0gKGZ1bmN0aW9uICgpIHtcclxuICAgIGZ1bmN0aW9uIFJlbmRlcmVyKCkge1xyXG4gICAgfVxyXG4gICAgUmVuZGVyZXIucHJvdG90eXBlLmdldERpYWxvZ0NvbnRhaW5lciA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ0RpYWxvZ1JlbmRlcmVyIG11c3QgaW1wbGVtZW50IGdldERpYWxvZ0NvbnRhaW5lcigpLicpO1xyXG4gICAgfTtcclxuICAgIFJlbmRlcmVyLnByb3RvdHlwZS5zaG93RGlhbG9nID0gZnVuY3Rpb24gKGRpYWxvZ0NvbnRyb2xsZXIpIHtcclxuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ0RpYWxvZ1JlbmRlcmVyIG11c3QgaW1wbGVtZW50IHNob3dEaWFsb2coKS4nKTtcclxuICAgIH07XHJcbiAgICBSZW5kZXJlci5wcm90b3R5cGUuaGlkZURpYWxvZyA9IGZ1bmN0aW9uIChkaWFsb2dDb250cm9sbGVyKSB7XHJcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdEaWFsb2dSZW5kZXJlciBtdXN0IGltcGxlbWVudCBoaWRlRGlhbG9nKCkuJyk7XHJcbiAgICB9O1xyXG4gICAgcmV0dXJuIFJlbmRlcmVyO1xyXG59KCkpO1xuXG5mdW5jdGlvbiBjcmVhdGVEaWFsb2dDYW5jZWxFcnJvcihvdXRwdXQpIHtcclxuICAgIHZhciBlcnJvciA9IG5ldyBFcnJvcignT3BlcmF0aW9uIGNhbmNlbGxlZC4nKTtcclxuICAgIGVycm9yLndhc0NhbmNlbGxlZCA9IHRydWU7XHJcbiAgICBlcnJvci5vdXRwdXQgPSBvdXRwdXQ7XHJcbiAgICByZXR1cm4gZXJyb3I7XHJcbn1cblxuZnVuY3Rpb24gY3JlYXRlRGlhbG9nQ2xvc2VFcnJvcihvdXRwdXQpIHtcclxuICAgIHZhciBlcnJvciA9IG5ldyBFcnJvcigpO1xyXG4gICAgZXJyb3Iud2FzQ2FuY2VsbGVkID0gZmFsc2U7XHJcbiAgICBlcnJvci5vdXRwdXQgPSBvdXRwdXQ7XHJcbiAgICByZXR1cm4gZXJyb3I7XHJcbn1cblxuZnVuY3Rpb24gaW52b2tlTGlmZWN5Y2xlKGluc3RhbmNlLCBuYW1lLCBtb2RlbCkge1xyXG4gICAgaWYgKHR5cGVvZiBpbnN0YW5jZVtuYW1lXSA9PT0gJ2Z1bmN0aW9uJykge1xyXG4gICAgICAgIHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbiAocmVzb2x2ZSkge1xyXG4gICAgICAgICAgICByZXNvbHZlKGluc3RhbmNlW25hbWVdKG1vZGVsKSk7XHJcbiAgICAgICAgfSkudGhlbihmdW5jdGlvbiAocmVzdWx0KSB7XHJcbiAgICAgICAgICAgIGlmIChyZXN1bHQgIT09IG51bGwgJiYgcmVzdWx0ICE9PSB1bmRlZmluZWQpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiByZXN1bHQ7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKHRydWUpO1xyXG59XG5cbnZhciBEaWFsb2dDb250cm9sbGVyID0gKGZ1bmN0aW9uICgpIHtcclxuICAgIGZ1bmN0aW9uIERpYWxvZ0NvbnRyb2xsZXIocmVuZGVyZXIsIHNldHRpbmdzLCByZXNvbHZlLCByZWplY3QpIHtcclxuICAgICAgICB0aGlzLnJlc29sdmUgPSByZXNvbHZlO1xyXG4gICAgICAgIHRoaXMucmVqZWN0ID0gcmVqZWN0O1xyXG4gICAgICAgIHRoaXMuc2V0dGluZ3MgPSBzZXR0aW5ncztcclxuICAgICAgICB0aGlzLnJlbmRlcmVyID0gcmVuZGVyZXI7XHJcbiAgICB9XHJcbiAgICBEaWFsb2dDb250cm9sbGVyLnByb3RvdHlwZS5yZWxlYXNlUmVzb3VyY2VzID0gZnVuY3Rpb24gKHJlc3VsdCkge1xyXG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XHJcbiAgICAgICAgcmV0dXJuIGludm9rZUxpZmVjeWNsZSh0aGlzLmNvbnRyb2xsZXIudmlld01vZGVsIHx8IHt9LCAnZGVhY3RpdmF0ZScsIHJlc3VsdClcclxuICAgICAgICAgICAgLnRoZW4oZnVuY3Rpb24gKCkgeyByZXR1cm4gX3RoaXMucmVuZGVyZXIuaGlkZURpYWxvZyhfdGhpcyk7IH0pXHJcbiAgICAgICAgICAgIC50aGVuKGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgX3RoaXMuY29udHJvbGxlci51bmJpbmQoKTtcclxuICAgICAgICB9KTtcclxuICAgIH07XHJcbiAgICBEaWFsb2dDb250cm9sbGVyLnByb3RvdHlwZS5jYW5jZWxPcGVyYXRpb24gPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgaWYgKCF0aGlzLnNldHRpbmdzLnJlamVjdE9uQ2FuY2VsKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB7IHdhc0NhbmNlbGxlZDogdHJ1ZSB9O1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aHJvdyBjcmVhdGVEaWFsb2dDYW5jZWxFcnJvcigpO1xyXG4gICAgfTtcclxuICAgIERpYWxvZ0NvbnRyb2xsZXIucHJvdG90eXBlLm9rID0gZnVuY3Rpb24gKG91dHB1dCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLmNsb3NlKHRydWUsIG91dHB1dCk7XHJcbiAgICB9O1xyXG4gICAgRGlhbG9nQ29udHJvbGxlci5wcm90b3R5cGUuY2FuY2VsID0gZnVuY3Rpb24gKG91dHB1dCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLmNsb3NlKGZhbHNlLCBvdXRwdXQpO1xyXG4gICAgfTtcclxuICAgIERpYWxvZ0NvbnRyb2xsZXIucHJvdG90eXBlLmVycm9yID0gZnVuY3Rpb24gKG91dHB1dCkge1xyXG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XHJcbiAgICAgICAgdmFyIGNsb3NlRXJyb3IgPSBjcmVhdGVEaWFsb2dDbG9zZUVycm9yKG91dHB1dCk7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMucmVsZWFzZVJlc291cmNlcyhjbG9zZUVycm9yKS50aGVuKGZ1bmN0aW9uICgpIHsgX3RoaXMucmVqZWN0KGNsb3NlRXJyb3IpOyB9KTtcclxuICAgIH07XHJcbiAgICBEaWFsb2dDb250cm9sbGVyLnByb3RvdHlwZS5jbG9zZSA9IGZ1bmN0aW9uIChvaywgb3V0cHV0KSB7XHJcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcclxuICAgICAgICBpZiAodGhpcy5jbG9zZVByb21pc2UpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuY2xvc2VQcm9taXNlO1xyXG4gICAgICAgIH1cclxuICAgICAgICB2YXIgZGlhbG9nUmVzdWx0ID0geyB3YXNDYW5jZWxsZWQ6ICFvaywgb3V0cHV0OiBvdXRwdXQgfTtcclxuICAgICAgICByZXR1cm4gdGhpcy5jbG9zZVByb21pc2UgPSBpbnZva2VMaWZlY3ljbGUodGhpcy5jb250cm9sbGVyLnZpZXdNb2RlbCB8fCB7fSwgJ2NhbkRlYWN0aXZhdGUnLCBkaWFsb2dSZXN1bHQpXHJcbiAgICAgICAgICAgIC5jYXRjaChmdW5jdGlvbiAocmVhc29uKSB7XHJcbiAgICAgICAgICAgIF90aGlzLmNsb3NlUHJvbWlzZSA9IHVuZGVmaW5lZDtcclxuICAgICAgICAgICAgcmV0dXJuIFByb21pc2UucmVqZWN0KHJlYXNvbik7XHJcbiAgICAgICAgfSkudGhlbihmdW5jdGlvbiAoY2FuRGVhY3RpdmF0ZSkge1xyXG4gICAgICAgICAgICBpZiAoIWNhbkRlYWN0aXZhdGUpIHtcclxuICAgICAgICAgICAgICAgIF90aGlzLmNsb3NlUHJvbWlzZSA9IHVuZGVmaW5lZDtcclxuICAgICAgICAgICAgICAgIHJldHVybiBfdGhpcy5jYW5jZWxPcGVyYXRpb24oKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICByZXR1cm4gX3RoaXMucmVsZWFzZVJlc291cmNlcyhkaWFsb2dSZXN1bHQpLnRoZW4oZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgaWYgKCFfdGhpcy5zZXR0aW5ncy5yZWplY3RPbkNhbmNlbCB8fCBvaykge1xyXG4gICAgICAgICAgICAgICAgICAgIF90aGlzLnJlc29sdmUoZGlhbG9nUmVzdWx0KTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIF90aGlzLnJlamVjdChjcmVhdGVEaWFsb2dDYW5jZWxFcnJvcihvdXRwdXQpKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIHJldHVybiB7IHdhc0NhbmNlbGxlZDogZmFsc2UgfTtcclxuICAgICAgICAgICAgfSkuY2F0Y2goZnVuY3Rpb24gKHJlYXNvbikge1xyXG4gICAgICAgICAgICAgICAgX3RoaXMuY2xvc2VQcm9taXNlID0gdW5kZWZpbmVkO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIFByb21pc2UucmVqZWN0KHJlYXNvbik7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfTtcclxuICAgIERpYWxvZ0NvbnRyb2xsZXIuaW5qZWN0ID0gW1JlbmRlcmVyXTtcclxuICAgIHJldHVybiBEaWFsb2dDb250cm9sbGVyO1xyXG59KCkpO1xuXG5leHBvcnQgeyBSZW5kZXJlciBhcyBhLCBjcmVhdGVEaWFsb2dDYW5jZWxFcnJvciBhcyBiLCBpbnZva2VMaWZlY3ljbGUgYXMgYywgRGlhbG9nQ29udHJvbGxlciBhcyBkLCBjcmVhdGVEaWFsb2dDbG9zZUVycm9yIGFzIGUgfTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWNodW5rLmpzLm1hcFxuIl0sIm1hcHBpbmdzIjoiQUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOyIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///P/zd\n");

/***/ }),

/***/ "aurelia-dialog":
/*!***************************************************************************!*\
  !*** ./node_modules/aurelia-dialog/dist/native-modules/aurelia-dialog.js ***!
  \***************************************************************************/
/*! exports provided: DialogController, Renderer, createDialogCancelError, createDialogCloseError, DefaultDialogSettings, DialogConfiguration, DialogService, configure */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"DefaultDialogSettings\", function() { return DefaultDialogSettings; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"DialogConfiguration\", function() { return DialogConfiguration; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"DialogService\", function() { return DialogService; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"configure\", function() { return configure; });\n/* harmony import */ var _chunk_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./chunk.js */ \"P/zd\");\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, \"DialogController\", function() { return _chunk_js__WEBPACK_IMPORTED_MODULE_0__[\"d\"]; });\n\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, \"Renderer\", function() { return _chunk_js__WEBPACK_IMPORTED_MODULE_0__[\"a\"]; });\n\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, \"createDialogCancelError\", function() { return _chunk_js__WEBPACK_IMPORTED_MODULE_0__[\"b\"]; });\n\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, \"createDialogCloseError\", function() { return _chunk_js__WEBPACK_IMPORTED_MODULE_0__[\"e\"]; });\n\n/* harmony import */ var aurelia_pal__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! aurelia-pal */ \"70NS\");\n/* harmony import */ var aurelia_dependency_injection__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! aurelia-dependency-injection */ \"3U8n\");\n/* harmony import */ var aurelia_templating__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! aurelia-templating */ \"hij8\");\n\n\n\n\n\n\nvar DefaultDialogSettings = (function () {\r\n    function DefaultDialogSettings() {\r\n        this.lock = true;\r\n        this.startingZIndex = 1000;\r\n        this.centerHorizontalOnly = false;\r\n        this.rejectOnCancel = false;\r\n        this.ignoreTransitions = false;\r\n        this.restoreFocus = function (lastActiveElement) { return lastActiveElement.focus(); };\r\n    }\r\n    return DefaultDialogSettings;\r\n}());\n\nvar RENDERRERS = {\r\n    ux: function () { return __webpack_require__.e(/*! import() */ \"vendors.async~3e799143\").then(__webpack_require__.bind(null, /*! ./ux-dialog-renderer.js */ \"yfWE\")).then(function (m) { return m.DialogRenderer; }); },\r\n    native: function () { return __webpack_require__.e(/*! import() */ \"vendors.async~3e799143\").then(__webpack_require__.bind(null, /*! ./native-dialog-renderer.js */ \"MzFQ\")).then(function (m) { return m.NativeDialogRenderer; }); }\r\n};\r\nvar DEFAULT_RESOURCES = {\r\n    'ux-dialog': function () { return __webpack_require__.e(/*! import() */ \"vendors.async~3e799143\").then(__webpack_require__.bind(null, /*! ./ux-dialog.js */ \"mbV6\")).then(function (m) { return m.UxDialog; }); },\r\n    'ux-dialog-header': function () { return __webpack_require__.e(/*! import() */ \"vendors.async~3e799143\").then(__webpack_require__.bind(null, /*! ./ux-dialog-header.js */ \"kAWR\")).then(function (m) { return m.UxDialogHeader; }); },\r\n    'ux-dialog-body': function () { return __webpack_require__.e(/*! import() */ \"vendors.async~3e799143\").then(__webpack_require__.bind(null, /*! ./ux-dialog-body.js */ \"K1pw\")).then(function (m) { return m.UxDialogBody; }); },\r\n    'ux-dialog-footer': function () { return __webpack_require__.e(/*! import() */ \"vendors.async~3e799143\").then(__webpack_require__.bind(null, /*! ./ux-dialog-footer.js */ \"It9J\")).then(function (m) { return m.UxDialogFooter; }); },\r\n    'attach-focus': function () { return __webpack_require__.e(/*! import() */ \"vendors.async~3e799143\").then(__webpack_require__.bind(null, /*! ./attach-focus.js */ \"e1DJ\")).then(function (m) { return m.AttachFocus; }); }\r\n};\r\nvar DEFAULT_CSS_TEXT = function () { return __webpack_require__.e(/*! import() */ \"vendors.async~3e799143\").then(__webpack_require__.bind(null, /*! ./default-styles.js */ \"em5G\")).then(function (cssM) { return cssM['default']; }); };\r\nvar DialogConfiguration = (function () {\r\n    function DialogConfiguration(frameworkConfiguration, applySetter) {\r\n        var _this = this;\r\n        this.renderer = 'ux';\r\n        this.cssText = DEFAULT_CSS_TEXT;\r\n        this.resources = [];\r\n        this.fwConfig = frameworkConfiguration;\r\n        this.settings = frameworkConfiguration.container.get(DefaultDialogSettings);\r\n        applySetter(function () { return _this._apply(); });\r\n    }\r\n    DialogConfiguration.prototype._apply = function () {\r\n        var _this = this;\r\n        var renderer = this.renderer;\r\n        var cssText = this.cssText;\r\n        return Promise\r\n            .all([\r\n            typeof renderer === 'string' ? RENDERRERS[renderer]() : renderer,\r\n            cssText\r\n                ? typeof cssText === 'string'\r\n                    ? cssText\r\n                    : cssText()\r\n                : ''\r\n        ])\r\n            .then(function (_a) {\r\n            var rendererImpl = _a[0], $cssText = _a[1];\r\n            var fwConfig = _this.fwConfig;\r\n            fwConfig.transient(_chunk_js__WEBPACK_IMPORTED_MODULE_0__[\"a\"], rendererImpl);\r\n            if ($cssText) {\r\n                aurelia_pal__WEBPACK_IMPORTED_MODULE_1__[\"DOM\"].injectStyles($cssText);\r\n            }\r\n            return Promise\r\n                .all(_this.resources.map(function (name) { return DEFAULT_RESOURCES[name](); }))\r\n                .then(function (modules) {\r\n                fwConfig.globalResources(modules);\r\n            });\r\n        });\r\n    };\r\n    DialogConfiguration.prototype.useDefaults = function () {\r\n        return this\r\n            .useRenderer('ux')\r\n            .useCSS(DEFAULT_CSS_TEXT)\r\n            .useStandardResources();\r\n    };\r\n    DialogConfiguration.prototype.useStandardResources = function () {\r\n        Object.keys(DEFAULT_RESOURCES).forEach(this.useResource, this);\r\n        return this;\r\n    };\r\n    DialogConfiguration.prototype.useResource = function (resourceName) {\r\n        this.resources.push(resourceName);\r\n        return this;\r\n    };\r\n    DialogConfiguration.prototype.useRenderer = function (renderer, settings) {\r\n        this.renderer = renderer;\r\n        if (settings) {\r\n            Object.assign(this.settings, settings);\r\n        }\r\n        return this;\r\n    };\r\n    DialogConfiguration.prototype.useCSS = function (cssText) {\r\n        this.cssText = cssText;\r\n        return this;\r\n    };\r\n    return DialogConfiguration;\r\n}());\n\nfunction whenClosed(onfulfilled, onrejected) {\r\n    return this.then(function (r) { return r.wasCancelled ? r : r.closeResult; }).then(onfulfilled, onrejected);\r\n}\r\nfunction asDialogOpenPromise(promise) {\r\n    promise.whenClosed = whenClosed;\r\n    return promise;\r\n}\r\nvar DialogService = (function () {\r\n    function DialogService(container, compositionEngine, defaultSettings) {\r\n        this.controllers = [];\r\n        this.hasOpenDialog = false;\r\n        this.hasActiveDialog = false;\r\n        this.container = container;\r\n        this.compositionEngine = compositionEngine;\r\n        this.defaultSettings = defaultSettings;\r\n    }\r\n    DialogService.prototype.validateSettings = function (settings) {\r\n        if (!settings.viewModel && !settings.view) {\r\n            throw new Error('Invalid Dialog Settings. You must provide \"viewModel\", \"view\" or both.');\r\n        }\r\n    };\r\n    DialogService.prototype.createCompositionContext = function (childContainer, host, settings) {\r\n        return {\r\n            container: childContainer.parent,\r\n            childContainer: childContainer,\r\n            bindingContext: null,\r\n            viewResources: null,\r\n            model: settings.model,\r\n            view: settings.view,\r\n            viewModel: settings.viewModel,\r\n            viewSlot: new aurelia_templating__WEBPACK_IMPORTED_MODULE_3__[\"ViewSlot\"](host, true),\r\n            host: host\r\n        };\r\n    };\r\n    DialogService.prototype.ensureViewModel = function (compositionContext) {\r\n        if (typeof compositionContext.viewModel === 'object') {\r\n            return Promise.resolve(compositionContext);\r\n        }\r\n        return this.compositionEngine.ensureViewModel(compositionContext);\r\n    };\r\n    DialogService.prototype._cancelOperation = function (rejectOnCancel) {\r\n        if (!rejectOnCancel) {\r\n            return { wasCancelled: true };\r\n        }\r\n        throw Object(_chunk_js__WEBPACK_IMPORTED_MODULE_0__[\"b\"])();\r\n    };\r\n    DialogService.prototype.composeAndShowDialog = function (compositionContext, dialogController) {\r\n        var _this = this;\r\n        if (!compositionContext.viewModel) {\r\n            compositionContext.bindingContext = { controller: dialogController };\r\n        }\r\n        return this.compositionEngine\r\n            .compose(compositionContext)\r\n            .then(function (controller) {\r\n            dialogController.controller = controller;\r\n            return dialogController.renderer\r\n                .showDialog(dialogController)\r\n                .then(function () {\r\n                _this.controllers.push(dialogController);\r\n                _this.hasActiveDialog = _this.hasOpenDialog = !!_this.controllers.length;\r\n            }, function (reason) {\r\n                if (controller.viewModel) {\r\n                    Object(_chunk_js__WEBPACK_IMPORTED_MODULE_0__[\"c\"])(controller.viewModel, 'deactivate');\r\n                }\r\n                return Promise.reject(reason);\r\n            });\r\n        });\r\n    };\r\n    DialogService.prototype.createSettings = function (settings) {\r\n        settings = Object.assign({}, this.defaultSettings, settings);\r\n        if (typeof settings.keyboard !== 'boolean' && !settings.keyboard) {\r\n            settings.keyboard = !settings.lock;\r\n        }\r\n        if (typeof settings.overlayDismiss !== 'boolean') {\r\n            settings.overlayDismiss = !settings.lock;\r\n        }\r\n        Object.defineProperty(settings, 'rejectOnCancel', {\r\n            writable: false,\r\n            configurable: true,\r\n            enumerable: true\r\n        });\r\n        this.validateSettings(settings);\r\n        return settings;\r\n    };\r\n    DialogService.prototype.open = function (settings) {\r\n        var _this = this;\r\n        if (settings === void 0) { settings = {}; }\r\n        settings = this.createSettings(settings);\r\n        var childContainer = settings.childContainer || this.container.createChild();\r\n        var resolveCloseResult;\r\n        var rejectCloseResult;\r\n        var closeResult = new Promise(function (resolve, reject) {\r\n            resolveCloseResult = resolve;\r\n            rejectCloseResult = reject;\r\n        });\r\n        var dialogController = childContainer.invoke(_chunk_js__WEBPACK_IMPORTED_MODULE_0__[\"d\"], [settings, resolveCloseResult, rejectCloseResult]);\r\n        childContainer.registerInstance(_chunk_js__WEBPACK_IMPORTED_MODULE_0__[\"d\"], dialogController);\r\n        closeResult.then(function () {\r\n            removeController(_this, dialogController);\r\n        }, function () {\r\n            removeController(_this, dialogController);\r\n        });\r\n        var compositionContext = this.createCompositionContext(childContainer, dialogController.renderer.getDialogContainer(), dialogController.settings);\r\n        var openResult = this.ensureViewModel(compositionContext).then(function (compositionContext) {\r\n            if (!compositionContext.viewModel) {\r\n                return true;\r\n            }\r\n            return Object(_chunk_js__WEBPACK_IMPORTED_MODULE_0__[\"c\"])(compositionContext.viewModel, 'canActivate', dialogController.settings.model);\r\n        }).then(function (canActivate) {\r\n            if (!canActivate) {\r\n                return _this._cancelOperation(dialogController.settings.rejectOnCancel);\r\n            }\r\n            return _this.composeAndShowDialog(compositionContext, dialogController)\r\n                .then(function () { return ({ controller: dialogController, closeResult: closeResult, wasCancelled: false }); });\r\n        });\r\n        return asDialogOpenPromise(openResult);\r\n    };\r\n    DialogService.prototype.closeAll = function () {\r\n        return Promise.all(this.controllers.slice(0).map(function (controller) {\r\n            if (!controller.settings.rejectOnCancel) {\r\n                return controller.cancel().then(function (result) {\r\n                    if (result.wasCancelled) {\r\n                        return controller;\r\n                    }\r\n                    return null;\r\n                });\r\n            }\r\n            return controller.cancel().then(function () { return null; }).catch(function (reason) {\r\n                if (reason.wasCancelled) {\r\n                    return controller;\r\n                }\r\n                throw reason;\r\n            });\r\n        })).then(function (unclosedControllers) { return unclosedControllers.filter(function (unclosed) { return !!unclosed; }); });\r\n    };\r\n    DialogService.inject = [aurelia_dependency_injection__WEBPACK_IMPORTED_MODULE_2__[\"Container\"], aurelia_templating__WEBPACK_IMPORTED_MODULE_3__[\"CompositionEngine\"], DefaultDialogSettings];\r\n    return DialogService;\r\n}());\r\nfunction removeController(service, dialogController) {\r\n    var i = service.controllers.indexOf(dialogController);\r\n    if (i !== -1) {\r\n        service.controllers.splice(i, 1);\r\n        service.hasActiveDialog = service.hasOpenDialog = !!service.controllers.length;\r\n    }\r\n}\n\nfunction configure(frameworkConfig, callback) {\r\n    var applyConfig = null;\r\n    var config = new DialogConfiguration(frameworkConfig, function (apply) { applyConfig = apply; });\r\n    if (typeof callback === 'function') {\r\n        callback(config);\r\n    }\r\n    else {\r\n        config.useDefaults();\r\n    }\r\n    return applyConfig();\r\n}\n\n\n//# sourceMappingURL=aurelia-dialog.js.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiYXVyZWxpYS1kaWFsb2cuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvYXVyZWxpYS1kaWFsb2cvZGlzdC9uYXRpdmUtbW9kdWxlcy9hdXJlbGlhLWRpYWxvZy5qcz9hNWIwIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IGEgYXMgUmVuZGVyZXIsIGIgYXMgY3JlYXRlRGlhbG9nQ2FuY2VsRXJyb3IsIGMgYXMgaW52b2tlTGlmZWN5Y2xlLCBkIGFzIERpYWxvZ0NvbnRyb2xsZXIgfSBmcm9tICcuL2NodW5rLmpzJztcbmV4cG9ydCB7IGQgYXMgRGlhbG9nQ29udHJvbGxlciwgYSBhcyBSZW5kZXJlciwgYiBhcyBjcmVhdGVEaWFsb2dDYW5jZWxFcnJvciwgZSBhcyBjcmVhdGVEaWFsb2dDbG9zZUVycm9yIH0gZnJvbSAnLi9jaHVuay5qcyc7XG5pbXBvcnQgeyBET00gfSBmcm9tICdhdXJlbGlhLXBhbCc7XG5pbXBvcnQgeyBDb250YWluZXIgfSBmcm9tICdhdXJlbGlhLWRlcGVuZGVuY3ktaW5qZWN0aW9uJztcbmltcG9ydCB7IFZpZXdTbG90LCBDb21wb3NpdGlvbkVuZ2luZSB9IGZyb20gJ2F1cmVsaWEtdGVtcGxhdGluZyc7XG5cbnZhciBEZWZhdWx0RGlhbG9nU2V0dGluZ3MgPSAoZnVuY3Rpb24gKCkge1xyXG4gICAgZnVuY3Rpb24gRGVmYXVsdERpYWxvZ1NldHRpbmdzKCkge1xyXG4gICAgICAgIHRoaXMubG9jayA9IHRydWU7XHJcbiAgICAgICAgdGhpcy5zdGFydGluZ1pJbmRleCA9IDEwMDA7XHJcbiAgICAgICAgdGhpcy5jZW50ZXJIb3Jpem9udGFsT25seSA9IGZhbHNlO1xyXG4gICAgICAgIHRoaXMucmVqZWN0T25DYW5jZWwgPSBmYWxzZTtcclxuICAgICAgICB0aGlzLmlnbm9yZVRyYW5zaXRpb25zID0gZmFsc2U7XHJcbiAgICAgICAgdGhpcy5yZXN0b3JlRm9jdXMgPSBmdW5jdGlvbiAobGFzdEFjdGl2ZUVsZW1lbnQpIHsgcmV0dXJuIGxhc3RBY3RpdmVFbGVtZW50LmZvY3VzKCk7IH07XHJcbiAgICB9XHJcbiAgICByZXR1cm4gRGVmYXVsdERpYWxvZ1NldHRpbmdzO1xyXG59KCkpO1xuXG52YXIgUkVOREVSUkVSUyA9IHtcclxuICAgIHV4OiBmdW5jdGlvbiAoKSB7IHJldHVybiBpbXBvcnQoJy4vdXgtZGlhbG9nLXJlbmRlcmVyLmpzJykudGhlbihmdW5jdGlvbiAobSkgeyByZXR1cm4gbS5EaWFsb2dSZW5kZXJlcjsgfSk7IH0sXHJcbiAgICBuYXRpdmU6IGZ1bmN0aW9uICgpIHsgcmV0dXJuIGltcG9ydCgnLi9uYXRpdmUtZGlhbG9nLXJlbmRlcmVyLmpzJykudGhlbihmdW5jdGlvbiAobSkgeyByZXR1cm4gbS5OYXRpdmVEaWFsb2dSZW5kZXJlcjsgfSk7IH1cclxufTtcclxudmFyIERFRkFVTFRfUkVTT1VSQ0VTID0ge1xyXG4gICAgJ3V4LWRpYWxvZyc6IGZ1bmN0aW9uICgpIHsgcmV0dXJuIGltcG9ydCgnLi91eC1kaWFsb2cuanMnKS50aGVuKGZ1bmN0aW9uIChtKSB7IHJldHVybiBtLlV4RGlhbG9nOyB9KTsgfSxcclxuICAgICd1eC1kaWFsb2ctaGVhZGVyJzogZnVuY3Rpb24gKCkgeyByZXR1cm4gaW1wb3J0KCcuL3V4LWRpYWxvZy1oZWFkZXIuanMnKS50aGVuKGZ1bmN0aW9uIChtKSB7IHJldHVybiBtLlV4RGlhbG9nSGVhZGVyOyB9KTsgfSxcclxuICAgICd1eC1kaWFsb2ctYm9keSc6IGZ1bmN0aW9uICgpIHsgcmV0dXJuIGltcG9ydCgnLi91eC1kaWFsb2ctYm9keS5qcycpLnRoZW4oZnVuY3Rpb24gKG0pIHsgcmV0dXJuIG0uVXhEaWFsb2dCb2R5OyB9KTsgfSxcclxuICAgICd1eC1kaWFsb2ctZm9vdGVyJzogZnVuY3Rpb24gKCkgeyByZXR1cm4gaW1wb3J0KCcuL3V4LWRpYWxvZy1mb290ZXIuanMnKS50aGVuKGZ1bmN0aW9uIChtKSB7IHJldHVybiBtLlV4RGlhbG9nRm9vdGVyOyB9KTsgfSxcclxuICAgICdhdHRhY2gtZm9jdXMnOiBmdW5jdGlvbiAoKSB7IHJldHVybiBpbXBvcnQoJy4vYXR0YWNoLWZvY3VzLmpzJykudGhlbihmdW5jdGlvbiAobSkgeyByZXR1cm4gbS5BdHRhY2hGb2N1czsgfSk7IH1cclxufTtcclxudmFyIERFRkFVTFRfQ1NTX1RFWFQgPSBmdW5jdGlvbiAoKSB7IHJldHVybiBpbXBvcnQoJy4vZGVmYXVsdC1zdHlsZXMuanMnKS50aGVuKGZ1bmN0aW9uIChjc3NNKSB7IHJldHVybiBjc3NNWydkZWZhdWx0J107IH0pOyB9O1xyXG52YXIgRGlhbG9nQ29uZmlndXJhdGlvbiA9IChmdW5jdGlvbiAoKSB7XHJcbiAgICBmdW5jdGlvbiBEaWFsb2dDb25maWd1cmF0aW9uKGZyYW1ld29ya0NvbmZpZ3VyYXRpb24sIGFwcGx5U2V0dGVyKSB7XHJcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcclxuICAgICAgICB0aGlzLnJlbmRlcmVyID0gJ3V4JztcclxuICAgICAgICB0aGlzLmNzc1RleHQgPSBERUZBVUxUX0NTU19URVhUO1xyXG4gICAgICAgIHRoaXMucmVzb3VyY2VzID0gW107XHJcbiAgICAgICAgdGhpcy5md0NvbmZpZyA9IGZyYW1ld29ya0NvbmZpZ3VyYXRpb247XHJcbiAgICAgICAgdGhpcy5zZXR0aW5ncyA9IGZyYW1ld29ya0NvbmZpZ3VyYXRpb24uY29udGFpbmVyLmdldChEZWZhdWx0RGlhbG9nU2V0dGluZ3MpO1xyXG4gICAgICAgIGFwcGx5U2V0dGVyKGZ1bmN0aW9uICgpIHsgcmV0dXJuIF90aGlzLl9hcHBseSgpOyB9KTtcclxuICAgIH1cclxuICAgIERpYWxvZ0NvbmZpZ3VyYXRpb24ucHJvdG90eXBlLl9hcHBseSA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xyXG4gICAgICAgIHZhciByZW5kZXJlciA9IHRoaXMucmVuZGVyZXI7XHJcbiAgICAgICAgdmFyIGNzc1RleHQgPSB0aGlzLmNzc1RleHQ7XHJcbiAgICAgICAgcmV0dXJuIFByb21pc2VcclxuICAgICAgICAgICAgLmFsbChbXHJcbiAgICAgICAgICAgIHR5cGVvZiByZW5kZXJlciA9PT0gJ3N0cmluZycgPyBSRU5ERVJSRVJTW3JlbmRlcmVyXSgpIDogcmVuZGVyZXIsXHJcbiAgICAgICAgICAgIGNzc1RleHRcclxuICAgICAgICAgICAgICAgID8gdHlwZW9mIGNzc1RleHQgPT09ICdzdHJpbmcnXHJcbiAgICAgICAgICAgICAgICAgICAgPyBjc3NUZXh0XHJcbiAgICAgICAgICAgICAgICAgICAgOiBjc3NUZXh0KClcclxuICAgICAgICAgICAgICAgIDogJydcclxuICAgICAgICBdKVxyXG4gICAgICAgICAgICAudGhlbihmdW5jdGlvbiAoX2EpIHtcclxuICAgICAgICAgICAgdmFyIHJlbmRlcmVySW1wbCA9IF9hWzBdLCAkY3NzVGV4dCA9IF9hWzFdO1xyXG4gICAgICAgICAgICB2YXIgZndDb25maWcgPSBfdGhpcy5md0NvbmZpZztcclxuICAgICAgICAgICAgZndDb25maWcudHJhbnNpZW50KFJlbmRlcmVyLCByZW5kZXJlckltcGwpO1xyXG4gICAgICAgICAgICBpZiAoJGNzc1RleHQpIHtcclxuICAgICAgICAgICAgICAgIERPTS5pbmplY3RTdHlsZXMoJGNzc1RleHQpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHJldHVybiBQcm9taXNlXHJcbiAgICAgICAgICAgICAgICAuYWxsKF90aGlzLnJlc291cmNlcy5tYXAoZnVuY3Rpb24gKG5hbWUpIHsgcmV0dXJuIERFRkFVTFRfUkVTT1VSQ0VTW25hbWVdKCk7IH0pKVxyXG4gICAgICAgICAgICAgICAgLnRoZW4oZnVuY3Rpb24gKG1vZHVsZXMpIHtcclxuICAgICAgICAgICAgICAgIGZ3Q29uZmlnLmdsb2JhbFJlc291cmNlcyhtb2R1bGVzKTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9O1xyXG4gICAgRGlhbG9nQ29uZmlndXJhdGlvbi5wcm90b3R5cGUudXNlRGVmYXVsdHMgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXNcclxuICAgICAgICAgICAgLnVzZVJlbmRlcmVyKCd1eCcpXHJcbiAgICAgICAgICAgIC51c2VDU1MoREVGQVVMVF9DU1NfVEVYVClcclxuICAgICAgICAgICAgLnVzZVN0YW5kYXJkUmVzb3VyY2VzKCk7XHJcbiAgICB9O1xyXG4gICAgRGlhbG9nQ29uZmlndXJhdGlvbi5wcm90b3R5cGUudXNlU3RhbmRhcmRSZXNvdXJjZXMgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgT2JqZWN0LmtleXMoREVGQVVMVF9SRVNPVVJDRVMpLmZvckVhY2godGhpcy51c2VSZXNvdXJjZSwgdGhpcyk7XHJcbiAgICAgICAgcmV0dXJuIHRoaXM7XHJcbiAgICB9O1xyXG4gICAgRGlhbG9nQ29uZmlndXJhdGlvbi5wcm90b3R5cGUudXNlUmVzb3VyY2UgPSBmdW5jdGlvbiAocmVzb3VyY2VOYW1lKSB7XHJcbiAgICAgICAgdGhpcy5yZXNvdXJjZXMucHVzaChyZXNvdXJjZU5hbWUpO1xyXG4gICAgICAgIHJldHVybiB0aGlzO1xyXG4gICAgfTtcclxuICAgIERpYWxvZ0NvbmZpZ3VyYXRpb24ucHJvdG90eXBlLnVzZVJlbmRlcmVyID0gZnVuY3Rpb24gKHJlbmRlcmVyLCBzZXR0aW5ncykge1xyXG4gICAgICAgIHRoaXMucmVuZGVyZXIgPSByZW5kZXJlcjtcclxuICAgICAgICBpZiAoc2V0dGluZ3MpIHtcclxuICAgICAgICAgICAgT2JqZWN0LmFzc2lnbih0aGlzLnNldHRpbmdzLCBzZXR0aW5ncyk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiB0aGlzO1xyXG4gICAgfTtcclxuICAgIERpYWxvZ0NvbmZpZ3VyYXRpb24ucHJvdG90eXBlLnVzZUNTUyA9IGZ1bmN0aW9uIChjc3NUZXh0KSB7XHJcbiAgICAgICAgdGhpcy5jc3NUZXh0ID0gY3NzVGV4dDtcclxuICAgICAgICByZXR1cm4gdGhpcztcclxuICAgIH07XHJcbiAgICByZXR1cm4gRGlhbG9nQ29uZmlndXJhdGlvbjtcclxufSgpKTtcblxuZnVuY3Rpb24gd2hlbkNsb3NlZChvbmZ1bGZpbGxlZCwgb25yZWplY3RlZCkge1xyXG4gICAgcmV0dXJuIHRoaXMudGhlbihmdW5jdGlvbiAocikgeyByZXR1cm4gci53YXNDYW5jZWxsZWQgPyByIDogci5jbG9zZVJlc3VsdDsgfSkudGhlbihvbmZ1bGZpbGxlZCwgb25yZWplY3RlZCk7XHJcbn1cclxuZnVuY3Rpb24gYXNEaWFsb2dPcGVuUHJvbWlzZShwcm9taXNlKSB7XHJcbiAgICBwcm9taXNlLndoZW5DbG9zZWQgPSB3aGVuQ2xvc2VkO1xyXG4gICAgcmV0dXJuIHByb21pc2U7XHJcbn1cclxudmFyIERpYWxvZ1NlcnZpY2UgPSAoZnVuY3Rpb24gKCkge1xyXG4gICAgZnVuY3Rpb24gRGlhbG9nU2VydmljZShjb250YWluZXIsIGNvbXBvc2l0aW9uRW5naW5lLCBkZWZhdWx0U2V0dGluZ3MpIHtcclxuICAgICAgICB0aGlzLmNvbnRyb2xsZXJzID0gW107XHJcbiAgICAgICAgdGhpcy5oYXNPcGVuRGlhbG9nID0gZmFsc2U7XHJcbiAgICAgICAgdGhpcy5oYXNBY3RpdmVEaWFsb2cgPSBmYWxzZTtcclxuICAgICAgICB0aGlzLmNvbnRhaW5lciA9IGNvbnRhaW5lcjtcclxuICAgICAgICB0aGlzLmNvbXBvc2l0aW9uRW5naW5lID0gY29tcG9zaXRpb25FbmdpbmU7XHJcbiAgICAgICAgdGhpcy5kZWZhdWx0U2V0dGluZ3MgPSBkZWZhdWx0U2V0dGluZ3M7XHJcbiAgICB9XHJcbiAgICBEaWFsb2dTZXJ2aWNlLnByb3RvdHlwZS52YWxpZGF0ZVNldHRpbmdzID0gZnVuY3Rpb24gKHNldHRpbmdzKSB7XHJcbiAgICAgICAgaWYgKCFzZXR0aW5ncy52aWV3TW9kZWwgJiYgIXNldHRpbmdzLnZpZXcpIHtcclxuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdJbnZhbGlkIERpYWxvZyBTZXR0aW5ncy4gWW91IG11c3QgcHJvdmlkZSBcInZpZXdNb2RlbFwiLCBcInZpZXdcIiBvciBib3RoLicpO1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcbiAgICBEaWFsb2dTZXJ2aWNlLnByb3RvdHlwZS5jcmVhdGVDb21wb3NpdGlvbkNvbnRleHQgPSBmdW5jdGlvbiAoY2hpbGRDb250YWluZXIsIGhvc3QsIHNldHRpbmdzKSB7XHJcbiAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgY29udGFpbmVyOiBjaGlsZENvbnRhaW5lci5wYXJlbnQsXHJcbiAgICAgICAgICAgIGNoaWxkQ29udGFpbmVyOiBjaGlsZENvbnRhaW5lcixcclxuICAgICAgICAgICAgYmluZGluZ0NvbnRleHQ6IG51bGwsXHJcbiAgICAgICAgICAgIHZpZXdSZXNvdXJjZXM6IG51bGwsXHJcbiAgICAgICAgICAgIG1vZGVsOiBzZXR0aW5ncy5tb2RlbCxcclxuICAgICAgICAgICAgdmlldzogc2V0dGluZ3MudmlldyxcclxuICAgICAgICAgICAgdmlld01vZGVsOiBzZXR0aW5ncy52aWV3TW9kZWwsXHJcbiAgICAgICAgICAgIHZpZXdTbG90OiBuZXcgVmlld1Nsb3QoaG9zdCwgdHJ1ZSksXHJcbiAgICAgICAgICAgIGhvc3Q6IGhvc3RcclxuICAgICAgICB9O1xyXG4gICAgfTtcclxuICAgIERpYWxvZ1NlcnZpY2UucHJvdG90eXBlLmVuc3VyZVZpZXdNb2RlbCA9IGZ1bmN0aW9uIChjb21wb3NpdGlvbkNvbnRleHQpIHtcclxuICAgICAgICBpZiAodHlwZW9mIGNvbXBvc2l0aW9uQ29udGV4dC52aWV3TW9kZWwgPT09ICdvYmplY3QnKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUoY29tcG9zaXRpb25Db250ZXh0KTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuY29tcG9zaXRpb25FbmdpbmUuZW5zdXJlVmlld01vZGVsKGNvbXBvc2l0aW9uQ29udGV4dCk7XHJcbiAgICB9O1xyXG4gICAgRGlhbG9nU2VydmljZS5wcm90b3R5cGUuX2NhbmNlbE9wZXJhdGlvbiA9IGZ1bmN0aW9uIChyZWplY3RPbkNhbmNlbCkge1xyXG4gICAgICAgIGlmICghcmVqZWN0T25DYW5jZWwpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHsgd2FzQ2FuY2VsbGVkOiB0cnVlIH07XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRocm93IGNyZWF0ZURpYWxvZ0NhbmNlbEVycm9yKCk7XHJcbiAgICB9O1xyXG4gICAgRGlhbG9nU2VydmljZS5wcm90b3R5cGUuY29tcG9zZUFuZFNob3dEaWFsb2cgPSBmdW5jdGlvbiAoY29tcG9zaXRpb25Db250ZXh0LCBkaWFsb2dDb250cm9sbGVyKSB7XHJcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcclxuICAgICAgICBpZiAoIWNvbXBvc2l0aW9uQ29udGV4dC52aWV3TW9kZWwpIHtcclxuICAgICAgICAgICAgY29tcG9zaXRpb25Db250ZXh0LmJpbmRpbmdDb250ZXh0ID0geyBjb250cm9sbGVyOiBkaWFsb2dDb250cm9sbGVyIH07XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiB0aGlzLmNvbXBvc2l0aW9uRW5naW5lXHJcbiAgICAgICAgICAgIC5jb21wb3NlKGNvbXBvc2l0aW9uQ29udGV4dClcclxuICAgICAgICAgICAgLnRoZW4oZnVuY3Rpb24gKGNvbnRyb2xsZXIpIHtcclxuICAgICAgICAgICAgZGlhbG9nQ29udHJvbGxlci5jb250cm9sbGVyID0gY29udHJvbGxlcjtcclxuICAgICAgICAgICAgcmV0dXJuIGRpYWxvZ0NvbnRyb2xsZXIucmVuZGVyZXJcclxuICAgICAgICAgICAgICAgIC5zaG93RGlhbG9nKGRpYWxvZ0NvbnRyb2xsZXIpXHJcbiAgICAgICAgICAgICAgICAudGhlbihmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICBfdGhpcy5jb250cm9sbGVycy5wdXNoKGRpYWxvZ0NvbnRyb2xsZXIpO1xyXG4gICAgICAgICAgICAgICAgX3RoaXMuaGFzQWN0aXZlRGlhbG9nID0gX3RoaXMuaGFzT3BlbkRpYWxvZyA9ICEhX3RoaXMuY29udHJvbGxlcnMubGVuZ3RoO1xyXG4gICAgICAgICAgICB9LCBmdW5jdGlvbiAocmVhc29uKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoY29udHJvbGxlci52aWV3TW9kZWwpIHtcclxuICAgICAgICAgICAgICAgICAgICBpbnZva2VMaWZlY3ljbGUoY29udHJvbGxlci52aWV3TW9kZWwsICdkZWFjdGl2YXRlJyk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QocmVhc29uKTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9O1xyXG4gICAgRGlhbG9nU2VydmljZS5wcm90b3R5cGUuY3JlYXRlU2V0dGluZ3MgPSBmdW5jdGlvbiAoc2V0dGluZ3MpIHtcclxuICAgICAgICBzZXR0aW5ncyA9IE9iamVjdC5hc3NpZ24oe30sIHRoaXMuZGVmYXVsdFNldHRpbmdzLCBzZXR0aW5ncyk7XHJcbiAgICAgICAgaWYgKHR5cGVvZiBzZXR0aW5ncy5rZXlib2FyZCAhPT0gJ2Jvb2xlYW4nICYmICFzZXR0aW5ncy5rZXlib2FyZCkge1xyXG4gICAgICAgICAgICBzZXR0aW5ncy5rZXlib2FyZCA9ICFzZXR0aW5ncy5sb2NrO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAodHlwZW9mIHNldHRpbmdzLm92ZXJsYXlEaXNtaXNzICE9PSAnYm9vbGVhbicpIHtcclxuICAgICAgICAgICAgc2V0dGluZ3Mub3ZlcmxheURpc21pc3MgPSAhc2V0dGluZ3MubG9jaztcclxuICAgICAgICB9XHJcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHNldHRpbmdzLCAncmVqZWN0T25DYW5jZWwnLCB7XHJcbiAgICAgICAgICAgIHdyaXRhYmxlOiBmYWxzZSxcclxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxyXG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlXHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgdGhpcy52YWxpZGF0ZVNldHRpbmdzKHNldHRpbmdzKTtcclxuICAgICAgICByZXR1cm4gc2V0dGluZ3M7XHJcbiAgICB9O1xyXG4gICAgRGlhbG9nU2VydmljZS5wcm90b3R5cGUub3BlbiA9IGZ1bmN0aW9uIChzZXR0aW5ncykge1xyXG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XHJcbiAgICAgICAgaWYgKHNldHRpbmdzID09PSB2b2lkIDApIHsgc2V0dGluZ3MgPSB7fTsgfVxyXG4gICAgICAgIHNldHRpbmdzID0gdGhpcy5jcmVhdGVTZXR0aW5ncyhzZXR0aW5ncyk7XHJcbiAgICAgICAgdmFyIGNoaWxkQ29udGFpbmVyID0gc2V0dGluZ3MuY2hpbGRDb250YWluZXIgfHwgdGhpcy5jb250YWluZXIuY3JlYXRlQ2hpbGQoKTtcclxuICAgICAgICB2YXIgcmVzb2x2ZUNsb3NlUmVzdWx0O1xyXG4gICAgICAgIHZhciByZWplY3RDbG9zZVJlc3VsdDtcclxuICAgICAgICB2YXIgY2xvc2VSZXN1bHQgPSBuZXcgUHJvbWlzZShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7XHJcbiAgICAgICAgICAgIHJlc29sdmVDbG9zZVJlc3VsdCA9IHJlc29sdmU7XHJcbiAgICAgICAgICAgIHJlamVjdENsb3NlUmVzdWx0ID0gcmVqZWN0O1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIHZhciBkaWFsb2dDb250cm9sbGVyID0gY2hpbGRDb250YWluZXIuaW52b2tlKERpYWxvZ0NvbnRyb2xsZXIsIFtzZXR0aW5ncywgcmVzb2x2ZUNsb3NlUmVzdWx0LCByZWplY3RDbG9zZVJlc3VsdF0pO1xyXG4gICAgICAgIGNoaWxkQ29udGFpbmVyLnJlZ2lzdGVySW5zdGFuY2UoRGlhbG9nQ29udHJvbGxlciwgZGlhbG9nQ29udHJvbGxlcik7XHJcbiAgICAgICAgY2xvc2VSZXN1bHQudGhlbihmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHJlbW92ZUNvbnRyb2xsZXIoX3RoaXMsIGRpYWxvZ0NvbnRyb2xsZXIpO1xyXG4gICAgICAgIH0sIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgcmVtb3ZlQ29udHJvbGxlcihfdGhpcywgZGlhbG9nQ29udHJvbGxlcik7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgdmFyIGNvbXBvc2l0aW9uQ29udGV4dCA9IHRoaXMuY3JlYXRlQ29tcG9zaXRpb25Db250ZXh0KGNoaWxkQ29udGFpbmVyLCBkaWFsb2dDb250cm9sbGVyLnJlbmRlcmVyLmdldERpYWxvZ0NvbnRhaW5lcigpLCBkaWFsb2dDb250cm9sbGVyLnNldHRpbmdzKTtcclxuICAgICAgICB2YXIgb3BlblJlc3VsdCA9IHRoaXMuZW5zdXJlVmlld01vZGVsKGNvbXBvc2l0aW9uQ29udGV4dCkudGhlbihmdW5jdGlvbiAoY29tcG9zaXRpb25Db250ZXh0KSB7XHJcbiAgICAgICAgICAgIGlmICghY29tcG9zaXRpb25Db250ZXh0LnZpZXdNb2RlbCkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgcmV0dXJuIGludm9rZUxpZmVjeWNsZShjb21wb3NpdGlvbkNvbnRleHQudmlld01vZGVsLCAnY2FuQWN0aXZhdGUnLCBkaWFsb2dDb250cm9sbGVyLnNldHRpbmdzLm1vZGVsKTtcclxuICAgICAgICB9KS50aGVuKGZ1bmN0aW9uIChjYW5BY3RpdmF0ZSkge1xyXG4gICAgICAgICAgICBpZiAoIWNhbkFjdGl2YXRlKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gX3RoaXMuX2NhbmNlbE9wZXJhdGlvbihkaWFsb2dDb250cm9sbGVyLnNldHRpbmdzLnJlamVjdE9uQ2FuY2VsKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICByZXR1cm4gX3RoaXMuY29tcG9zZUFuZFNob3dEaWFsb2coY29tcG9zaXRpb25Db250ZXh0LCBkaWFsb2dDb250cm9sbGVyKVxyXG4gICAgICAgICAgICAgICAgLnRoZW4oZnVuY3Rpb24gKCkgeyByZXR1cm4gKHsgY29udHJvbGxlcjogZGlhbG9nQ29udHJvbGxlciwgY2xvc2VSZXN1bHQ6IGNsb3NlUmVzdWx0LCB3YXNDYW5jZWxsZWQ6IGZhbHNlIH0pOyB9KTtcclxuICAgICAgICB9KTtcclxuICAgICAgICByZXR1cm4gYXNEaWFsb2dPcGVuUHJvbWlzZShvcGVuUmVzdWx0KTtcclxuICAgIH07XHJcbiAgICBEaWFsb2dTZXJ2aWNlLnByb3RvdHlwZS5jbG9zZUFsbCA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICByZXR1cm4gUHJvbWlzZS5hbGwodGhpcy5jb250cm9sbGVycy5zbGljZSgwKS5tYXAoZnVuY3Rpb24gKGNvbnRyb2xsZXIpIHtcclxuICAgICAgICAgICAgaWYgKCFjb250cm9sbGVyLnNldHRpbmdzLnJlamVjdE9uQ2FuY2VsKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gY29udHJvbGxlci5jYW5jZWwoKS50aGVuKGZ1bmN0aW9uIChyZXN1bHQpIHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAocmVzdWx0Lndhc0NhbmNlbGxlZCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gY29udHJvbGxlcjtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICByZXR1cm4gY29udHJvbGxlci5jYW5jZWwoKS50aGVuKGZ1bmN0aW9uICgpIHsgcmV0dXJuIG51bGw7IH0pLmNhdGNoKGZ1bmN0aW9uIChyZWFzb24pIHtcclxuICAgICAgICAgICAgICAgIGlmIChyZWFzb24ud2FzQ2FuY2VsbGVkKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGNvbnRyb2xsZXI7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB0aHJvdyByZWFzb247XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH0pKS50aGVuKGZ1bmN0aW9uICh1bmNsb3NlZENvbnRyb2xsZXJzKSB7IHJldHVybiB1bmNsb3NlZENvbnRyb2xsZXJzLmZpbHRlcihmdW5jdGlvbiAodW5jbG9zZWQpIHsgcmV0dXJuICEhdW5jbG9zZWQ7IH0pOyB9KTtcclxuICAgIH07XHJcbiAgICBEaWFsb2dTZXJ2aWNlLmluamVjdCA9IFtDb250YWluZXIsIENvbXBvc2l0aW9uRW5naW5lLCBEZWZhdWx0RGlhbG9nU2V0dGluZ3NdO1xyXG4gICAgcmV0dXJuIERpYWxvZ1NlcnZpY2U7XHJcbn0oKSk7XHJcbmZ1bmN0aW9uIHJlbW92ZUNvbnRyb2xsZXIoc2VydmljZSwgZGlhbG9nQ29udHJvbGxlcikge1xyXG4gICAgdmFyIGkgPSBzZXJ2aWNlLmNvbnRyb2xsZXJzLmluZGV4T2YoZGlhbG9nQ29udHJvbGxlcik7XHJcbiAgICBpZiAoaSAhPT0gLTEpIHtcclxuICAgICAgICBzZXJ2aWNlLmNvbnRyb2xsZXJzLnNwbGljZShpLCAxKTtcclxuICAgICAgICBzZXJ2aWNlLmhhc0FjdGl2ZURpYWxvZyA9IHNlcnZpY2UuaGFzT3BlbkRpYWxvZyA9ICEhc2VydmljZS5jb250cm9sbGVycy5sZW5ndGg7XHJcbiAgICB9XHJcbn1cblxuZnVuY3Rpb24gY29uZmlndXJlKGZyYW1ld29ya0NvbmZpZywgY2FsbGJhY2spIHtcclxuICAgIHZhciBhcHBseUNvbmZpZyA9IG51bGw7XHJcbiAgICB2YXIgY29uZmlnID0gbmV3IERpYWxvZ0NvbmZpZ3VyYXRpb24oZnJhbWV3b3JrQ29uZmlnLCBmdW5jdGlvbiAoYXBwbHkpIHsgYXBwbHlDb25maWcgPSBhcHBseTsgfSk7XHJcbiAgICBpZiAodHlwZW9mIGNhbGxiYWNrID09PSAnZnVuY3Rpb24nKSB7XHJcbiAgICAgICAgY2FsbGJhY2soY29uZmlnKTtcclxuICAgIH1cclxuICAgIGVsc2Uge1xyXG4gICAgICAgIGNvbmZpZy51c2VEZWZhdWx0cygpO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIGFwcGx5Q29uZmlnKCk7XHJcbn1cblxuZXhwb3J0IHsgRGVmYXVsdERpYWxvZ1NldHRpbmdzLCBEaWFsb2dDb25maWd1cmF0aW9uLCBEaWFsb2dTZXJ2aWNlLCBjb25maWd1cmUgfTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWF1cmVsaWEtZGlhbG9nLmpzLm1hcFxuIl0sIm1hcHBpbmdzIjoiQUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOyIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///aurelia-dialog\n");

/***/ }),

/***/ "aurelia-event-aggregator":
/*!***********************************************************************************************!*\
  !*** ./node_modules/aurelia-event-aggregator/dist/native-modules/aurelia-event-aggregator.js ***!
  \***********************************************************************************************/
/*! exports provided: EventAggregator, includeEventsIn, configure */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"EventAggregator\", function() { return EventAggregator; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"includeEventsIn\", function() { return includeEventsIn; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"configure\", function() { return configure; });\n/* harmony import */ var aurelia_logging__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! aurelia-logging */ \"MP1E\");\n\n\n\n\nvar logger = aurelia_logging__WEBPACK_IMPORTED_MODULE_0__[\"getLogger\"]('event-aggregator');\n\nvar Handler = function () {\n  function Handler(messageType, callback) {\n    \n\n    this.messageType = messageType;\n    this.callback = callback;\n  }\n\n  Handler.prototype.handle = function handle(message) {\n    if (message instanceof this.messageType) {\n      this.callback.call(null, message);\n    }\n  };\n\n  return Handler;\n}();\n\nfunction invokeCallback(callback, data, event) {\n  try {\n    callback(data, event);\n  } catch (e) {\n    logger.error(e);\n  }\n}\n\nfunction invokeHandler(handler, data) {\n  try {\n    handler.handle(data);\n  } catch (e) {\n    logger.error(e);\n  }\n}\n\nvar EventAggregator = function () {\n  function EventAggregator() {\n    \n\n    this.eventLookup = {};\n    this.messageHandlers = [];\n  }\n\n  EventAggregator.prototype.publish = function publish(event, data) {\n    var subscribers = void 0;\n    var i = void 0;\n\n    if (!event) {\n      throw new Error('Event was invalid.');\n    }\n\n    if (typeof event === 'string') {\n      subscribers = this.eventLookup[event];\n      if (subscribers) {\n        subscribers = subscribers.slice();\n        i = subscribers.length;\n\n        while (i--) {\n          invokeCallback(subscribers[i], data, event);\n        }\n      }\n    } else {\n      subscribers = this.messageHandlers.slice();\n      i = subscribers.length;\n\n      while (i--) {\n        invokeHandler(subscribers[i], event);\n      }\n    }\n  };\n\n  EventAggregator.prototype.subscribe = function subscribe(event, callback) {\n    var handler = void 0;\n    var subscribers = void 0;\n\n    if (!event) {\n      throw new Error('Event channel/type was invalid.');\n    }\n\n    if (typeof event === 'string') {\n      handler = callback;\n      subscribers = this.eventLookup[event] || (this.eventLookup[event] = []);\n    } else {\n      handler = new Handler(event, callback);\n      subscribers = this.messageHandlers;\n    }\n\n    subscribers.push(handler);\n\n    return {\n      dispose: function dispose() {\n        var idx = subscribers.indexOf(handler);\n        if (idx !== -1) {\n          subscribers.splice(idx, 1);\n        }\n      }\n    };\n  };\n\n  EventAggregator.prototype.subscribeOnce = function subscribeOnce(event, callback) {\n    var sub = this.subscribe(event, function (a, b) {\n      sub.dispose();\n      return callback(a, b);\n    });\n\n    return sub;\n  };\n\n  return EventAggregator;\n}();\n\nfunction includeEventsIn(obj) {\n  var ea = new EventAggregator();\n\n  obj.subscribeOnce = function (event, callback) {\n    return ea.subscribeOnce(event, callback);\n  };\n\n  obj.subscribe = function (event, callback) {\n    return ea.subscribe(event, callback);\n  };\n\n  obj.publish = function (event, data) {\n    ea.publish(event, data);\n  };\n\n  return ea;\n}\n\nfunction configure(config) {\n  config.instance(EventAggregator, includeEventsIn(config.aurelia));\n}//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiYXVyZWxpYS1ldmVudC1hZ2dyZWdhdG9yLmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL2F1cmVsaWEtZXZlbnQtYWdncmVnYXRvci9kaXN0L25hdGl2ZS1tb2R1bGVzL2F1cmVsaWEtZXZlbnQtYWdncmVnYXRvci5qcz9jYTk1Il0sInNvdXJjZXNDb250ZW50IjpbIlxuXG5pbXBvcnQgKiBhcyBMb2dNYW5hZ2VyIGZyb20gJ2F1cmVsaWEtbG9nZ2luZyc7XG5cbnZhciBsb2dnZXIgPSBMb2dNYW5hZ2VyLmdldExvZ2dlcignZXZlbnQtYWdncmVnYXRvcicpO1xuXG52YXIgSGFuZGxlciA9IGZ1bmN0aW9uICgpIHtcbiAgZnVuY3Rpb24gSGFuZGxlcihtZXNzYWdlVHlwZSwgY2FsbGJhY2spIHtcbiAgICBcblxuICAgIHRoaXMubWVzc2FnZVR5cGUgPSBtZXNzYWdlVHlwZTtcbiAgICB0aGlzLmNhbGxiYWNrID0gY2FsbGJhY2s7XG4gIH1cblxuICBIYW5kbGVyLnByb3RvdHlwZS5oYW5kbGUgPSBmdW5jdGlvbiBoYW5kbGUobWVzc2FnZSkge1xuICAgIGlmIChtZXNzYWdlIGluc3RhbmNlb2YgdGhpcy5tZXNzYWdlVHlwZSkge1xuICAgICAgdGhpcy5jYWxsYmFjay5jYWxsKG51bGwsIG1lc3NhZ2UpO1xuICAgIH1cbiAgfTtcblxuICByZXR1cm4gSGFuZGxlcjtcbn0oKTtcblxuZnVuY3Rpb24gaW52b2tlQ2FsbGJhY2soY2FsbGJhY2ssIGRhdGEsIGV2ZW50KSB7XG4gIHRyeSB7XG4gICAgY2FsbGJhY2soZGF0YSwgZXZlbnQpO1xuICB9IGNhdGNoIChlKSB7XG4gICAgbG9nZ2VyLmVycm9yKGUpO1xuICB9XG59XG5cbmZ1bmN0aW9uIGludm9rZUhhbmRsZXIoaGFuZGxlciwgZGF0YSkge1xuICB0cnkge1xuICAgIGhhbmRsZXIuaGFuZGxlKGRhdGEpO1xuICB9IGNhdGNoIChlKSB7XG4gICAgbG9nZ2VyLmVycm9yKGUpO1xuICB9XG59XG5cbmV4cG9ydCB2YXIgRXZlbnRBZ2dyZWdhdG9yID0gZnVuY3Rpb24gKCkge1xuICBmdW5jdGlvbiBFdmVudEFnZ3JlZ2F0b3IoKSB7XG4gICAgXG5cbiAgICB0aGlzLmV2ZW50TG9va3VwID0ge307XG4gICAgdGhpcy5tZXNzYWdlSGFuZGxlcnMgPSBbXTtcbiAgfVxuXG4gIEV2ZW50QWdncmVnYXRvci5wcm90b3R5cGUucHVibGlzaCA9IGZ1bmN0aW9uIHB1Ymxpc2goZXZlbnQsIGRhdGEpIHtcbiAgICB2YXIgc3Vic2NyaWJlcnMgPSB2b2lkIDA7XG4gICAgdmFyIGkgPSB2b2lkIDA7XG5cbiAgICBpZiAoIWV2ZW50KSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ0V2ZW50IHdhcyBpbnZhbGlkLicpO1xuICAgIH1cblxuICAgIGlmICh0eXBlb2YgZXZlbnQgPT09ICdzdHJpbmcnKSB7XG4gICAgICBzdWJzY3JpYmVycyA9IHRoaXMuZXZlbnRMb29rdXBbZXZlbnRdO1xuICAgICAgaWYgKHN1YnNjcmliZXJzKSB7XG4gICAgICAgIHN1YnNjcmliZXJzID0gc3Vic2NyaWJlcnMuc2xpY2UoKTtcbiAgICAgICAgaSA9IHN1YnNjcmliZXJzLmxlbmd0aDtcblxuICAgICAgICB3aGlsZSAoaS0tKSB7XG4gICAgICAgICAgaW52b2tlQ2FsbGJhY2soc3Vic2NyaWJlcnNbaV0sIGRhdGEsIGV2ZW50KTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICBzdWJzY3JpYmVycyA9IHRoaXMubWVzc2FnZUhhbmRsZXJzLnNsaWNlKCk7XG4gICAgICBpID0gc3Vic2NyaWJlcnMubGVuZ3RoO1xuXG4gICAgICB3aGlsZSAoaS0tKSB7XG4gICAgICAgIGludm9rZUhhbmRsZXIoc3Vic2NyaWJlcnNbaV0sIGV2ZW50KTtcbiAgICAgIH1cbiAgICB9XG4gIH07XG5cbiAgRXZlbnRBZ2dyZWdhdG9yLnByb3RvdHlwZS5zdWJzY3JpYmUgPSBmdW5jdGlvbiBzdWJzY3JpYmUoZXZlbnQsIGNhbGxiYWNrKSB7XG4gICAgdmFyIGhhbmRsZXIgPSB2b2lkIDA7XG4gICAgdmFyIHN1YnNjcmliZXJzID0gdm9pZCAwO1xuXG4gICAgaWYgKCFldmVudCkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdFdmVudCBjaGFubmVsL3R5cGUgd2FzIGludmFsaWQuJyk7XG4gICAgfVxuXG4gICAgaWYgKHR5cGVvZiBldmVudCA9PT0gJ3N0cmluZycpIHtcbiAgICAgIGhhbmRsZXIgPSBjYWxsYmFjaztcbiAgICAgIHN1YnNjcmliZXJzID0gdGhpcy5ldmVudExvb2t1cFtldmVudF0gfHwgKHRoaXMuZXZlbnRMb29rdXBbZXZlbnRdID0gW10pO1xuICAgIH0gZWxzZSB7XG4gICAgICBoYW5kbGVyID0gbmV3IEhhbmRsZXIoZXZlbnQsIGNhbGxiYWNrKTtcbiAgICAgIHN1YnNjcmliZXJzID0gdGhpcy5tZXNzYWdlSGFuZGxlcnM7XG4gICAgfVxuXG4gICAgc3Vic2NyaWJlcnMucHVzaChoYW5kbGVyKTtcblxuICAgIHJldHVybiB7XG4gICAgICBkaXNwb3NlOiBmdW5jdGlvbiBkaXNwb3NlKCkge1xuICAgICAgICB2YXIgaWR4ID0gc3Vic2NyaWJlcnMuaW5kZXhPZihoYW5kbGVyKTtcbiAgICAgICAgaWYgKGlkeCAhPT0gLTEpIHtcbiAgICAgICAgICBzdWJzY3JpYmVycy5zcGxpY2UoaWR4LCAxKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH07XG4gIH07XG5cbiAgRXZlbnRBZ2dyZWdhdG9yLnByb3RvdHlwZS5zdWJzY3JpYmVPbmNlID0gZnVuY3Rpb24gc3Vic2NyaWJlT25jZShldmVudCwgY2FsbGJhY2spIHtcbiAgICB2YXIgc3ViID0gdGhpcy5zdWJzY3JpYmUoZXZlbnQsIGZ1bmN0aW9uIChhLCBiKSB7XG4gICAgICBzdWIuZGlzcG9zZSgpO1xuICAgICAgcmV0dXJuIGNhbGxiYWNrKGEsIGIpO1xuICAgIH0pO1xuXG4gICAgcmV0dXJuIHN1YjtcbiAgfTtcblxuICByZXR1cm4gRXZlbnRBZ2dyZWdhdG9yO1xufSgpO1xuXG5leHBvcnQgZnVuY3Rpb24gaW5jbHVkZUV2ZW50c0luKG9iaikge1xuICB2YXIgZWEgPSBuZXcgRXZlbnRBZ2dyZWdhdG9yKCk7XG5cbiAgb2JqLnN1YnNjcmliZU9uY2UgPSBmdW5jdGlvbiAoZXZlbnQsIGNhbGxiYWNrKSB7XG4gICAgcmV0dXJuIGVhLnN1YnNjcmliZU9uY2UoZXZlbnQsIGNhbGxiYWNrKTtcbiAgfTtcblxuICBvYmouc3Vic2NyaWJlID0gZnVuY3Rpb24gKGV2ZW50LCBjYWxsYmFjaykge1xuICAgIHJldHVybiBlYS5zdWJzY3JpYmUoZXZlbnQsIGNhbGxiYWNrKTtcbiAgfTtcblxuICBvYmoucHVibGlzaCA9IGZ1bmN0aW9uIChldmVudCwgZGF0YSkge1xuICAgIGVhLnB1Ymxpc2goZXZlbnQsIGRhdGEpO1xuICB9O1xuXG4gIHJldHVybiBlYTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGNvbmZpZ3VyZShjb25maWcpIHtcbiAgY29uZmlnLmluc3RhbmNlKEV2ZW50QWdncmVnYXRvciwgaW5jbHVkZUV2ZW50c0luKGNvbmZpZy5hdXJlbGlhKSk7XG59Il0sIm1hcHBpbmdzIjoiQUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EiLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///aurelia-event-aggregator\n");

/***/ }),

/***/ "aurelia-fetch-client":
/*!***************************************************************************************!*\
  !*** ./node_modules/aurelia-fetch-client/dist/native-modules/aurelia-fetch-client.js ***!
  \***************************************************************************************/
/*! exports provided: json, retryStrategy, RetryInterceptor, HttpClientConfiguration, HttpClient */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"json\", function() { return json; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"retryStrategy\", function() { return retryStrategy; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"RetryInterceptor\", function() { return RetryInterceptor; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"HttpClientConfiguration\", function() { return HttpClientConfiguration; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"HttpClient\", function() { return HttpClient; });\n/* harmony import */ var aurelia_pal__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! aurelia-pal */ \"70NS\");\n\n\nfunction json(body, replacer) {\r\n    return JSON.stringify((body !== undefined ? body : {}), replacer);\r\n}\n\nvar retryStrategy = {\r\n    fixed: 0,\r\n    incremental: 1,\r\n    exponential: 2,\r\n    random: 3\r\n};\r\nvar defaultRetryConfig = {\r\n    maxRetries: 3,\r\n    interval: 1000,\r\n    strategy: retryStrategy.fixed\r\n};\r\nvar RetryInterceptor = (function () {\r\n    function RetryInterceptor(retryConfig) {\r\n        this.retryConfig = Object.assign({}, defaultRetryConfig, retryConfig || {});\r\n        if (this.retryConfig.strategy === retryStrategy.exponential &&\r\n            this.retryConfig.interval <= 1000) {\r\n            throw new Error('An interval less than or equal to 1 second is not allowed when using the exponential retry strategy');\r\n        }\r\n    }\r\n    RetryInterceptor.prototype.request = function (request) {\r\n        var $r = request;\r\n        if (!$r.retryConfig) {\r\n            $r.retryConfig = Object.assign({}, this.retryConfig);\r\n            $r.retryConfig.counter = 0;\r\n        }\r\n        $r.retryConfig.requestClone = request.clone();\r\n        return request;\r\n    };\r\n    RetryInterceptor.prototype.response = function (response, request) {\r\n        delete request.retryConfig;\r\n        return response;\r\n    };\r\n    RetryInterceptor.prototype.responseError = function (error, request, httpClient) {\r\n        var retryConfig = request.retryConfig;\r\n        var requestClone = retryConfig.requestClone;\r\n        return Promise.resolve().then(function () {\r\n            if (retryConfig.counter < retryConfig.maxRetries) {\r\n                var result = retryConfig.doRetry ? retryConfig.doRetry(error, request) : true;\r\n                return Promise.resolve(result).then(function (doRetry) {\r\n                    if (doRetry) {\r\n                        retryConfig.counter++;\r\n                        return new Promise(function (resolve) { return aurelia_pal__WEBPACK_IMPORTED_MODULE_0__[\"PLATFORM\"].global.setTimeout(resolve, calculateDelay(retryConfig) || 0); })\r\n                            .then(function () {\r\n                            var newRequest = requestClone.clone();\r\n                            if (typeof (retryConfig.beforeRetry) === 'function') {\r\n                                return retryConfig.beforeRetry(newRequest, httpClient);\r\n                            }\r\n                            return newRequest;\r\n                        })\r\n                            .then(function (newRequest) {\r\n                            return httpClient.fetch(Object.assign(newRequest, { retryConfig: retryConfig }));\r\n                        });\r\n                    }\r\n                    delete request.retryConfig;\r\n                    throw error;\r\n                });\r\n            }\r\n            delete request.retryConfig;\r\n            throw error;\r\n        });\r\n    };\r\n    return RetryInterceptor;\r\n}());\r\nfunction calculateDelay(retryConfig) {\r\n    var interval = retryConfig.interval, strategy = retryConfig.strategy, minRandomInterval = retryConfig.minRandomInterval, maxRandomInterval = retryConfig.maxRandomInterval, counter = retryConfig.counter;\r\n    if (typeof (strategy) === 'function') {\r\n        return retryConfig.strategy(counter);\r\n    }\r\n    switch (strategy) {\r\n        case (retryStrategy.fixed):\r\n            return retryStrategies[retryStrategy.fixed](interval);\r\n        case (retryStrategy.incremental):\r\n            return retryStrategies[retryStrategy.incremental](counter, interval);\r\n        case (retryStrategy.exponential):\r\n            return retryStrategies[retryStrategy.exponential](counter, interval);\r\n        case (retryStrategy.random):\r\n            return retryStrategies[retryStrategy.random](counter, interval, minRandomInterval, maxRandomInterval);\r\n        default:\r\n            throw new Error('Unrecognized retry strategy');\r\n    }\r\n}\r\nvar retryStrategies = [\r\n    function (interval) { return interval; },\r\n    function (retryCount, interval) { return interval * retryCount; },\r\n    function (retryCount, interval) { return retryCount === 1 ? interval : Math.pow(interval, retryCount) / 1000; },\r\n    function (retryCount, interval, minRandomInterval, maxRandomInterval) {\r\n        if (minRandomInterval === void 0) { minRandomInterval = 0; }\r\n        if (maxRandomInterval === void 0) { maxRandomInterval = 60000; }\r\n        return Math.random() * (maxRandomInterval - minRandomInterval) + minRandomInterval;\r\n    }\r\n];\n\nvar HttpClientConfiguration = (function () {\r\n    function HttpClientConfiguration() {\r\n        this.baseUrl = '';\r\n        this.defaults = {};\r\n        this.interceptors = [];\r\n    }\r\n    HttpClientConfiguration.prototype.withBaseUrl = function (baseUrl) {\r\n        this.baseUrl = baseUrl;\r\n        return this;\r\n    };\r\n    HttpClientConfiguration.prototype.withDefaults = function (defaults) {\r\n        this.defaults = defaults;\r\n        return this;\r\n    };\r\n    HttpClientConfiguration.prototype.withInterceptor = function (interceptor) {\r\n        this.interceptors.push(interceptor);\r\n        return this;\r\n    };\r\n    HttpClientConfiguration.prototype.useStandardConfiguration = function () {\r\n        var standardConfig = { credentials: 'same-origin' };\r\n        Object.assign(this.defaults, standardConfig, this.defaults);\r\n        return this.rejectErrorResponses();\r\n    };\r\n    HttpClientConfiguration.prototype.rejectErrorResponses = function () {\r\n        return this.withInterceptor({ response: rejectOnError });\r\n    };\r\n    HttpClientConfiguration.prototype.withRetry = function (config) {\r\n        var interceptor = new RetryInterceptor(config);\r\n        return this.withInterceptor(interceptor);\r\n    };\r\n    return HttpClientConfiguration;\r\n}());\r\nfunction rejectOnError(response) {\r\n    if (!response.ok) {\r\n        throw response;\r\n    }\r\n    return response;\r\n}\n\nvar HttpClient = (function () {\r\n    function HttpClient() {\r\n        this.activeRequestCount = 0;\r\n        this.isRequesting = false;\r\n        this.isConfigured = false;\r\n        this.baseUrl = '';\r\n        this.defaults = null;\r\n        this.interceptors = [];\r\n        if (typeof fetch === 'undefined') {\r\n            throw new Error('HttpClient requires a Fetch API implementation, but the current environment doesn\\'t support it. You may need to load a polyfill such as https://github.com/github/fetch');\r\n        }\r\n    }\r\n    HttpClient.prototype.configure = function (config) {\r\n        var normalizedConfig;\r\n        if (typeof config === 'object') {\r\n            normalizedConfig = { defaults: config };\r\n        }\r\n        else if (typeof config === 'function') {\r\n            normalizedConfig = new HttpClientConfiguration();\r\n            normalizedConfig.baseUrl = this.baseUrl;\r\n            normalizedConfig.defaults = Object.assign({}, this.defaults);\r\n            normalizedConfig.interceptors = this.interceptors;\r\n            var c = config(normalizedConfig);\r\n            if (HttpClientConfiguration.prototype.isPrototypeOf(c)) {\r\n                normalizedConfig = c;\r\n            }\r\n        }\r\n        else {\r\n            throw new Error('invalid config');\r\n        }\r\n        var defaults = normalizedConfig.defaults;\r\n        if (defaults && Headers.prototype.isPrototypeOf(defaults.headers)) {\r\n            throw new Error('Default headers must be a plain object.');\r\n        }\r\n        var interceptors = normalizedConfig.interceptors;\r\n        if (interceptors && interceptors.length) {\r\n            if (interceptors.filter(function (x) { return RetryInterceptor.prototype.isPrototypeOf(x); }).length > 1) {\r\n                throw new Error('Only one RetryInterceptor is allowed.');\r\n            }\r\n            var retryInterceptorIndex = interceptors.findIndex(function (x) { return RetryInterceptor.prototype.isPrototypeOf(x); });\r\n            if (retryInterceptorIndex >= 0 && retryInterceptorIndex !== interceptors.length - 1) {\r\n                throw new Error('The retry interceptor must be the last interceptor defined.');\r\n            }\r\n        }\r\n        this.baseUrl = normalizedConfig.baseUrl;\r\n        this.defaults = defaults;\r\n        this.interceptors = normalizedConfig.interceptors || [];\r\n        this.isConfigured = true;\r\n        return this;\r\n    };\r\n    HttpClient.prototype.fetch = function (input, init) {\r\n        var _this = this;\r\n        trackRequestStart(this);\r\n        var request = this.buildRequest(input, init);\r\n        return processRequest(request, this.interceptors, this).then(function (result) {\r\n            var response = null;\r\n            if (Response.prototype.isPrototypeOf(result)) {\r\n                response = Promise.resolve(result);\r\n            }\r\n            else if (Request.prototype.isPrototypeOf(result)) {\r\n                request = result;\r\n                response = fetch(result);\r\n            }\r\n            else {\r\n                throw new Error(\"An invalid result was returned by the interceptor chain. Expected a Request or Response instance, but got [\" + result + \"]\");\r\n            }\r\n            return processResponse(response, _this.interceptors, request, _this);\r\n        })\r\n            .then(function (result) {\r\n            if (Request.prototype.isPrototypeOf(result)) {\r\n                return _this.fetch(result);\r\n            }\r\n            return result;\r\n        })\r\n            .then(function (result) {\r\n            trackRequestEnd(_this);\r\n            return result;\r\n        }, function (error) {\r\n            trackRequestEnd(_this);\r\n            throw error;\r\n        });\r\n    };\r\n    HttpClient.prototype.buildRequest = function (input, init) {\r\n        var defaults = this.defaults || {};\r\n        var request;\r\n        var body;\r\n        var requestContentType;\r\n        var parsedDefaultHeaders = parseHeaderValues(defaults.headers);\r\n        if (Request.prototype.isPrototypeOf(input)) {\r\n            request = input;\r\n            requestContentType = new Headers(request.headers).get('Content-Type');\r\n        }\r\n        else {\r\n            if (!init) {\r\n                init = {};\r\n            }\r\n            body = init.body;\r\n            var bodyObj = body ? { body: body } : null;\r\n            var requestInit = Object.assign({}, defaults, { headers: {} }, init, bodyObj);\r\n            requestContentType = new Headers(requestInit.headers).get('Content-Type');\r\n            request = new Request(getRequestUrl(this.baseUrl, input), requestInit);\r\n        }\r\n        if (!requestContentType) {\r\n            if (new Headers(parsedDefaultHeaders).has('content-type')) {\r\n                request.headers.set('Content-Type', new Headers(parsedDefaultHeaders).get('content-type'));\r\n            }\r\n            else if (body && isJSON(body)) {\r\n                request.headers.set('Content-Type', 'application/json');\r\n            }\r\n        }\r\n        setDefaultHeaders(request.headers, parsedDefaultHeaders);\r\n        if (body && Blob.prototype.isPrototypeOf(body) && body.type) {\r\n            request.headers.set('Content-Type', body.type);\r\n        }\r\n        return request;\r\n    };\r\n    HttpClient.prototype.get = function (input, init) {\r\n        return this.fetch(input, init);\r\n    };\r\n    HttpClient.prototype.post = function (input, body, init) {\r\n        return callFetch(this, input, body, init, 'POST');\r\n    };\r\n    HttpClient.prototype.put = function (input, body, init) {\r\n        return callFetch(this, input, body, init, 'PUT');\r\n    };\r\n    HttpClient.prototype.patch = function (input, body, init) {\r\n        return callFetch(this, input, body, init, 'PATCH');\r\n    };\r\n    HttpClient.prototype.delete = function (input, body, init) {\r\n        return callFetch(this, input, body, init, 'DELETE');\r\n    };\r\n    return HttpClient;\r\n}());\r\nvar absoluteUrlRegexp = /^([a-z][a-z0-9+\\-.]*:)?\\/\\//i;\r\nfunction trackRequestStart(client) {\r\n    client.isRequesting = !!(++client.activeRequestCount);\r\n    if (client.isRequesting) {\r\n        var evt_1 = aurelia_pal__WEBPACK_IMPORTED_MODULE_0__[\"DOM\"].createCustomEvent('aurelia-fetch-client-request-started', { bubbles: true, cancelable: true });\r\n        setTimeout(function () { return aurelia_pal__WEBPACK_IMPORTED_MODULE_0__[\"DOM\"].dispatchEvent(evt_1); }, 1);\r\n    }\r\n}\r\nfunction trackRequestEnd(client) {\r\n    client.isRequesting = !!(--client.activeRequestCount);\r\n    if (!client.isRequesting) {\r\n        var evt_2 = aurelia_pal__WEBPACK_IMPORTED_MODULE_0__[\"DOM\"].createCustomEvent('aurelia-fetch-client-requests-drained', { bubbles: true, cancelable: true });\r\n        setTimeout(function () { return aurelia_pal__WEBPACK_IMPORTED_MODULE_0__[\"DOM\"].dispatchEvent(evt_2); }, 1);\r\n    }\r\n}\r\nfunction parseHeaderValues(headers) {\r\n    var parsedHeaders = {};\r\n    for (var name_1 in headers || {}) {\r\n        if (headers.hasOwnProperty(name_1)) {\r\n            parsedHeaders[name_1] = (typeof headers[name_1] === 'function') ? headers[name_1]() : headers[name_1];\r\n        }\r\n    }\r\n    return parsedHeaders;\r\n}\r\nfunction getRequestUrl(baseUrl, url) {\r\n    if (absoluteUrlRegexp.test(url)) {\r\n        return url;\r\n    }\r\n    return (baseUrl || '') + url;\r\n}\r\nfunction setDefaultHeaders(headers, defaultHeaders) {\r\n    for (var name_2 in defaultHeaders || {}) {\r\n        if (defaultHeaders.hasOwnProperty(name_2) && !headers.has(name_2)) {\r\n            headers.set(name_2, defaultHeaders[name_2]);\r\n        }\r\n    }\r\n}\r\nfunction processRequest(request, interceptors, http) {\r\n    return applyInterceptors(request, interceptors, 'request', 'requestError', http);\r\n}\r\nfunction processResponse(response, interceptors, request, http) {\r\n    return applyInterceptors(response, interceptors, 'response', 'responseError', request, http);\r\n}\r\nfunction applyInterceptors(input, interceptors, successName, errorName) {\r\n    var interceptorArgs = [];\r\n    for (var _i = 4; _i < arguments.length; _i++) {\r\n        interceptorArgs[_i - 4] = arguments[_i];\r\n    }\r\n    return (interceptors || [])\r\n        .reduce(function (chain, interceptor) {\r\n        var successHandler = interceptor[successName];\r\n        var errorHandler = interceptor[errorName];\r\n        return chain.then(successHandler && (function (value) { return successHandler.call.apply(successHandler, [interceptor, value].concat(interceptorArgs)); }) || identity, errorHandler && (function (reason) { return errorHandler.call.apply(errorHandler, [interceptor, reason].concat(interceptorArgs)); }) || thrower);\r\n    }, Promise.resolve(input));\r\n}\r\nfunction isJSON(str) {\r\n    try {\r\n        JSON.parse(str);\r\n    }\r\n    catch (err) {\r\n        return false;\r\n    }\r\n    return true;\r\n}\r\nfunction identity(x) {\r\n    return x;\r\n}\r\nfunction thrower(x) {\r\n    throw x;\r\n}\r\nfunction callFetch(client, input, body, init, method) {\r\n    if (!init) {\r\n        init = {};\r\n    }\r\n    init.method = method;\r\n    if (body) {\r\n        init.body = body;\r\n    }\r\n    return client.fetch(input, init);\r\n}\n\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiYXVyZWxpYS1mZXRjaC1jbGllbnQuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvYXVyZWxpYS1mZXRjaC1jbGllbnQvZGlzdC9uYXRpdmUtbW9kdWxlcy9hdXJlbGlhLWZldGNoLWNsaWVudC5qcz9hOTA5Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IFBMQVRGT1JNLCBET00gfSBmcm9tICdhdXJlbGlhLXBhbCc7XG5cbmZ1bmN0aW9uIGpzb24oYm9keSwgcmVwbGFjZXIpIHtcclxuICAgIHJldHVybiBKU09OLnN0cmluZ2lmeSgoYm9keSAhPT0gdW5kZWZpbmVkID8gYm9keSA6IHt9KSwgcmVwbGFjZXIpO1xyXG59XG5cbnZhciByZXRyeVN0cmF0ZWd5ID0ge1xyXG4gICAgZml4ZWQ6IDAsXHJcbiAgICBpbmNyZW1lbnRhbDogMSxcclxuICAgIGV4cG9uZW50aWFsOiAyLFxyXG4gICAgcmFuZG9tOiAzXHJcbn07XHJcbnZhciBkZWZhdWx0UmV0cnlDb25maWcgPSB7XHJcbiAgICBtYXhSZXRyaWVzOiAzLFxyXG4gICAgaW50ZXJ2YWw6IDEwMDAsXHJcbiAgICBzdHJhdGVneTogcmV0cnlTdHJhdGVneS5maXhlZFxyXG59O1xyXG52YXIgUmV0cnlJbnRlcmNlcHRvciA9IChmdW5jdGlvbiAoKSB7XHJcbiAgICBmdW5jdGlvbiBSZXRyeUludGVyY2VwdG9yKHJldHJ5Q29uZmlnKSB7XHJcbiAgICAgICAgdGhpcy5yZXRyeUNvbmZpZyA9IE9iamVjdC5hc3NpZ24oe30sIGRlZmF1bHRSZXRyeUNvbmZpZywgcmV0cnlDb25maWcgfHwge30pO1xyXG4gICAgICAgIGlmICh0aGlzLnJldHJ5Q29uZmlnLnN0cmF0ZWd5ID09PSByZXRyeVN0cmF0ZWd5LmV4cG9uZW50aWFsICYmXHJcbiAgICAgICAgICAgIHRoaXMucmV0cnlDb25maWcuaW50ZXJ2YWwgPD0gMTAwMCkge1xyXG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ0FuIGludGVydmFsIGxlc3MgdGhhbiBvciBlcXVhbCB0byAxIHNlY29uZCBpcyBub3QgYWxsb3dlZCB3aGVuIHVzaW5nIHRoZSBleHBvbmVudGlhbCByZXRyeSBzdHJhdGVneScpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIFJldHJ5SW50ZXJjZXB0b3IucHJvdG90eXBlLnJlcXVlc3QgPSBmdW5jdGlvbiAocmVxdWVzdCkge1xyXG4gICAgICAgIHZhciAkciA9IHJlcXVlc3Q7XHJcbiAgICAgICAgaWYgKCEkci5yZXRyeUNvbmZpZykge1xyXG4gICAgICAgICAgICAkci5yZXRyeUNvbmZpZyA9IE9iamVjdC5hc3NpZ24oe30sIHRoaXMucmV0cnlDb25maWcpO1xyXG4gICAgICAgICAgICAkci5yZXRyeUNvbmZpZy5jb3VudGVyID0gMDtcclxuICAgICAgICB9XHJcbiAgICAgICAgJHIucmV0cnlDb25maWcucmVxdWVzdENsb25lID0gcmVxdWVzdC5jbG9uZSgpO1xyXG4gICAgICAgIHJldHVybiByZXF1ZXN0O1xyXG4gICAgfTtcclxuICAgIFJldHJ5SW50ZXJjZXB0b3IucHJvdG90eXBlLnJlc3BvbnNlID0gZnVuY3Rpb24gKHJlc3BvbnNlLCByZXF1ZXN0KSB7XHJcbiAgICAgICAgZGVsZXRlIHJlcXVlc3QucmV0cnlDb25maWc7XHJcbiAgICAgICAgcmV0dXJuIHJlc3BvbnNlO1xyXG4gICAgfTtcclxuICAgIFJldHJ5SW50ZXJjZXB0b3IucHJvdG90eXBlLnJlc3BvbnNlRXJyb3IgPSBmdW5jdGlvbiAoZXJyb3IsIHJlcXVlc3QsIGh0dHBDbGllbnQpIHtcclxuICAgICAgICB2YXIgcmV0cnlDb25maWcgPSByZXF1ZXN0LnJldHJ5Q29uZmlnO1xyXG4gICAgICAgIHZhciByZXF1ZXN0Q2xvbmUgPSByZXRyeUNvbmZpZy5yZXF1ZXN0Q2xvbmU7XHJcbiAgICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZSgpLnRoZW4oZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICBpZiAocmV0cnlDb25maWcuY291bnRlciA8IHJldHJ5Q29uZmlnLm1heFJldHJpZXMpIHtcclxuICAgICAgICAgICAgICAgIHZhciByZXN1bHQgPSByZXRyeUNvbmZpZy5kb1JldHJ5ID8gcmV0cnlDb25maWcuZG9SZXRyeShlcnJvciwgcmVxdWVzdCkgOiB0cnVlO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZShyZXN1bHQpLnRoZW4oZnVuY3Rpb24gKGRvUmV0cnkpIHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoZG9SZXRyeSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXRyeUNvbmZpZy5jb3VudGVyKys7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbiAocmVzb2x2ZSkgeyByZXR1cm4gUExBVEZPUk0uZ2xvYmFsLnNldFRpbWVvdXQocmVzb2x2ZSwgY2FsY3VsYXRlRGVsYXkocmV0cnlDb25maWcpIHx8IDApOyB9KVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLnRoZW4oZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIG5ld1JlcXVlc3QgPSByZXF1ZXN0Q2xvbmUuY2xvbmUoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgKHJldHJ5Q29uZmlnLmJlZm9yZVJldHJ5KSA9PT0gJ2Z1bmN0aW9uJykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiByZXRyeUNvbmZpZy5iZWZvcmVSZXRyeShuZXdSZXF1ZXN0LCBodHRwQ2xpZW50KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBuZXdSZXF1ZXN0O1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLnRoZW4oZnVuY3Rpb24gKG5ld1JlcXVlc3QpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBodHRwQ2xpZW50LmZldGNoKE9iamVjdC5hc3NpZ24obmV3UmVxdWVzdCwgeyByZXRyeUNvbmZpZzogcmV0cnlDb25maWcgfSkpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgZGVsZXRlIHJlcXVlc3QucmV0cnlDb25maWc7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhyb3cgZXJyb3I7XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBkZWxldGUgcmVxdWVzdC5yZXRyeUNvbmZpZztcclxuICAgICAgICAgICAgdGhyb3cgZXJyb3I7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9O1xyXG4gICAgcmV0dXJuIFJldHJ5SW50ZXJjZXB0b3I7XHJcbn0oKSk7XHJcbmZ1bmN0aW9uIGNhbGN1bGF0ZURlbGF5KHJldHJ5Q29uZmlnKSB7XHJcbiAgICB2YXIgaW50ZXJ2YWwgPSByZXRyeUNvbmZpZy5pbnRlcnZhbCwgc3RyYXRlZ3kgPSByZXRyeUNvbmZpZy5zdHJhdGVneSwgbWluUmFuZG9tSW50ZXJ2YWwgPSByZXRyeUNvbmZpZy5taW5SYW5kb21JbnRlcnZhbCwgbWF4UmFuZG9tSW50ZXJ2YWwgPSByZXRyeUNvbmZpZy5tYXhSYW5kb21JbnRlcnZhbCwgY291bnRlciA9IHJldHJ5Q29uZmlnLmNvdW50ZXI7XHJcbiAgICBpZiAodHlwZW9mIChzdHJhdGVneSkgPT09ICdmdW5jdGlvbicpIHtcclxuICAgICAgICByZXR1cm4gcmV0cnlDb25maWcuc3RyYXRlZ3koY291bnRlcik7XHJcbiAgICB9XHJcbiAgICBzd2l0Y2ggKHN0cmF0ZWd5KSB7XHJcbiAgICAgICAgY2FzZSAocmV0cnlTdHJhdGVneS5maXhlZCk6XHJcbiAgICAgICAgICAgIHJldHVybiByZXRyeVN0cmF0ZWdpZXNbcmV0cnlTdHJhdGVneS5maXhlZF0oaW50ZXJ2YWwpO1xyXG4gICAgICAgIGNhc2UgKHJldHJ5U3RyYXRlZ3kuaW5jcmVtZW50YWwpOlxyXG4gICAgICAgICAgICByZXR1cm4gcmV0cnlTdHJhdGVnaWVzW3JldHJ5U3RyYXRlZ3kuaW5jcmVtZW50YWxdKGNvdW50ZXIsIGludGVydmFsKTtcclxuICAgICAgICBjYXNlIChyZXRyeVN0cmF0ZWd5LmV4cG9uZW50aWFsKTpcclxuICAgICAgICAgICAgcmV0dXJuIHJldHJ5U3RyYXRlZ2llc1tyZXRyeVN0cmF0ZWd5LmV4cG9uZW50aWFsXShjb3VudGVyLCBpbnRlcnZhbCk7XHJcbiAgICAgICAgY2FzZSAocmV0cnlTdHJhdGVneS5yYW5kb20pOlxyXG4gICAgICAgICAgICByZXR1cm4gcmV0cnlTdHJhdGVnaWVzW3JldHJ5U3RyYXRlZ3kucmFuZG9tXShjb3VudGVyLCBpbnRlcnZhbCwgbWluUmFuZG9tSW50ZXJ2YWwsIG1heFJhbmRvbUludGVydmFsKTtcclxuICAgICAgICBkZWZhdWx0OlxyXG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ1VucmVjb2duaXplZCByZXRyeSBzdHJhdGVneScpO1xyXG4gICAgfVxyXG59XHJcbnZhciByZXRyeVN0cmF0ZWdpZXMgPSBbXHJcbiAgICBmdW5jdGlvbiAoaW50ZXJ2YWwpIHsgcmV0dXJuIGludGVydmFsOyB9LFxyXG4gICAgZnVuY3Rpb24gKHJldHJ5Q291bnQsIGludGVydmFsKSB7IHJldHVybiBpbnRlcnZhbCAqIHJldHJ5Q291bnQ7IH0sXHJcbiAgICBmdW5jdGlvbiAocmV0cnlDb3VudCwgaW50ZXJ2YWwpIHsgcmV0dXJuIHJldHJ5Q291bnQgPT09IDEgPyBpbnRlcnZhbCA6IE1hdGgucG93KGludGVydmFsLCByZXRyeUNvdW50KSAvIDEwMDA7IH0sXHJcbiAgICBmdW5jdGlvbiAocmV0cnlDb3VudCwgaW50ZXJ2YWwsIG1pblJhbmRvbUludGVydmFsLCBtYXhSYW5kb21JbnRlcnZhbCkge1xyXG4gICAgICAgIGlmIChtaW5SYW5kb21JbnRlcnZhbCA9PT0gdm9pZCAwKSB7IG1pblJhbmRvbUludGVydmFsID0gMDsgfVxyXG4gICAgICAgIGlmIChtYXhSYW5kb21JbnRlcnZhbCA9PT0gdm9pZCAwKSB7IG1heFJhbmRvbUludGVydmFsID0gNjAwMDA7IH1cclxuICAgICAgICByZXR1cm4gTWF0aC5yYW5kb20oKSAqIChtYXhSYW5kb21JbnRlcnZhbCAtIG1pblJhbmRvbUludGVydmFsKSArIG1pblJhbmRvbUludGVydmFsO1xyXG4gICAgfVxyXG5dO1xuXG52YXIgSHR0cENsaWVudENvbmZpZ3VyYXRpb24gPSAoZnVuY3Rpb24gKCkge1xyXG4gICAgZnVuY3Rpb24gSHR0cENsaWVudENvbmZpZ3VyYXRpb24oKSB7XHJcbiAgICAgICAgdGhpcy5iYXNlVXJsID0gJyc7XHJcbiAgICAgICAgdGhpcy5kZWZhdWx0cyA9IHt9O1xyXG4gICAgICAgIHRoaXMuaW50ZXJjZXB0b3JzID0gW107XHJcbiAgICB9XHJcbiAgICBIdHRwQ2xpZW50Q29uZmlndXJhdGlvbi5wcm90b3R5cGUud2l0aEJhc2VVcmwgPSBmdW5jdGlvbiAoYmFzZVVybCkge1xyXG4gICAgICAgIHRoaXMuYmFzZVVybCA9IGJhc2VVcmw7XHJcbiAgICAgICAgcmV0dXJuIHRoaXM7XHJcbiAgICB9O1xyXG4gICAgSHR0cENsaWVudENvbmZpZ3VyYXRpb24ucHJvdG90eXBlLndpdGhEZWZhdWx0cyA9IGZ1bmN0aW9uIChkZWZhdWx0cykge1xyXG4gICAgICAgIHRoaXMuZGVmYXVsdHMgPSBkZWZhdWx0cztcclxuICAgICAgICByZXR1cm4gdGhpcztcclxuICAgIH07XHJcbiAgICBIdHRwQ2xpZW50Q29uZmlndXJhdGlvbi5wcm90b3R5cGUud2l0aEludGVyY2VwdG9yID0gZnVuY3Rpb24gKGludGVyY2VwdG9yKSB7XHJcbiAgICAgICAgdGhpcy5pbnRlcmNlcHRvcnMucHVzaChpbnRlcmNlcHRvcik7XHJcbiAgICAgICAgcmV0dXJuIHRoaXM7XHJcbiAgICB9O1xyXG4gICAgSHR0cENsaWVudENvbmZpZ3VyYXRpb24ucHJvdG90eXBlLnVzZVN0YW5kYXJkQ29uZmlndXJhdGlvbiA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB2YXIgc3RhbmRhcmRDb25maWcgPSB7IGNyZWRlbnRpYWxzOiAnc2FtZS1vcmlnaW4nIH07XHJcbiAgICAgICAgT2JqZWN0LmFzc2lnbih0aGlzLmRlZmF1bHRzLCBzdGFuZGFyZENvbmZpZywgdGhpcy5kZWZhdWx0cyk7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMucmVqZWN0RXJyb3JSZXNwb25zZXMoKTtcclxuICAgIH07XHJcbiAgICBIdHRwQ2xpZW50Q29uZmlndXJhdGlvbi5wcm90b3R5cGUucmVqZWN0RXJyb3JSZXNwb25zZXMgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMud2l0aEludGVyY2VwdG9yKHsgcmVzcG9uc2U6IHJlamVjdE9uRXJyb3IgfSk7XHJcbiAgICB9O1xyXG4gICAgSHR0cENsaWVudENvbmZpZ3VyYXRpb24ucHJvdG90eXBlLndpdGhSZXRyeSA9IGZ1bmN0aW9uIChjb25maWcpIHtcclxuICAgICAgICB2YXIgaW50ZXJjZXB0b3IgPSBuZXcgUmV0cnlJbnRlcmNlcHRvcihjb25maWcpO1xyXG4gICAgICAgIHJldHVybiB0aGlzLndpdGhJbnRlcmNlcHRvcihpbnRlcmNlcHRvcik7XHJcbiAgICB9O1xyXG4gICAgcmV0dXJuIEh0dHBDbGllbnRDb25maWd1cmF0aW9uO1xyXG59KCkpO1xyXG5mdW5jdGlvbiByZWplY3RPbkVycm9yKHJlc3BvbnNlKSB7XHJcbiAgICBpZiAoIXJlc3BvbnNlLm9rKSB7XHJcbiAgICAgICAgdGhyb3cgcmVzcG9uc2U7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gcmVzcG9uc2U7XHJcbn1cblxudmFyIEh0dHBDbGllbnQgPSAoZnVuY3Rpb24gKCkge1xyXG4gICAgZnVuY3Rpb24gSHR0cENsaWVudCgpIHtcclxuICAgICAgICB0aGlzLmFjdGl2ZVJlcXVlc3RDb3VudCA9IDA7XHJcbiAgICAgICAgdGhpcy5pc1JlcXVlc3RpbmcgPSBmYWxzZTtcclxuICAgICAgICB0aGlzLmlzQ29uZmlndXJlZCA9IGZhbHNlO1xyXG4gICAgICAgIHRoaXMuYmFzZVVybCA9ICcnO1xyXG4gICAgICAgIHRoaXMuZGVmYXVsdHMgPSBudWxsO1xyXG4gICAgICAgIHRoaXMuaW50ZXJjZXB0b3JzID0gW107XHJcbiAgICAgICAgaWYgKHR5cGVvZiBmZXRjaCA9PT0gJ3VuZGVmaW5lZCcpIHtcclxuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdIdHRwQ2xpZW50IHJlcXVpcmVzIGEgRmV0Y2ggQVBJIGltcGxlbWVudGF0aW9uLCBidXQgdGhlIGN1cnJlbnQgZW52aXJvbm1lbnQgZG9lc25cXCd0IHN1cHBvcnQgaXQuIFlvdSBtYXkgbmVlZCB0byBsb2FkIGEgcG9seWZpbGwgc3VjaCBhcyBodHRwczovL2dpdGh1Yi5jb20vZ2l0aHViL2ZldGNoJyk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgSHR0cENsaWVudC5wcm90b3R5cGUuY29uZmlndXJlID0gZnVuY3Rpb24gKGNvbmZpZykge1xyXG4gICAgICAgIHZhciBub3JtYWxpemVkQ29uZmlnO1xyXG4gICAgICAgIGlmICh0eXBlb2YgY29uZmlnID09PSAnb2JqZWN0Jykge1xyXG4gICAgICAgICAgICBub3JtYWxpemVkQ29uZmlnID0geyBkZWZhdWx0czogY29uZmlnIH07XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2UgaWYgKHR5cGVvZiBjb25maWcgPT09ICdmdW5jdGlvbicpIHtcclxuICAgICAgICAgICAgbm9ybWFsaXplZENvbmZpZyA9IG5ldyBIdHRwQ2xpZW50Q29uZmlndXJhdGlvbigpO1xyXG4gICAgICAgICAgICBub3JtYWxpemVkQ29uZmlnLmJhc2VVcmwgPSB0aGlzLmJhc2VVcmw7XHJcbiAgICAgICAgICAgIG5vcm1hbGl6ZWRDb25maWcuZGVmYXVsdHMgPSBPYmplY3QuYXNzaWduKHt9LCB0aGlzLmRlZmF1bHRzKTtcclxuICAgICAgICAgICAgbm9ybWFsaXplZENvbmZpZy5pbnRlcmNlcHRvcnMgPSB0aGlzLmludGVyY2VwdG9ycztcclxuICAgICAgICAgICAgdmFyIGMgPSBjb25maWcobm9ybWFsaXplZENvbmZpZyk7XHJcbiAgICAgICAgICAgIGlmIChIdHRwQ2xpZW50Q29uZmlndXJhdGlvbi5wcm90b3R5cGUuaXNQcm90b3R5cGVPZihjKSkge1xyXG4gICAgICAgICAgICAgICAgbm9ybWFsaXplZENvbmZpZyA9IGM7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignaW52YWxpZCBjb25maWcnKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgdmFyIGRlZmF1bHRzID0gbm9ybWFsaXplZENvbmZpZy5kZWZhdWx0cztcclxuICAgICAgICBpZiAoZGVmYXVsdHMgJiYgSGVhZGVycy5wcm90b3R5cGUuaXNQcm90b3R5cGVPZihkZWZhdWx0cy5oZWFkZXJzKSkge1xyXG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ0RlZmF1bHQgaGVhZGVycyBtdXN0IGJlIGEgcGxhaW4gb2JqZWN0LicpO1xyXG4gICAgICAgIH1cclxuICAgICAgICB2YXIgaW50ZXJjZXB0b3JzID0gbm9ybWFsaXplZENvbmZpZy5pbnRlcmNlcHRvcnM7XHJcbiAgICAgICAgaWYgKGludGVyY2VwdG9ycyAmJiBpbnRlcmNlcHRvcnMubGVuZ3RoKSB7XHJcbiAgICAgICAgICAgIGlmIChpbnRlcmNlcHRvcnMuZmlsdGVyKGZ1bmN0aW9uICh4KSB7IHJldHVybiBSZXRyeUludGVyY2VwdG9yLnByb3RvdHlwZS5pc1Byb3RvdHlwZU9mKHgpOyB9KS5sZW5ndGggPiAxKSB7XHJcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ09ubHkgb25lIFJldHJ5SW50ZXJjZXB0b3IgaXMgYWxsb3dlZC4nKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB2YXIgcmV0cnlJbnRlcmNlcHRvckluZGV4ID0gaW50ZXJjZXB0b3JzLmZpbmRJbmRleChmdW5jdGlvbiAoeCkgeyByZXR1cm4gUmV0cnlJbnRlcmNlcHRvci5wcm90b3R5cGUuaXNQcm90b3R5cGVPZih4KTsgfSk7XHJcbiAgICAgICAgICAgIGlmIChyZXRyeUludGVyY2VwdG9ySW5kZXggPj0gMCAmJiByZXRyeUludGVyY2VwdG9ySW5kZXggIT09IGludGVyY2VwdG9ycy5sZW5ndGggLSAxKSB7XHJcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ1RoZSByZXRyeSBpbnRlcmNlcHRvciBtdXN0IGJlIHRoZSBsYXN0IGludGVyY2VwdG9yIGRlZmluZWQuJyk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5iYXNlVXJsID0gbm9ybWFsaXplZENvbmZpZy5iYXNlVXJsO1xyXG4gICAgICAgIHRoaXMuZGVmYXVsdHMgPSBkZWZhdWx0cztcclxuICAgICAgICB0aGlzLmludGVyY2VwdG9ycyA9IG5vcm1hbGl6ZWRDb25maWcuaW50ZXJjZXB0b3JzIHx8IFtdO1xyXG4gICAgICAgIHRoaXMuaXNDb25maWd1cmVkID0gdHJ1ZTtcclxuICAgICAgICByZXR1cm4gdGhpcztcclxuICAgIH07XHJcbiAgICBIdHRwQ2xpZW50LnByb3RvdHlwZS5mZXRjaCA9IGZ1bmN0aW9uIChpbnB1dCwgaW5pdCkge1xyXG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XHJcbiAgICAgICAgdHJhY2tSZXF1ZXN0U3RhcnQodGhpcyk7XHJcbiAgICAgICAgdmFyIHJlcXVlc3QgPSB0aGlzLmJ1aWxkUmVxdWVzdChpbnB1dCwgaW5pdCk7XHJcbiAgICAgICAgcmV0dXJuIHByb2Nlc3NSZXF1ZXN0KHJlcXVlc3QsIHRoaXMuaW50ZXJjZXB0b3JzLCB0aGlzKS50aGVuKGZ1bmN0aW9uIChyZXN1bHQpIHtcclxuICAgICAgICAgICAgdmFyIHJlc3BvbnNlID0gbnVsbDtcclxuICAgICAgICAgICAgaWYgKFJlc3BvbnNlLnByb3RvdHlwZS5pc1Byb3RvdHlwZU9mKHJlc3VsdCkpIHtcclxuICAgICAgICAgICAgICAgIHJlc3BvbnNlID0gUHJvbWlzZS5yZXNvbHZlKHJlc3VsdCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZSBpZiAoUmVxdWVzdC5wcm90b3R5cGUuaXNQcm90b3R5cGVPZihyZXN1bHQpKSB7XHJcbiAgICAgICAgICAgICAgICByZXF1ZXN0ID0gcmVzdWx0O1xyXG4gICAgICAgICAgICAgICAgcmVzcG9uc2UgPSBmZXRjaChyZXN1bHQpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiQW4gaW52YWxpZCByZXN1bHQgd2FzIHJldHVybmVkIGJ5IHRoZSBpbnRlcmNlcHRvciBjaGFpbi4gRXhwZWN0ZWQgYSBSZXF1ZXN0IG9yIFJlc3BvbnNlIGluc3RhbmNlLCBidXQgZ290IFtcIiArIHJlc3VsdCArIFwiXVwiKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICByZXR1cm4gcHJvY2Vzc1Jlc3BvbnNlKHJlc3BvbnNlLCBfdGhpcy5pbnRlcmNlcHRvcnMsIHJlcXVlc3QsIF90aGlzKTtcclxuICAgICAgICB9KVxyXG4gICAgICAgICAgICAudGhlbihmdW5jdGlvbiAocmVzdWx0KSB7XHJcbiAgICAgICAgICAgIGlmIChSZXF1ZXN0LnByb3RvdHlwZS5pc1Byb3RvdHlwZU9mKHJlc3VsdCkpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBfdGhpcy5mZXRjaChyZXN1bHQpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHJldHVybiByZXN1bHQ7XHJcbiAgICAgICAgfSlcclxuICAgICAgICAgICAgLnRoZW4oZnVuY3Rpb24gKHJlc3VsdCkge1xyXG4gICAgICAgICAgICB0cmFja1JlcXVlc3RFbmQoX3RoaXMpO1xyXG4gICAgICAgICAgICByZXR1cm4gcmVzdWx0O1xyXG4gICAgICAgIH0sIGZ1bmN0aW9uIChlcnJvcikge1xyXG4gICAgICAgICAgICB0cmFja1JlcXVlc3RFbmQoX3RoaXMpO1xyXG4gICAgICAgICAgICB0aHJvdyBlcnJvcjtcclxuICAgICAgICB9KTtcclxuICAgIH07XHJcbiAgICBIdHRwQ2xpZW50LnByb3RvdHlwZS5idWlsZFJlcXVlc3QgPSBmdW5jdGlvbiAoaW5wdXQsIGluaXQpIHtcclxuICAgICAgICB2YXIgZGVmYXVsdHMgPSB0aGlzLmRlZmF1bHRzIHx8IHt9O1xyXG4gICAgICAgIHZhciByZXF1ZXN0O1xyXG4gICAgICAgIHZhciBib2R5O1xyXG4gICAgICAgIHZhciByZXF1ZXN0Q29udGVudFR5cGU7XHJcbiAgICAgICAgdmFyIHBhcnNlZERlZmF1bHRIZWFkZXJzID0gcGFyc2VIZWFkZXJWYWx1ZXMoZGVmYXVsdHMuaGVhZGVycyk7XHJcbiAgICAgICAgaWYgKFJlcXVlc3QucHJvdG90eXBlLmlzUHJvdG90eXBlT2YoaW5wdXQpKSB7XHJcbiAgICAgICAgICAgIHJlcXVlc3QgPSBpbnB1dDtcclxuICAgICAgICAgICAgcmVxdWVzdENvbnRlbnRUeXBlID0gbmV3IEhlYWRlcnMocmVxdWVzdC5oZWFkZXJzKS5nZXQoJ0NvbnRlbnQtVHlwZScpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgaWYgKCFpbml0KSB7XHJcbiAgICAgICAgICAgICAgICBpbml0ID0ge307XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgYm9keSA9IGluaXQuYm9keTtcclxuICAgICAgICAgICAgdmFyIGJvZHlPYmogPSBib2R5ID8geyBib2R5OiBib2R5IH0gOiBudWxsO1xyXG4gICAgICAgICAgICB2YXIgcmVxdWVzdEluaXQgPSBPYmplY3QuYXNzaWduKHt9LCBkZWZhdWx0cywgeyBoZWFkZXJzOiB7fSB9LCBpbml0LCBib2R5T2JqKTtcclxuICAgICAgICAgICAgcmVxdWVzdENvbnRlbnRUeXBlID0gbmV3IEhlYWRlcnMocmVxdWVzdEluaXQuaGVhZGVycykuZ2V0KCdDb250ZW50LVR5cGUnKTtcclxuICAgICAgICAgICAgcmVxdWVzdCA9IG5ldyBSZXF1ZXN0KGdldFJlcXVlc3RVcmwodGhpcy5iYXNlVXJsLCBpbnB1dCksIHJlcXVlc3RJbml0KTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKCFyZXF1ZXN0Q29udGVudFR5cGUpIHtcclxuICAgICAgICAgICAgaWYgKG5ldyBIZWFkZXJzKHBhcnNlZERlZmF1bHRIZWFkZXJzKS5oYXMoJ2NvbnRlbnQtdHlwZScpKSB7XHJcbiAgICAgICAgICAgICAgICByZXF1ZXN0LmhlYWRlcnMuc2V0KCdDb250ZW50LVR5cGUnLCBuZXcgSGVhZGVycyhwYXJzZWREZWZhdWx0SGVhZGVycykuZ2V0KCdjb250ZW50LXR5cGUnKSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZSBpZiAoYm9keSAmJiBpc0pTT04oYm9keSkpIHtcclxuICAgICAgICAgICAgICAgIHJlcXVlc3QuaGVhZGVycy5zZXQoJ0NvbnRlbnQtVHlwZScsICdhcHBsaWNhdGlvbi9qc29uJyk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgc2V0RGVmYXVsdEhlYWRlcnMocmVxdWVzdC5oZWFkZXJzLCBwYXJzZWREZWZhdWx0SGVhZGVycyk7XHJcbiAgICAgICAgaWYgKGJvZHkgJiYgQmxvYi5wcm90b3R5cGUuaXNQcm90b3R5cGVPZihib2R5KSAmJiBib2R5LnR5cGUpIHtcclxuICAgICAgICAgICAgcmVxdWVzdC5oZWFkZXJzLnNldCgnQ29udGVudC1UeXBlJywgYm9keS50eXBlKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHJlcXVlc3Q7XHJcbiAgICB9O1xyXG4gICAgSHR0cENsaWVudC5wcm90b3R5cGUuZ2V0ID0gZnVuY3Rpb24gKGlucHV0LCBpbml0KSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuZmV0Y2goaW5wdXQsIGluaXQpO1xyXG4gICAgfTtcclxuICAgIEh0dHBDbGllbnQucHJvdG90eXBlLnBvc3QgPSBmdW5jdGlvbiAoaW5wdXQsIGJvZHksIGluaXQpIHtcclxuICAgICAgICByZXR1cm4gY2FsbEZldGNoKHRoaXMsIGlucHV0LCBib2R5LCBpbml0LCAnUE9TVCcpO1xyXG4gICAgfTtcclxuICAgIEh0dHBDbGllbnQucHJvdG90eXBlLnB1dCA9IGZ1bmN0aW9uIChpbnB1dCwgYm9keSwgaW5pdCkge1xyXG4gICAgICAgIHJldHVybiBjYWxsRmV0Y2godGhpcywgaW5wdXQsIGJvZHksIGluaXQsICdQVVQnKTtcclxuICAgIH07XHJcbiAgICBIdHRwQ2xpZW50LnByb3RvdHlwZS5wYXRjaCA9IGZ1bmN0aW9uIChpbnB1dCwgYm9keSwgaW5pdCkge1xyXG4gICAgICAgIHJldHVybiBjYWxsRmV0Y2godGhpcywgaW5wdXQsIGJvZHksIGluaXQsICdQQVRDSCcpO1xyXG4gICAgfTtcclxuICAgIEh0dHBDbGllbnQucHJvdG90eXBlLmRlbGV0ZSA9IGZ1bmN0aW9uIChpbnB1dCwgYm9keSwgaW5pdCkge1xyXG4gICAgICAgIHJldHVybiBjYWxsRmV0Y2godGhpcywgaW5wdXQsIGJvZHksIGluaXQsICdERUxFVEUnKTtcclxuICAgIH07XHJcbiAgICByZXR1cm4gSHR0cENsaWVudDtcclxufSgpKTtcclxudmFyIGFic29sdXRlVXJsUmVnZXhwID0gL14oW2Etel1bYS16MC05K1xcLS5dKjopP1xcL1xcLy9pO1xyXG5mdW5jdGlvbiB0cmFja1JlcXVlc3RTdGFydChjbGllbnQpIHtcclxuICAgIGNsaWVudC5pc1JlcXVlc3RpbmcgPSAhISgrK2NsaWVudC5hY3RpdmVSZXF1ZXN0Q291bnQpO1xyXG4gICAgaWYgKGNsaWVudC5pc1JlcXVlc3RpbmcpIHtcclxuICAgICAgICB2YXIgZXZ0XzEgPSBET00uY3JlYXRlQ3VzdG9tRXZlbnQoJ2F1cmVsaWEtZmV0Y2gtY2xpZW50LXJlcXVlc3Qtc3RhcnRlZCcsIHsgYnViYmxlczogdHJ1ZSwgY2FuY2VsYWJsZTogdHJ1ZSB9KTtcclxuICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHsgcmV0dXJuIERPTS5kaXNwYXRjaEV2ZW50KGV2dF8xKTsgfSwgMSk7XHJcbiAgICB9XHJcbn1cclxuZnVuY3Rpb24gdHJhY2tSZXF1ZXN0RW5kKGNsaWVudCkge1xyXG4gICAgY2xpZW50LmlzUmVxdWVzdGluZyA9ICEhKC0tY2xpZW50LmFjdGl2ZVJlcXVlc3RDb3VudCk7XHJcbiAgICBpZiAoIWNsaWVudC5pc1JlcXVlc3RpbmcpIHtcclxuICAgICAgICB2YXIgZXZ0XzIgPSBET00uY3JlYXRlQ3VzdG9tRXZlbnQoJ2F1cmVsaWEtZmV0Y2gtY2xpZW50LXJlcXVlc3RzLWRyYWluZWQnLCB7IGJ1YmJsZXM6IHRydWUsIGNhbmNlbGFibGU6IHRydWUgfSk7XHJcbiAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7IHJldHVybiBET00uZGlzcGF0Y2hFdmVudChldnRfMik7IH0sIDEpO1xyXG4gICAgfVxyXG59XHJcbmZ1bmN0aW9uIHBhcnNlSGVhZGVyVmFsdWVzKGhlYWRlcnMpIHtcclxuICAgIHZhciBwYXJzZWRIZWFkZXJzID0ge307XHJcbiAgICBmb3IgKHZhciBuYW1lXzEgaW4gaGVhZGVycyB8fCB7fSkge1xyXG4gICAgICAgIGlmIChoZWFkZXJzLmhhc093blByb3BlcnR5KG5hbWVfMSkpIHtcclxuICAgICAgICAgICAgcGFyc2VkSGVhZGVyc1tuYW1lXzFdID0gKHR5cGVvZiBoZWFkZXJzW25hbWVfMV0gPT09ICdmdW5jdGlvbicpID8gaGVhZGVyc1tuYW1lXzFdKCkgOiBoZWFkZXJzW25hbWVfMV07XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgcmV0dXJuIHBhcnNlZEhlYWRlcnM7XHJcbn1cclxuZnVuY3Rpb24gZ2V0UmVxdWVzdFVybChiYXNlVXJsLCB1cmwpIHtcclxuICAgIGlmIChhYnNvbHV0ZVVybFJlZ2V4cC50ZXN0KHVybCkpIHtcclxuICAgICAgICByZXR1cm4gdXJsO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIChiYXNlVXJsIHx8ICcnKSArIHVybDtcclxufVxyXG5mdW5jdGlvbiBzZXREZWZhdWx0SGVhZGVycyhoZWFkZXJzLCBkZWZhdWx0SGVhZGVycykge1xyXG4gICAgZm9yICh2YXIgbmFtZV8yIGluIGRlZmF1bHRIZWFkZXJzIHx8IHt9KSB7XHJcbiAgICAgICAgaWYgKGRlZmF1bHRIZWFkZXJzLmhhc093blByb3BlcnR5KG5hbWVfMikgJiYgIWhlYWRlcnMuaGFzKG5hbWVfMikpIHtcclxuICAgICAgICAgICAgaGVhZGVycy5zZXQobmFtZV8yLCBkZWZhdWx0SGVhZGVyc1tuYW1lXzJdKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn1cclxuZnVuY3Rpb24gcHJvY2Vzc1JlcXVlc3QocmVxdWVzdCwgaW50ZXJjZXB0b3JzLCBodHRwKSB7XHJcbiAgICByZXR1cm4gYXBwbHlJbnRlcmNlcHRvcnMocmVxdWVzdCwgaW50ZXJjZXB0b3JzLCAncmVxdWVzdCcsICdyZXF1ZXN0RXJyb3InLCBodHRwKTtcclxufVxyXG5mdW5jdGlvbiBwcm9jZXNzUmVzcG9uc2UocmVzcG9uc2UsIGludGVyY2VwdG9ycywgcmVxdWVzdCwgaHR0cCkge1xyXG4gICAgcmV0dXJuIGFwcGx5SW50ZXJjZXB0b3JzKHJlc3BvbnNlLCBpbnRlcmNlcHRvcnMsICdyZXNwb25zZScsICdyZXNwb25zZUVycm9yJywgcmVxdWVzdCwgaHR0cCk7XHJcbn1cclxuZnVuY3Rpb24gYXBwbHlJbnRlcmNlcHRvcnMoaW5wdXQsIGludGVyY2VwdG9ycywgc3VjY2Vzc05hbWUsIGVycm9yTmFtZSkge1xyXG4gICAgdmFyIGludGVyY2VwdG9yQXJncyA9IFtdO1xyXG4gICAgZm9yICh2YXIgX2kgPSA0OyBfaSA8IGFyZ3VtZW50cy5sZW5ndGg7IF9pKyspIHtcclxuICAgICAgICBpbnRlcmNlcHRvckFyZ3NbX2kgLSA0XSA9IGFyZ3VtZW50c1tfaV07XHJcbiAgICB9XHJcbiAgICByZXR1cm4gKGludGVyY2VwdG9ycyB8fCBbXSlcclxuICAgICAgICAucmVkdWNlKGZ1bmN0aW9uIChjaGFpbiwgaW50ZXJjZXB0b3IpIHtcclxuICAgICAgICB2YXIgc3VjY2Vzc0hhbmRsZXIgPSBpbnRlcmNlcHRvcltzdWNjZXNzTmFtZV07XHJcbiAgICAgICAgdmFyIGVycm9ySGFuZGxlciA9IGludGVyY2VwdG9yW2Vycm9yTmFtZV07XHJcbiAgICAgICAgcmV0dXJuIGNoYWluLnRoZW4oc3VjY2Vzc0hhbmRsZXIgJiYgKGZ1bmN0aW9uICh2YWx1ZSkgeyByZXR1cm4gc3VjY2Vzc0hhbmRsZXIuY2FsbC5hcHBseShzdWNjZXNzSGFuZGxlciwgW2ludGVyY2VwdG9yLCB2YWx1ZV0uY29uY2F0KGludGVyY2VwdG9yQXJncykpOyB9KSB8fCBpZGVudGl0eSwgZXJyb3JIYW5kbGVyICYmIChmdW5jdGlvbiAocmVhc29uKSB7IHJldHVybiBlcnJvckhhbmRsZXIuY2FsbC5hcHBseShlcnJvckhhbmRsZXIsIFtpbnRlcmNlcHRvciwgcmVhc29uXS5jb25jYXQoaW50ZXJjZXB0b3JBcmdzKSk7IH0pIHx8IHRocm93ZXIpO1xyXG4gICAgfSwgUHJvbWlzZS5yZXNvbHZlKGlucHV0KSk7XHJcbn1cclxuZnVuY3Rpb24gaXNKU09OKHN0cikge1xyXG4gICAgdHJ5IHtcclxuICAgICAgICBKU09OLnBhcnNlKHN0cik7XHJcbiAgICB9XHJcbiAgICBjYXRjaCAoZXJyKSB7XHJcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIHRydWU7XHJcbn1cclxuZnVuY3Rpb24gaWRlbnRpdHkoeCkge1xyXG4gICAgcmV0dXJuIHg7XHJcbn1cclxuZnVuY3Rpb24gdGhyb3dlcih4KSB7XHJcbiAgICB0aHJvdyB4O1xyXG59XHJcbmZ1bmN0aW9uIGNhbGxGZXRjaChjbGllbnQsIGlucHV0LCBib2R5LCBpbml0LCBtZXRob2QpIHtcclxuICAgIGlmICghaW5pdCkge1xyXG4gICAgICAgIGluaXQgPSB7fTtcclxuICAgIH1cclxuICAgIGluaXQubWV0aG9kID0gbWV0aG9kO1xyXG4gICAgaWYgKGJvZHkpIHtcclxuICAgICAgICBpbml0LmJvZHkgPSBib2R5O1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIGNsaWVudC5mZXRjaChpbnB1dCwgaW5pdCk7XHJcbn1cblxuZXhwb3J0IHsganNvbiwgcmV0cnlTdHJhdGVneSwgUmV0cnlJbnRlcmNlcHRvciwgSHR0cENsaWVudENvbmZpZ3VyYXRpb24sIEh0dHBDbGllbnQgfTtcbiJdLCJtYXBwaW5ncyI6IkFBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTsiLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///aurelia-fetch-client\n");

/***/ })

}]);